!function(){if(!Array.from){var a="";Array.from=function(b,c){return c||a!==b&&null!==b&&void 0!==b?[].concat(b):[]},Array.prototype.values&&delete Array.prototype.values}}(),Ext.override(Ext.Container,{afterRender:function(){if(Ext.Container.superclass.afterRender.call(this),this.layout||(this.layout="auto"),Ext.isObject(this.layout)&&!this.layout.layout&&(this.layoutConfig=this.layout,this.layout=this.layoutConfig.type),Ext.isString(this.layout)&&(this.layout=new(Ext.Container.LAYOUTS[this.layout.toLowerCase()])(this.layoutConfig)),this.setLayout(this.layout),void 0!==this.activeItem){var a=this.activeItem;delete this.activeItem,this.layout.setActiveItem(a)}this.ownerCt||this.doLayout(),this.monitorResize===!0&&Ext.EventManager.onWindowResize(this.doLayout,this,[!1])},canLayout:function(){var a=this.getVisibilityEl();return this.rendered&&!this.collapsed&&a&&a.dom&&!a.isStyle("display","none")},canParentsLayout:function(){var a=!0;return this.ownerCt&&this.ownerCt.bubble&&this.ownerCt.bubble(function(){return this.canLayout&&!this.canLayout(!0)?a=!1:void 0}),a},markDeferLayout:function(){this.deferLayout=!0,this.ownerCt&&this.ownerCt.bubble&&this.ownerCt.bubble(function(){return this.deferLayout?!1:void(this.canLayout&&!this.canLayout(!0)&&(this.deferLayout=!0))})},doLayout:function(a,b,c){{var d,e,f=this.rendered,g=b||this.forceLayout;this.deferLayout}if(f&&this.layout){if(void 0===c&&(c=this.canParentsLayout()),e=c&&this.canLayout(),!e&&!0!==g)return void this.markDeferLayout();if(!1!==this.beforeLayout()){if(this.layout.layout(),this.onLayout(),this.hasLayout=!0,a!==!0&&this.items){d=this.items.items;for(var h=0,i=d.length;i>h;h++){var j=d[h];j.doLayout&&(!j.hasLayout||j.deferLayout||j.forceLayout)&&j.doLayout(a,void 0,e)}this.hasDeepLayout=!0}this.afterLayout(),delete this.forceLayout,delete this.deferLayout}}},beforeLayout:Ext.emptyFn,afterLayout:Ext.Container.prototype.afterLayout||Ext.emptyFn,shouldBufferLayout:function(){var a=this.hasLayout;return this.ownerCt?a?!this.hasLayoutPending():!1:a},onShow:function(){Ext.Container.superclass.onShow.call(this),this.deferLayout&&this.doLayout()}}),delete Ext.Container.prototype.onResize,Ext.override(Ext.layout.ContainerLayout,{noscrollbar:!0,layout:function(){this.noscrollbar||this.container.setLayoutWithinScrollbar();var a=this.container.getLayoutTarget();this.hasLayout||Ext.isEmpty(this.targetCls)||a.addClass(this.targetCls),this.onLayout(this.container,a),this.container.fireEvent("afterlayout",this.container,this),this.hasLayout=!0,this.resizeTask&&this.resizeTask.cancel&&this.resizeTask.cancel()},onResize:function(){var a,b=this.container;!b.collapsed&&b.hasLayout&&((a=b.bufferResize&&b.shouldBufferLayout())?(this.resizeTask||(this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this),this.resizeBuffer=Ext.isNumber(a)?a:50),b.layoutPending=!0,this.resizeTask.delay(this.resizeBuffer)):this.runLayout())},setContainer:function(a){if(this.monitorResize&&a!==this.container){var b=this.container;b&&b.un(b.resizeEvent,this.onResize,this),a&&a.on(a.resizeEvent,this.onResize,this)}this.container=a}}),Ext.override(Ext.Panel,{beforeLayout:function(a,b){this.rendered&&this.toolbars.length>0&&(Ext.each(this.toolbars,function(a){a.hasLayout||a.doLayout(void 0,b)}),this.syncHeight()),Ext.Panel.superclass.beforeLayout.apply(this,arguments)},syncHeight:function(){var a,b=this.toolbarHeight,c=this.body,d=this.lastSize.height;this.rendered&&!this.autoHeight&&Ext.isDefined(d)&&"auto"!=d&&b!=this.getToolbarHeight()&&(b=Math.max(0,d-this.getFrameHeight()),c.setHeight(b),a=c.getSize(),this.toolbarHeight=this.getToolbarHeight(),this.onBodyResize(a.width,a.height))}}),delete Ext.Panel.prototype.onLayout,Ext.menu.Menu.prototype.afterLayout=Ext.menu.Menu.prototype.onLayout,delete Ext.menu.Menu.prototype.onLayout,Ext.override(Ext.layout.BoxLayout,{getItems:function(a){var b=[];return a.items.each(function(a){a.hidden||b.push(a)}),b}}),function(){var a=navigator.userAgent.toLowerCase(),b=function(b){return b.test(a)},c=document.documentMode,d=b(/opera/),e=!d&&b(/msie/),f=e&&(b(/msie 7/)&&8!=c&&9!=c&&10!=c||7==c),g=e&&(b(/msie 8/)&&7!=c&&9!=c&&10!=c||8==c),h=e&&(b(/msie 9/)&&7!=c&&8!=c&&10!=c||9==c),i=e&&(b(/msie 10/)&&7!=c&&8!=c&&9!=c||10==c),j=e&&b(/msie 6/);Ext.apply(Ext,{isIE:e,isIE6:j,isIE7:f,isIE7m:j||f,isIE7p:e&&!j,isIE8:g,isIE8m:j||f||g,isIE8p:e&&!(j||f),isIE9:h,isIE9m:j||f||g||h,isIE9p:e&&!(j||f||g),isIE10:i,isIE10m:j||f||g||h||i,isIE10p:e&&!(j||f||g||h)})}(),Ext.BLANK_IMAGE_URL=Ext.isIE6||Ext.isIE7?"images/s.gif":Ext.BLANK_IMAGE_URL,Ext.chart.Chart.CHART_URL="ext/resources/charts.swf",Ext.enableListenerCollection=!0;var SF={version:"1.3"};window.SF=SF,window.g_Lang=window.g_Lang||{},SF.setLocale=function(a){window.g_Lang=a};var _=function(a){var b=Array.prototype.slice.call(arguments,1);return a=g_Lang.hasOwnProperty(a)?g_Lang[a]:a,a.replace(/\{(\d+|#\w+#)\}/g,function(a,c){return c=parseInt(c,10),isNaN(c)?"":c>=0&&c<b.length?b[c]:a})};window._=_,function(){function a(a,b){return['<div class="msg">','<div class="x-box-tl"><div class="x-box-tr"><div class="x-box-tc"></div></div></div>','<div class="x-box-ml"><div class="x-box-mr"><div class="x-box-mc"><h3>',a,"</h3>",b,"</div></div></div>",'<div class="x-box-bl"><div class="x-box-br"><div class="x-box-bc"></div></div></div>',"</div>"].join("")}var b,c,d,e={debug:!1,local:!1,compress:!0,disableCache:!1};SF.emptyFn=Ext.emptyFn;for(b in e)e.hasOwnProperty(b)&&(d=b+"Mode",c="SF"+d.charAt(0).toUpperCase()+d.slice(1),SF[d]="undefined"!=typeof window[c]?window[c]:e[b]);if(SF.pageTimer=!0,SF.debugMode=!0,SF.debugMode){SF.logLevels={DEBUG:1,INFO:2,WARN:3,ERROR:4},SF.LOG_LEVEL=SF.logLevels.DEBUG;var f=["","DEBUG","INFO","WARNING","ERROR"],g=!1,h=function(){var a=window.console;switch(SF.LOG_LEVEL){case SF.logLevels.DEBUG:SF.log=function(){a.log.apply(a,arguments)};case SF.logLevels.INFO:SF.info=function(){a.info.apply(a,arguments)};case SF.logLevels.WARN:SF.warn=function(){a.warn.apply(a,arguments)};case SF.logLevels.ERROR:SF.error=function(){a.error.apply(a,arguments)}}},i=[],j=new Ext.util.DelayedTask(function(){SF.uxFlushLog&&SF.uxFlushLog(i),i=[]}),k=function(a,b){i.push(String.format("[{0}]:{1}",f[b],a)),j.delay(SF.uxFlushLogBuffer||5e3)};SF.log=function(a,b){var c=window.console;if(!g&&!Ext.isIE&&c&&c.log&&c.info&&c.warn&&c.error)switch(h(),g=!0,b){case SF.logLevels.INFO:SF.info(a);break;case SF.logLevels.WARN:SF.warn(a);break;case SF.logLevels.ERROR:SF.error(a);break;default:SF.log(a)}else b=b||SF.logLevels.DEBUG,b<SF.LOG_LEVEL||k(a,b)},SF.info=function(a){SF.log(a,SF.logLevels.INFO)},SF.warn=function(a){SF.log(a,SF.logLevels.WARN)},SF.error=function(a){SF.log(a,SF.logLevels.ERROR)}}else SF.log=SF.info=SF.warn=SF.error=SF.emptyFn;SF.alert=function(a,b){return SF.MultiMsgBox.addMsg({msg:a,title:b,msgType:"warn"})},SF.showErr=SF.showError=function(a,b){return SF.MultiMsgBox.addMsg({msg:a,title:b,msgType:"error"})},SF.showInfo=function(a,b){return SF.MultiMsgBox.addMsg({msg:a,title:b,msgType:"info"})};var l=null;SF.showMsg=function(b,c,d){d=d||{},l||(l=Ext.DomHelper.insertFirst(document.body,{id:"msg-div"},!0)),SF.isArray(b)&&(b=b.join("<br />")),SF.isString(b)&&(b=b.replace(/\r\n/g,"\n"),b=b.replace(/\n/g,"<br/>")),c=c||_("\u4fe1\u606f");var e=Ext.DomHelper.append(l,{html:a(c,b)},!0);l.alignTo(document,"t-t");var f=Ext.get("effectbar-wrap");f&&f.addClass("sf-back-tip"),e.slideIn("t").pause(d.pauseTime||3).ghost("t",{remove:!0,callback:function(){l.dom.childNodes.length>0||f&&f.removeClass("sf-back-tip")}})};var m={_default:new Date};SF.timeReset=function(a){a=a||"_default",m[a]=new Date,SF.log("	["+a+"] begin time record.")},SF.time=function(a,b){b=b||"_default";var c=m[b],d=new Date-c;return SF.log(String.format("	[{0}] {1} : {2}",b,d,a)),d},SF.confirm=function(a,b,c,d){Ext.isFunction(b)&&(d=c,c=b,b=null),Ext.MessageBox.show({title:b||_("\u8bf7\u786e\u8ba4"),msg:a,buttons:Ext.MessageBox.YESNO,icon:Ext.MessageBox.QUESTION,fn:c,scope:d})},SF.globalEval=function(a){var b=document.getElementsByTagName("head")[0],c=document.createElement("script");c.text=a,b.insertBefore(c,b.firstChild),b.removeChild(c)},SF.loadCss=function(a,b){if(SF.log("loadCss:"+a),Ext.isDefined(a)){Ext.isArray(a)||(a=[a]),b===!0&&SF.unloadCss(a);for(var c=document.getElementsByTagName("head")[0],d=0;d<a.length;d++){var e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.setAttribute("sf:href",a[d]),e.href=Ext.urlAppend(a[d],String.format("{0}={1}","_dc",(new Date).getTime())),c.appendChild(e)}}},SF.unloadCss=function(a){if(Ext.isDefined(a)){Ext.isArray(a)||(a=[a]);for(var b=document.getElementsByTagName("head")[0],c=document.getElementsByTagName("link"),d=0;d<c.length;d++){var e=c[d];"stylesheet"===e.rel&&"text/css"===e.type&&a.indexOf(e.getAttribute("sf:href"))>=0&&b.removeChild(e)}}};var n=null;SF.loadFileEntry="php/loadfile.php?file={0}",SF.loadFile=function(a,b){var c=b?a:String.format(SF.loadFileEntry,encodeURIComponent(a));Ext.isIE?Ext.Msg.show({minWidth:200,title:_("\u6d4f\u89c8\u5668\u672a\u80fd\u5f39\u51fa\u4e0b\u8f7d\u9879?"),msg:'<a target="_blank" href="'+c+'">'+_("\u624b\u52a8\u4e0b\u8f7d\u6587\u4ef6(\u8bf7\u70b9\u51fb\u94fe\u63a5).")+"</a>",fn:function(){return!0}}):(n||(n=Ext.getBody().createChild({tag:"iframe",frameBorder:0,width:0,height:0,css:"display:none;visibility:hidden;height:0px;"})),n.dom.src=c)}}(),SF.copyTo=Ext.copyTo,SF.copyTo(SF,Ext,["extend","override","emptyFn","isChrome","isIE","isIE6","isIE7","isIE8","isSafari","apply","applyIf","decode","encode","destroy","each","fly","get","getCmp","getDom","isArray","isBoolean","isDate","isDefined","isEmpty","isFunction","isNumber","isObject","isPrimitive","isString","iterate","namespace","ns","num","query","reg","select","urlAppend","urlEncode"]),SF.Ajax=Ext.Ajax,SF.ux=Ext.ux=Ext.ux||{},SF.applyInterface=function(a,b,c){var d,e=a.prototype||a,f=b.prototype;SF.applyIf(e,f),c&&(d=e.mixins=e.mixins||{},d[c]=f)},SF.changeConstructor=function(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b.prototype=a.prototype,b.prototype.constructor=b,a.xtype&&Ext.reg(a.xtype,b),b},SF.intercepterConstructor=function(a,b){var c=function(){b.apply(this,arguments),a.apply(this,arguments)};return SF.changeConstructor(a,c)},SF.sequenceConstructor=function(a,b){var c=function(){a.apply(this,arguments),b.apply(this,arguments)};return SF.changeConstructor(a,c)},SF.isEmptyObject=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},SF.isOrphanDom=function(a){var b=a&&a.ownerDocument&&a.ownerDocument.documentElement;return!b||(b.contains?!b.contains(a):1&b.compareDocumentPosition(a))},Ext.DomQuery.matchers.push({re:/^(?:([\[\{])(?:@)?([\w\-]+(?:\:[\w\-]+))\s?(?:(=|.=)\s?['"]?(.*?)["']?)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{4}", "{3}", "{1}");'}),SF.merge=function(a,b,c){var d,e,f,g={};if(c=parseInt(c,10),window.isNaN(c)&&(c=20),0>=c)return SF.warn("\u5bf9\u8c61\u6df1\u5ea6\u8d85\u51fa!\u53ef\u80fd\u5b58\u5728\u5faa\u73af\u5f15\u7528"),null;for(f in a)a.hasOwnProperty(f)&&(g[f]=a[f]);for(f in b)b.hasOwnProperty(f)&&(d=a[f],e=b[f],"undefined"==typeof d?g[f]=e:"object"==typeof d&&"object"==typeof e&&(g[f]=SF.merge(d,e,c-1)));return g},SF.deepApply=function(a,b){var c,d;for(d in b)c=b[d],"object"!=typeof c||"object"!=typeof a[d]?a[d]=c:SF.deepApply(a[d],c);return a},SF.clean=function(a,b){var c,d,e={},f=arguments.length>1;if("object"!=typeof a)return a;for(c in a)a.hasOwnProperty(c)&&(d=a[c],f&&d===b||(e[c]=d));return e},SF.clone=function(a,b){var c,d,e,f,g=arguments.callee;if(b=parseInt(b,10),window.isNaN(b)&&(b=20),0>=b)return SF.warn("\u5bf9\u8c61\u6df1\u5ea6\u8d85\u51fa!\u53ef\u80fd\u5b58\u5728\u5faa\u73af\u5f15\u7528"),null;if(Ext.isObject(a)){c={};for(d in a)a.hasOwnProperty(d)&&(c[d]=g(a[d],b-1))}else if(Ext.isArray(a))for(c=[],e=0,f=a.length;f>e;e++)c.push(g(a[e],b-1));else c=Ext.isString(a)?a.slice(0):a;return c},SF.compare=function(){var a={"==":!0,">=":!0,"<=":!0,"~=":!0},b={"==":!1,">=":!0,"<=":!1,"~=":!0},c={"==":!1,">=":!1,"<=":!0,"~=":!0};return function(d,e,f,g){var h;if(f=a[f]?f:"==",g=g||0,g>20)return SF.warn("\u5bf9\u8c61\u6df1\u5ea6\u8d85\u51fa!\u53ef\u80fd\u5b58\u5728\u5faa\u73af\u5f15\u7528"),!1;if(d===e)return!0;if(d&&e&&"object"==typeof d&&"object"==typeof e){for(h in d)if(d.hasOwnProperty(h))if(e.hasOwnProperty(h)){if(!SF.compare(d[h],e[h],f,g+1))return!1}else if(!b[f])return!1;for(h in e)if(e.hasOwnProperty(h)&&!d.hasOwnProperty(h)&&!c[f])return!1;return!0}return!1}}(),SF.normalizeUrl=function(){var a=/^((?:http|ftp|https):\/\/[^\/]+\/)((?:[^\/?]+\/)*)[^\/?]*(?:\?)?.*$/i;return function(b,c){if(c&&!a.test(c)&&(c=SF.normalizeUrl(c,window.location.href)),a.test(b))return b;c=c||window.location.href;var d=c.match(a);c=d[1]+d[2],b="/"===b.charAt(0)?d[1]+b.substring(1):d[1]+d[2]+b;var e=b.match(a),f="/"+e[2];return f=f.replace(/\/[^\/]+\/\.\.\//g,"/"),f=f.replace(/^\/\.\.\//g,"/"),f=f.replace(/\/\.\//g,"/"),b.replace(e[2],f.substring(1))}}(),SF.location=function(){var a,b,c,d;return c=d=location.hostname,a=location.host,b=location.port,c.indexOf(":")>=0&&(/^\[.*\]$/.test(c)?d=d.slice(1,d.length-1):c="["+c+"]",a=c+(b?":"+b:"")),{protocol:location.protocol,host:a,hostname:c,servername:d,port:location.port,pathname:location.pathname,search:location.search,hash:location.hash}}(),SF.wrap=function(){var a=function(){};return function(b){return a.prototype=b,new a}}(),SF.ns("SF.constants","SF.constants.style"),function(){var a=SF.constants.style.ICO={ADD:"sf-ico-add",DELETE:"sf-ico-delete",DELETE_DISABLE:"sf-ico-delete-disable",EDIT:"sf-ico-edit",UP:"sf-ico-up",DOWN:"sf-ico-down",DETAIL:"sf-ico-detail",CONFIG:"sf-ico-config",ACCEPT:"sf-ico-accept",REFUSE:"sf-ico-refuse",ENABLE:"sf-ico-enable",DISABLE:"sf-ico-disable",IMPORT:"sf-ico-import",EXPORT:"sf-ico-export",UPDATE:"sf-ico-update",DEFAULT:"sf-ico-default"};a.DEL=a.DELETE,a.DEL_DISABLE=a.DELETE_DISABLE,SF.constants.style.FORM={TOP_LABEL_STYLE:"font-weight:bold;margin-top:10px;color:#666;"},SF.constants.PARAMS={OPR:"opr",LIST:"list",ADD:"add",DEL:"delete",REMOVE:"delete",UPDATE:"modify"},SF.constants.REGEX={IP:/(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])/,DOMAIN:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,PORT:/^(6553[0-5]|655[0-2]\d|65[0-4]\d\d|6[0-4]\d{3}|[1-5]\d{4}|[1-9]\d{0,3}|0)$/}}(),function(){var a=function(){},b=SF.MultiTaskMonitor=function(b){this.tasks=b.tasks,this.status=[],this.success=b.success||b.callback||a,this.failure=b.failure||b.callback||this.success,this.scope=b.scope||b||window,this.finishCount=0,this.failureCount=0,this.finished=!1,this.onComplete=a,this.timeout=b.timeout||3e4,this.hTimeout=null};b.prototype={run:function(){if(!this.finished){for(var a,b=this,c=0;c<b.tasks.length;c++)a=b.tasks[c],a.onComplete=b.createListener(c),a.run();this.hTimeout=setTimeout(function(){b.processTimeout()},this.timeout)}},createListener:function(a){var b=this;return function(c){SF.log("Task "+a+" is complete with: "+c),b.status[a]=c,b.finishCount++,c===!1&&b.failureCount++,b.checkStatus()}},checkStatus:function(){!this.finished&&this.finishCount>=this.tasks.length&&(this.failureCount<=0?this.processSuccess():this.processFailure())},processTimeout:function(){this.finished||(SF.log("Timeout"),this.finished=!0,this.failure(!1),this.onComplete(!1))},processSuccess:function(){this.finished||(SF.log("success"),this.finished=!0,this.success.call(this.scope,!0),this.onComplete(!0),clearTimeout(this.hTimeout))},processFailure:function(){this.finished||(SF.log("failure"),this.finished=!0,this.failure.call(this.scope,!1),this.onComplete(!1),clearTimeout(this.hTimeout))}},Ext.ns("SF.MultiTaskMgr"),SF.MultiTaskMgr.run=function(a){var b=new SF.MultiTaskMonitor(a);return b.run(),b}}(),function(){var a=function(){var a=this.jsonData;if(!this.hasOwnProperty("jsonData")){try{a=Ext.decode(this.responseText)}catch(b){a=SF.debugMode?{success:!1,msg:this.responseText}:null}a||(a=null),this.jsonData=a}return a};SF.Ajax.__getJsonData=a,Ext.Ajax.MASK_BUFFER_TID="mask_buffer_tid",Ext.Ajax.DEFAULT_MASK_BUFFER=300,Ext.Ajax.jsonRequest=function(a){function b(b,c,h){a.cancelable&&Ext.Msg.hide();var i=h.getJsonData();return g&&(l[n]?(clearTimeout(l[n]),delete l[n]):j.unmask()),c&&i&&i.success===!0?(d.call(m,i,a,h),void f.call(m,i,!0,a,h)):(e.call(m,i,a,h),void f.call(m,i,!1,a,h))}var c,d,e,f,g,h,i,j,k,l,m=a.scope||this,n=Ext.Ajax.MASK_BUFFER_TID;return d=SF.isFunction(a.success)?a.success:SF.isString(a.success)?SF.showMsg.createCallback(a.success):SF.emptyFn,e=SF.isFunction(a.failure)?a.failure:SF.isString(a.failure)?SF.showErr.createCallback(a.failure):SF.emptyFn,f=SF.isFunction(a.callback)?a.callback:SF.emptyFn,g=SF.isString(a.waitMsg)?a.waitMsg:a.waitMsg===!0?_("\u6b63\u5728\u8bf7\u6c42\u6570\u636e,\u8bf7\u7a0d\u5019..."):!1,h=!0===a.waitMsgBuffer?Ext.Ajax.DEFAULT_MASK_BUFFER:SF.isNumber(a.waitMsgBuffer)?a.waitMsgBuffer:!1,i=a.waitMsgCls||"x-mask-loading",j=a.waitMsgTarget,j&&(j.mask&&j.unmask||(j=Ext.get(j))),j=j||Ext.getBody(),c={timeout:504e5,url:a.url,method:"post",jsonData:a.data||a.jsonData||a.params,callback:b},Ext.copyTo(c,a,["timeout","headers","method"]),l=Ext.Ajax.request(c),g&&(h?l[n]=setTimeout(function(){try{j.mask(g,i)}catch(a){SF.error(a)}delete l[n]},h):j.mask(g,i)),a.cancelable&&(k={wait:!0,fn:function(){Ext.Ajax.abort(l)}},Ext.applyIf(k,a.cancelCfg),Ext.applyIf(k,{title:_("\u6570\u636e\u8bf7\u6c42"),msg:_("\u6570\u636e\u8bf7\u6c42\u4e2d..."),width:300,buttons:Ext.MessageBox.CANCEL,icon:Ext.MessageBox.INFO,scope:this}),Ext.Msg.show(k)),l},Ext.Ajax.on("requestcomplete",function(b,c){c.getJsonData=a}),Ext.Ajax.on("requestexception",function(b,c){c.getJsonData=a}),SF.deepCleanThreadId=setInterval(function(){Ext.lib.Ajax.poll=SF.clean(Ext.lib.Ajax.poll,null),Ext.lib.Ajax.timeout=SF.clean(Ext.lib.Ajax.timeout,null)},3e4);var b=Ext.Ajax.abort;Ext.Ajax.abort=function(a){if(!a)return SF.error("try to abort a transId of null, ",a),!1;var c=Ext.Ajax.MASK_BUFFER_TID;return a[c]&&(clearTimeout(a[c]),delete a[c]),Ext.Ajax.fireEvent("abort",a),b.apply(this,arguments)}}(),SF.MultiMsgBox=function(){function a(){f.removeAll(!0),m=!1}function b(){if(!e){e=new Ext.XTemplate('<div class="sf-multi-msgbox-brief">',_("\u4fe1\u606f\u5217\u8868\uff1a"),"<span></span></div>",'<div class="sf-multi-msgbox-list">','<tpl for=".">','<div class="sf-multi-msgbox-item ','<tpl if="isLast">sf-multi-msgbox-item-last</tpl>',' sf-multi-msgbox-item-{msgType}">','<div class="sf-multi-msgbox-icon {icon}"></div>','<div class="sf-multi-msgbox-content">',"{msg}","</div>","</div>","</tpl>","</div>",'<div class="x-clear"></div>'),f=new Ext.data.JsonStore({autoDestroy:!0,fields:["msgType","msg","isLast"]}),g=new Ext.DataView({tpl:e,itemSelector:"div.sf-multi-msgbox-item",store:f,syncHeight:function(){}}),h=new Ext.Window({title:j,width:370,autoFit:!1,autoHeight:!0,modal:!0,renderTo:Ext.getBody(),closeAction:"hide",buttonAlign:"right",defaultButton:0,buttons:[{text:_("\u5173\u95ed"),handler:function(){h.hide()}}],listeners:{hide:a},items:[g]});var b=h.hide;h.hide=function(){i&&i.cancel(),b.apply(h,arguments)};var c=Ext.WindowMgr.bringToFront;Ext.WindowMgr.bringToFront=function(a){var b,d=!1;return h.hidden===!1&&a!==Ext.Msg.getDialog()&&(d=h._lastAccess,h._lastAccess=Number.MAX_VALUE),b=c.apply(this,arguments),d&&(h._lastAccess=d),b}}}function c(){b(),h.setTitle(j||"");var a,c,d,e,i,l,m=f.getCount(),o={},p=!1,q=[],r=0;f.each(function(a,b,c){var d=a.data.msgType;a.data.isLast=b+1===c,o[d]=o[d]||0,o[d]++});for(a in o)o.hasOwnProperty(a)&&q.push(_("{0}\u6761{1}\u4fe1\u606f",o[a],n[a]));c=g.getTemplateTarget(),c&&(i=c.child("div.sf-multi-msgbox-brief"),i||(g.refresh(),p=!0),r=h.hidden===!1?c.child("div.sf-multi-msgbox-list").dom.scrollTop:0,p||(g.refresh(),p=!0),i=c.child("div.sf-multi-msgbox-brief"),d=i.child(">span"),l=c.child("div.sf-multi-msgbox-list"),d.update(q.join(_("\uff0c"))+_("\uff01")),h.body.setHeight("auto"),l.setHeight("auto"),l.dom.scrollTop=0,m>1&&(e=parseInt(h.body.dom.scrollHeight,10),e>k&&(h.body.setHeight(k),l.setHeight(k-i.getHeight()-l.getMargins("tb")),l.dom.scrollTop=r))),h.center(),h.show()}function d(a,d){var e,g;for(d=d===!0,b(),g=f.getCount(),f.suspendEvents();g>=l;)m=!0,f.removeAt(0),g=f.getCount();return Ext.isArray(a.msg)&&(a.msg=a.msg.join("<br />")),j=a.title=a.title===!1?!1:a.title||n[a.msgType]||_("\u4fe1\u606f"),a.icon=a.icon||"",e=new f.recordType(a),f.add(e),1>g?d||h.el.addClass(o):d||h.el.removeClass(o),d||(i||(i=new Ext.util.DelayedTask(c)),i.delay(50)),f.resumeEvents(),h}var e,f,g,h,i,j=_("\u63d0\u793a\u4fe1\u606f"),k=200,l=100,m=!1,n={warn:_("\u544a\u8b66"),error:_("\u9519\u8bef"),info:_("\u63d0\u793a")},o=({warn:Ext.MessageBox.WARNING,error:Ext.MessageBox.ERROR,info:Ext.MessageBox.INFO},"sf-multi-msgbox-single");return{addMsg:d}}(),function(){var a="boxShadow"in document.documentElement.style||"WebkitBoxShadow"in document.documentElement.style||"MozBoxShadow"in document.documentElement.style,b=Ext.Shadow.prototype;Ext.Shadow=function(b){var c,d,e,f=this;switch(Ext.apply(f,b),Ext.isString(f.mode)||(f.mode=f.defaultMode),d=f.offset,e=Math.floor(d/2),f.opacity=50,f.mode.toLowerCase()){case"drop":c=a?{t:d,l:d,h:-d,w:-d}:{t:-e,l:-e,h:-e,w:-e};break;case"sides":c=a?{t:d,l:0,h:-d,w:0}:{t:-(1+e),l:1+e-2*d,h:-1,w:e-1};break;case"frame":c=a?{t:0,l:0,h:0,w:0}:{t:1+e-2*d,l:1+e-2*d,h:d-e-1,w:d-e-1}}f.adjusts=c},Ext.Shadow.prototype=b,b.constructor=Ext.Shadow,Ext.override(Ext.Shadow,{boxShadowProperty:function(){var a="boxShadow",b=document.documentElement.style;return"boxShadow"in b||("WebkitBoxShadow"in b?a="WebkitBoxShadow":"MozBoxShadow"in b&&(a="MozBoxShadow")),a}(),__hackOldIE:Ext.isIE&&!a?function(){var a=["progid:DXImageTransform.Microsoft.alpha(opacity="+this.opacity+")","progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")"].join(" ");this.el.dom.style.filter=a}:Ext.emptyFn,show:function(a){var b,c=this;a=Ext.get(a),c.el||(c.el=Ext.Shadow.Pool.pull(),c.el.dom.nextSibling!=a.dom&&c.el.insertBefore(a)),b=parseInt(a.getStyle("z-index"),10)-1||0,c.el.setStyle("z-index",c.zIndex||b),this.__hackOldIE(),c.realign(a.getLeft(!0),a.getTop(!0),a.dom.offsetWidth,a.dom.offsetHeight),c.el.dom.style.display="block"},realign:function(b,c,d,e){if(this.el){var f,g,h,i,j=this.adjusts,k=this.el.dom,l=k.style;l.left=b+j.l+"px",l.top=c+j.t+"px",f=Math.max(d+j.w,0),g=Math.max(e+j.h,0),h=f+"px",i=g+"px",(l.width!=h||l.height!=i)&&(l.width=h,l.height=i),a&&(l[this.boxShadowProperty]="0 0 "+(this.offset+2)+"px #888")}},setOpacity:function(b){this.el&&(Ext.isIE&&!a&&(b=Math.floor(100*b/2)/100),this.opacity=b,this.el.setOpacity(b))}}),Ext.Shadow.Pool=function(){var b=[],c=function(){return String.format('<div class="x-{0}-shadow" role="presentation"></div>',Ext.isIE&&!a?"ie":"css")}();return{pull:function(){var a=b.shift();return a||(a=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,c)),a.autoBoxAdjust=!1),a},push:function(a){b.push(a)},reset:function(){var a,c=[].concat(b),d=c.length;for(a=0;d>a;a++)b[a].remove();b=[]}}}()}(),Ext.Element.addMethods(function(){var a,b="x-masked",c="x-masked-relative",d=Ext.Element.data;return a=Ext.isIE?function(){var a,b=this,c=b.dom,e=d(c,"mask");e&&(e.setSize(b.getSize()),a=d(c,"maskMsg"),a&&a.center(b))}:Ext.emptyFn,{block:function(a,e,f){var g,h,i=this,j=i.dom,k=Ext.DomHelper,l="ext-el-mask-msg",f=f||"";if("static"==i.getStyle("position")&&i.addClass(c),(g=d(j,"maskMsg"))&&g.remove(),(g=d(j,"mask"))&&g.remove(),h=k.append(j,{cls:"ext-el-mask ext-el-block "+f},!0),d(j,"mask",h),i.addClass(b),h.setDisplayed(!0),"string"==typeof a){var m=k.append(j,{cls:l,cn:{tag:"div"}},!0);d(j,"maskMsg",m),m.dom.className=e?l+" "+e:l,m.dom.firstChild.innerHTML=a,m.setDisplayed(!0),m.center(i)}return!Ext.isIE||Ext.isIE7&&Ext.isStrict||"auto"!=i.getStyle("height")||h.setSize(i.getSize()),h},unblock:function(){var a=this,e=a.dom,f=d(e,"mask"),g=d(e,"maskMsg");f&&(g&&(g.remove(),d(e,"maskMsg",void 0)),f.remove(),d(e,"mask",void 0)),a.removeClass([b,c])},isBlocked:function(){var a=d(this.dom,"mask");return a&&a.isVisible()},syncBlock:a,syncMask:a}}()),SF.Component=Ext.Component,SF.override(SF.Component,{enableElAction:!1,elActionEventName:"click",elActionPropertyName:"actionName",actionPublishEventName:"action",initComponent:function(){this.addEvents(this.actionPublishEventName),this.enableElAction&&this.on("render",function(){this.listenElAction(this.el)},this,{single:!0}),SF.debugMode&&SF.debug&&SF.debug.monitor(this,this.getXTypes()||"invalidXType")},beforeAction:SF.emptyFn,fireAction:function(a,b,c){return b=SF.isObject(b)?b:{},b.actionName=a,b.event=c,this.beforeAction(a,b,c)!==!1?this.fireEvent(this.actionPublishEventName,a,b,c):!1},listenElAction:function(a,b,c){b=b||this.elActionEventName,c=c||this.elActionPropertyName,this.mon(a,b,this.createElActionCallback(a,c),this)},handleElAction:function(a,b,c,d){this.fireAction(d,{dom:b},a)},createElActionCallback:function(a,b){b=b||this.elActionPropertyName;var c=String.format("[{0}]",b);return function(d){var e=d.getTarget(c,a);e&&this.handleElAction(d,e,a,SF.fly(e).getAttribute(b))}},cacheCssImage:Ext.isIE?function(a){this.rendered&&this.el.createChild({cls:"sf-cacheimage "+a})}:Ext.emptyFn}),Ext.override(Ext.BoxComponent,{sizeStatePrefix:"MEASURED_SIZE_",onRender:Ext.BoxComponent.prototype.onRender.createSequence(function(){this.autoFit&&this.initAutoFit()}),initAutoFit:function(){return this.intelHeight=this.autoHeight,this.intelWidth=this.autoWidth,this.fixedHeight=this.intelHeight?!1:this.height,this.fixedWidth=this.intelWidth?!1:this.width,this.intelHeight||this.intelHeight||this.fixedHeight||this.fixedWidth?((this.intelHeight||this.intelWidth)&&Ext.state.Manager&&Ext.isString(this.autoFit)&&(this.originalSizeStateful=!0,this.originalSize=Ext.state.Manager.get(this.sizeStatePrefix+this.autoFit)),this.origSetSize=this.setSize,this.setSize=this.intelSetSize,this.originalSize?this.autoWidth=this.autoHeight=!1:this.measureSize(),void 0):(this.autoFit=!1,!1)},restrictSize:function(a,b){var c;return c=Ext.isObject(a)?a:{width:a,height:b},this.autoFit&&(c.width=Math.min(c.width||1e4,this.fixedWidth||1e4),c.height=Math.min(c.height||1e4,this.fixedHeight||1e4),this.intelWidth&&this.originalSize&&"undefined"!=typeof this.originalSize.width&&c.width>this.originalSize.width&&(c.width=this.originalSize.width),"undefined"!=typeof this.maxWidth&&c.width>this.maxWidth&&(c.width=this.maxWidth),"undefined"!=typeof this.ctMaxWidth&&c.width>this.ctMaxWidth&&(c.width=this.ctMaxWidth),this.intelHeight&&this.originalSize&&"undefined"!=typeof this.originalSize.height&&c.height>this.originalSize.height&&(c.height=this.originalSize.height),"undefined"!=typeof this.maxHeight&&c.height>this.maxHeight&&(c.height=this.maxHeight),"undefined"!=typeof this.ctMaxHeight&&c.height>this.ctMaxHeight&&(c.height=this.ctMaxHeight)),c},intelSetSize:function(a,b){Ext.isObject(a)&&(b=a.height,a=a.width),this.lastRawSize={width:a,height:b};var c,d,e,f,g=this.restrictSize(a,b);d=this.originalSize||{},e=d.width,f=d.height;var h=this.measureSizing&&this._stableMeasuring;return c=this.getAutoScroll(),this.intelHeight&&"undefined"!=typeof f&&(g.height<f?c.y=!0:(c.y=!1,g.height="auto")),this.intelWidth&&"undefined"!=typeof e&&(g.width<e?c.x=!0:(c.x=!1,g.width="auto")),h||this.setAutoScroll(c),this.origSetSize.call(this,g)},measureSize:function(a){var b;this.rendered&&(b=this.getContentTarget(),b&&(this.lastScrollTop=b.dom.scrollTop,this.lastScrollLeft=b.dom.scrollTop)),this.measureSizing=!0,this._stableMeasuring=a===!0,this.intelHeight&&(this.autoHeight=!0),this.intelWidth&&(this.autoWidth=!0),this.hookMeasureSizeDone(),this.rendered&&(delete this.lastSize,this.origSetSize(void 0,void 0))},hookMeasureSizeDone:function(){this.on(this.rendered?"resize":"afterrender",this.refreshSize,this,{single:!0})},refreshSize:function(){var a,b,c;this.measureSizing&&(this.measureSizing=!1,b=this.lastScrollTop,delete this.lastScrollTop,c=this.lastScrollLeft,delete this.lastScrollLeft,this.rendered&&(a=this.getContentTarget()),this.autoWidth=this.autoHeight=!1,delete this.lastSize,this.originalSize=this.getSize(),this.originalSizeStateful&&Ext.state.Manager.set(this.sizeStatePrefix+this.autoFit,this.originalSize)),this.setSize(this.lastRawSize),a&&b>0&&a.scrollTo("top",b),a&&c>0&&a.scrollTo("left",c)},onShow:function(){Ext.BoxComponent.superclass.onShow.apply(this,arguments),this.autoFit&&this.refreshSize()},getAutoScroll:function(a){var b,c;return"undefined"==typeof a&&(a=this.autoScroll),"undefined"==typeof a&&(a={x:!1,y:!1}),Ext.isObject(a)?a:(/x/.test(a)&&(b=!0),/y/.test(a)&&(c=!0),(a===!0||"auto"===a)&&(b=c=!0),{x:b,y:c})},setAutoScroll:function(a){if(this.rendered&&this.autoScroll!==!1){var b={},c=this.getContentTarget();a=Ext.isObject(a)?a:this.getAutoScroll(a),this.measureSizing||(a.x||c.scrollTo("left",0),a.y||c.scrollTo("top",0)),b["overflow-x"]=a.x?"auto":"",b["overflow-y"]=a.y?"auto":"",this.forceYScroll&&(b["overflow-y"]="scroll"),c.setStyle(b),this.autoScroll=a}return this}}),Ext.override(Ext.Container,{bubbleEvents:["add","remove","magic"],initAutoFit:function(){!1!==Ext.Container.superclass.initAutoFit.apply(this,arguments)&&(this.setLayoutWithinScrollbar(),this.on("magic",this._playWithMagic,this))},_playWithMagic:function(){var a;return this.intelHeight&&!this.measureSizing&&this.originalSize&&(a=this._measureBufferTask,a||(a=this._measureBufferTask=new Ext.util.DelayedTask(function(){delete this.originalSize,this.measureSize(!0)},this)),a.delay(0)),!1},setLayoutWithinScrollbar:function(){this.hasOwnProperty("origGetLayoutTarget")||(this.origGetLayoutTarget=this.getLayoutTarget,this.getLayoutTarget=this.intelGetLayoutTarget)},intelGetLayoutTarget:function(){var a,b=function(){var b=Ext.Element.prototype.getViewSize.apply(this,arguments);return a||(a=Ext.getScrollBarWidth()),this.isStyle("overflow-x","auto")&&(b.height-=a),this.isStyle("overflow-y","auto")&&(b.width-=a),b};return function(){var a=this.origGetLayoutTarget.apply(this,arguments);return a.getViewSize=b,a}}(),measureSize:function(){Ext.Container.superclass.measureSize.apply(this,arguments),this.hasLayout&&this.doLayout()},hookMeasureSizeDone:Ext.emptyFn,afterLayout:function(){this.measureSizing&&this.refreshSize()}.createSequence(Ext.Container.prototype.afterLayout),getComponent:function(a){if(Ext.isObject(a))a=a.getItemId();else if(Ext.isNumber(a))return this.items.get(a);if(a=String(a||"").split(/\s*\.\s*/),a.length){if(1===a.length)return this.items.get(a[0]);var b=a.shift(),c=this.items.get(b);return c&&c.getComponent?c.getComponent(a.join(".")):null}return null}}),function(){SF.Panel=Ext.Panel;var a=SF.Panel.prototype.initComponent,b=SF.Panel.prototype.onRender;SF.override(SF.Panel,{enableButtonAction:!1,buttonActionPropertyName:"actionName",actionPropertyName:"actionName",initComponent:function(){if(this.enableButtonAction){var b=["bbar","buttons","fbar","tbar"];this.tools&&(this.tools=this.processButtonsAction(this.tools,!0));for(var c=0,d=b.length;d>c;c++)this[b[c]]&&(this[b[c]]=this.processButtonsAction(this[b[c]]))}a.apply(this,arguments),this.addEvents("click")},onRender:function(){b.apply(this,arguments),this.tbar&&this.mon(this.tbar,"click",this.onPanelTbarClicked,this),this.header&&this.mon(this.header,"click",this.onPanelHeaderClicked,this)},onPanelTbarClicked:function(a,b){this.handleActions(a,b)},onPanelHeaderClicked:function(a,b){this.handleActions(a,b)},handleActions:function(a,b){b=Ext.get(b);var c=b.getAttribute(this.actionPropertyName);c&&this.handleDomAction(a,b,c)},processButtonsAction:function(a,b){b=b===!0;var c=null;if(SF.isArray(a)){c=[];for(var d=0,e=a.length;e>d;d++)c.push(this.processButtonsAction(a[d],b));return c}return SF.isObject(a)?(a.isXType?(c=a,c.setActionHandler?SF.isString(c[this.buttonActionPropertyName])&&(c.setActionHandler?c.setActionHandler(this.handleButtonsAction,this):this.mon(c,"click",this.handleButtonsAction,this)):(c.isXType("toolbar")||c.isXType("menu"))&&c.items&&this.processButtonsAction(c.items.items)):(c=SF.apply({},a),SF.isArray(c.buttons)?c.buttons=this.processButtonsAction(c.buttons):SF.isArray(c.items)?c.buttons=this.processButtonsAction(c.items):SF.isString(c[this.buttonActionPropertyName])&&SF.apply(c,{actionHandler:b?this.handleToolsAction:this.handleButtonsAction,actionScope:this})),c.menu&&(c.menu=this.processButtonsAction(c.menu)),c):a
},handleButtonsAction:function(a,b){var c=this.getButtonActionOptions.apply(this,arguments);this.fireAction(a[this.buttonActionPropertyName],c,b)},getButtonActionOptions:function(a,b,c){return c=SF.isObject(c)?c:{},c.component=a,c},handleToolsAction:function(a,b,c,d){this.fireAction(d[this.buttonActionPropertyName],{el:b,toolConfig:d},a)},handleDomAction:function(a,b,c){this.fireAction(c,{el:b},a)},createToolHandler:function(a,b,c,d){return function(e){a.removeClass(c),b.handler&&b.handler.call(b.scope||a,e,a,d,b)}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var a=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');a.disableFormats=!0,a.compile(),Ext.layout.BorderLayout.Region.prototype.toolTemplate=a}if(this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"}),this.collapsedEl.enableDisplayMode("block"),"mini"===this.collapseMode)this.collapsedEl.addClass("x-layout-cmini-"+this.position),this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"}),this.miniCollapsedEl.addClassOnOver("x-layout-mini-over"),this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this.onExpandClick,this,{});else{if(this.collapsible!==!1&&!this.hideCollapseTool){var b=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},!0);b.addClassOnOver("x-tool-expand-"+this.position+"-over"),b.on("click",this.onExpandClick,this,{})}(this.floatable!==!1||this.titleCollapse)&&(this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this))}}return this.collapsedEl}})}(),Ext.override(Ext.Window,{constrainHeader:!0,constrainSize:!0,border:!1,resizable:!1,buttonAlign:"right",monitorResize:!1,closeAction:"hide",constrainPadding:5,global:!1,getConstrainOffsets:function(){var a,b;if(this.constrain)a={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset};else{var c=this.getSize();a={right:-(c.width-100),bottom:-(c.height-25)}}return this.constrainPadding&&(Ext.isObject(this.constrainPadding)||(this.constrainPadding=Ext.layout.ContainerLayout.prototype.parseMargins(this.constrainPadding)),b=this.constrainPadding,a.top=parseInt(a.top,10)||0,a.left=parseInt(a.left,10)||0,a.left=a.left+b.left,a.top=a.top+b.top,a.right=a.right+b.right,a.bottom=a.bottom+b.bottom),a},getConstrainSize:function(){var a,b;return a=this.ownerCt?this.ownerCt.getLayoutTarget().getViewSize():(this.container||Ext.getBody()).getViewSize(),this.constrainPadding&&(Ext.isObject(this.constrainPadding)||(this.constrainPadding=Ext.layout.ContainerLayout.prototype.parseMargins(this.constrainPadding)),b=this.constrainPadding,a.width=a.width-b.left-b.right,a.height=a.height-b.top-b.bottom),a},doConstrain:function(){if(this.constrain||this.constrainHeader){var a=this.getConstrainOffsets(),b=this.el.getConstrainToXY(this.container,!0,a);b&&this.setPosition(b[0],b[1])}},setRelatedComponent:function(a){if(a.isXType){this.relatedComponent&&this.mun(this.relatedComponent,"destroy",this.destroy,this),this.relatedComponent=a,this.mon(this.relatedComponent,"destroy",this.destroy,this)}},getRelatedComponent:function(){return this.relatedComponent?this.relatedComponent:void 0},show:Ext.Window.prototype.show.createInterceptor(function(){if(!this.rendered){var a=this.getWindowTarget();a&&a.getLayoutTarget?(a.add(this),this.render(a.getLayoutTarget()),a.doLayout()):this.render(Ext.getBody())}}),afterRender:Ext.Window.prototype.afterRender.createInterceptor(function(){(this.modal||this.constrain||this.constrainHeader||this.constrainSize)&&(this.ownerCt?this.mon(this.ownerCt,this.ownerCt.resizeEvent,this.onContainerResize,this):Ext.EventManager.onWindowResize(this.onContainerResize,this),this.onContainerResize())}),getWindowTarget:function(){if(void 0===this.lastWindowTarget){var a=null;this.global===!0||this.relatedComponent&&Ext.Container.prototype.bubble.call(this.relatedComponent,function(b){return b.getLayoutTarget&&b.rendered&&b.isWindowContainer===!0?(a=b,!1):b!==this&&b.getWindowTarget?(a=b.getWindowTarget(),!1):void 0},this),this.lastWindowTarget=a||null}return this.lastWindowTarget},beforeShow:function(){if(delete this.el.lastXY,delete this.el.lastLT,void 0===this.x||void 0===this.y){var a=this.el.getAlignToXY(Ext.getBody(),"c-c"),b=this.el.translatePoints(a[0],a[1]);this.x=void 0===this.x?b.left:this.x,this.y=void 0===this.y?b.top:this.y}this.el.setLeftTop(this.x,this.y),this.expandOnShow&&this.expand(!1),this.modal&&(this.syncMaskPosition(),this.mask.show())},onWindowResize:Ext.emptyFn,onContainerResize:function(){var a;!this.hidden&&this.maximized?this.fitContainer():this.constrainSize&&(a=this.getConstrainSize(),this.ctMaxWidth=a.width,this.ctMaxHeight=a.height,this.hasLayout&&this.refreshSize()),this.hidden||(this.modal&&this.syncMaskPosition(),this.doConstrain())},syncMaskPosition:function(){var a,b,c=this.mask,d=this.container;c.setSize(d.getSize()),d.isStyle("position","static")?(a=d.dom.offsetTop,b=d.dom.offsetLeft):a=b=0,c.setTop(a),c.setLeft(b)},onDestroy:Ext.Window.prototype.onDestroy.createInterceptor(function(){var a=this.ownerCt;(this.modal||this.constrain||this.constrainHeader||this.constrainSize)&&(this.ownerCt?this.mun(a,a.resizeEvent,this.onContainerResize,this):Ext.EventManager.removeResizeListener(this.onContainerResize,this))})}),Ext.Window.getWindowContainer=function(a){return Ext.Window.prototype.getWindowTarget.call({relatedComponent:a})},SF.override(Ext.Window.DD,{headerOffsets:[100,30],startDrag:function(){var a=this.win;this.proxy=a.ghost(),this.constrainTo(a.container,a.getConstrainOffsets())}}),SF.ActionDispatcher=SF.ActionMgr=function(){function a(a){return a?a.charAt(0).toUpperCase()+a.substr(1):a}function b(b,c,d){var e=["on",d,a(c)].join("");return SF.log(e),SF.isFunction(b[e])?b[e]:SF.emptyFn}function c(c,e,f,g,h){f=f?a(f):d;var i=f.toLowerCase();g=SF.isFunction(g)?g:!1,c.on("action",function(a,c,d){var j=b(e,a,f);if(c.namespace=i,g){var k=g.call(h||this,a,c,d,j,e);if(SF.isArray(k))return j.apply(e,k);if(k===!1)return!1}return j.call(e,c,d)},c)}var d="Action",e={bindAction:c};return e}(),SF.Button=Ext.Button,function(){var a=Ext.Button.prototype.onClick;SF.override(SF.Button,{onClick:function(b){a.apply(this,arguments),this.disabled||this.actionHandler&&this.actionHandler.call(this.actionScope||this,this,b,{button:this})},setActionHandler:function(a,b){this.actionHandler=a,this.actionScope=b}})}(),Ext.ns("SF.Portal"),SF.Portal=Ext.extend(Ext.Panel,{layout:"column",cls:"x-portal",defaultType:"portalcolumn",initComponent:function(){SF.Portal.superclass.initComponent.apply(this,arguments),this.addEvents({validatedrop:!0,beforedragover:!0,dragover:!0,beforedrop:!0,drop:!0},"afterdrop")},initEvents:function(){SF.Portal.superclass.initEvents.apply(this,arguments),this.dd=new SF.Portal.DropZone(this,this.dropConfig)},beforeDestroy:function(){this.dd&&this.dd.unreg(),SF.Portal.superclass.beforeDestroy.apply(this,arguments)}}),Ext.reg("portal",SF.Portal),SF.Portal.DropZone=Ext.extend(Ext.dd.DropTarget,{ddScrollConfig:{vthresh:50,hthresh:-1,animate:!0,increment:200},constructor:function(a,b){this.portal=a,Ext.dd.ScrollManager.register(a.body),SF.Portal.DropZone.superclass.constructor.call(this,a.bwrap.dom,b),a.body.ddScrollConfig=this.ddScrollConfig},createEvent:function(a,b,c,d,e,f){return{portal:this.portal,panel:c.panel,columnIndex:d,column:e,position:f,data:c,source:a,rawEvent:b,status:this.dropAllowed}},notifyOver:function(a,b,c){var d,e=b.getXY(),f=this.portal,g=a.proxy;this.grid||(this.grid=this.getGrid());var h=f.body.dom.clientWidth;this.lastCW?this.lastCW!=h&&(this.lastCW=h,f.doLayout(),this.grid=this.getGrid()):this.lastCW=h;var i=0,j=this.grid.columnX,k=!1;for(d=j.length;d>i;i++)if(e[0]<j[i].x+j[i].w){k=!0;break}k||i--;var l,m=!1,n=0,o=f.items.itemAt(i),p=o.items.items,q=!1;for(d=p.length;d>n;n++){l=p[n];var r=l.el.getHeight();if(0===r)q=!0;else if(l.el.getY()+r/2>e[1]){m=!0;break}}n=(m&&l?n:o.items.getCount())+(q?-1:0);var s=this.createEvent(a,b,c,i,o,n);return f.fireEvent("validatedrop",s)!==!1&&f.fireEvent("beforedragover",s)!==!1?(g.getProxy().setWidth("auto"),l?g.moveProxy(l.el.dom.parentNode,m?l.el.dom:null):g.moveProxy(o.el.dom,null),this.lastPos={c:o,col:i,p:m&&l?n:!1},this.scrollPos=f.body.getScroll(),f.fireEvent("dragover",s),s.status):s.status},notifyOut:function(){delete this.grid},notifyDrop:function(a,b,c){var d=this.portal;if(delete this.grid,!this.lastPos)return!0;var e=this.lastPos.c,f=this.lastPos.col,g=this.lastPos.p,h=this.createEvent(a,b,c,f,e,g!==!1?g:e.items.getCount());if(d.fireEvent("vilidatedrop",h)!==!1&&d.fireEvent("beforedrop",h)!==!1){a.proxy.getProxy().remove(),a.panel.el.dom.parentNode.removeChild(a.panel.el.dom),g!==!1?(e==a.panel.ownerCt&&e.items.items.indexOf(a.panel)<g-1&&g++,e.insert(g,a.panel)):e.add(a.panel),e.doLayout(),d.fireEvent("drop",h);var i=this.scrollPos.top;if(i){var j=d.body.dom;setTimeout(function(){j.scrollTop=i},100)}}return delete this.lastPos,d.fireEvent("afterdrop",d),!0},getGrid:function(){var a=this.portal.bwrap.getBox();return a.columnX=[],this.portal.items.each(function(b){a.columnX.push({x:b.el.getX(),w:b.el.getWidth()})}),a},unreg:function(){Ext.dd.ScrollManager.unregister(this.portal.body),SF.Portal.DropZone.superclass.unreg.call(this)}}),SF.Portal.PortalColumn=Ext.extend(Ext.Container,{layout:"anchor",defaultType:"portlet",cls:"x-portal-column",style:"padding: 6px 0 10px 8px"}),Ext.reg("portalcolumn",SF.Portal.PortalColumn),SF.Portal.Portlet=Ext.extend(Ext.Panel,{anchor:"100%",frame:!0,collapsible:!0,draggable:!0,cls:"x-portlet",constructor:function(a){a=a||{},a.module&&(this.module=a.module,delete a.module),a.moduleConfig&&(this.moduleConfig=a.moduleConfig,delete a.moduleConfig),SF.Portal.Portlet.superclass.constructor.apply(this,arguments)},initComponent:function(){SF.Portal.Portlet.superclass.initComponent.apply(this,arguments),this.module&&this.initModule(this.module)},onRender:function(){SF.Portal.Portlet.superclass.onRender.apply(this,arguments)},afterRender:function(){SF.Portal.Portlet.superclass.afterRender.apply(this,arguments)},initModule:function(a){var b,c=this.moduleConfig;if(SF.isString(a)){if(b=SF.core.getModule(a),!b)return SF.error(_("Portlet \u6a21\u5757\u672a\u627e\u5230.")),!1;a=new b(c)}else SF.isFunction(a)&&(b=a,a=new b(c));a.setContainer(this),a.init(),a.layout(),this.module=a},close:function(){this.destroy()},onDestroy:function(){if(this.fireEvent("beforeclose",this)!==!1&&(this.fireEvent("close",this),this.module&&this.module.destroying!==!0))try{Ext.destroy(this.module)}catch(a){SF.error("["+this.module.getXName()+"]Page destroy error!",a),SF.alert("\u9875\u9762Portlet\u5355\u5143\u51fa\u9519!")}SF.Portal.Portlet.superclass.onDestroy.apply(this,arguments)}}),Ext.reg("portlet",SF.Portal.Portlet),SF.Singleton=function(a,b){this.config=a,b===!0&&(this.destroy=this.release)},SF.Singleton.prototype={_instance:null,createInstance:function(){var a,b=null,c=SF.apply({},this.config);return SF.isFunction(this.config)?b=this.config.superclass?new this.config:this.config.call(window):SF.isFunction(c.constructClass)?(a=c.constructClass,b=new a(c)):c.xtype?b=Ext.create(c):SF.isFunction(c.createFn)?b=c.createFn.call(c.scope):SF.error("Singleton create fail!"),SF.log("Singleton create."),b},getInstance:function(){return this._instance?this._instance:(this._instance=this.createInstance(),this._instance)},canRelease:SF.emptyFn,release:function(){this._instance&&this.canRelease()!==!1&&(Ext.destroy(this._instance),SF.log("Singleton destroy."),this._instance=null)},destroy:function(){this.release(),delete this.config}},SF.SingletonGlobalWindow=SF.extend(SF.Singleton,{constructor:function(a,b,c){this.autoRelease=b!==!1,this.releaseBuffer=c||3e4,this.releaseTask=new Ext.util.DelayedTask(this.release,this),this.windowInuse=!1,SF.SingletonGlobalWindow.superclass.constructor.call(this,a,!0)},createInstance:function(){var a=SF.SingletonGlobalWindow.superclass.createInstance.apply(this,arguments);return a.on({scope:this,show:this.handleWindowShow,hide:this.handleWindowHide,destroy:this.handleWindowDestroy}),a},handleWindowShow:function(){this.releaseTask.cancel(),this.windowInuse=!0},handleWindowHide:function(){this.releaseTask.delay(this.releaseBuffer),this.windowInuse=!1},handleWindowDestroy:function(){this._instance=null,this.windowInuse=!1},canRelease:function(){return!this.windowInuse}}),SF.override(Ext.DatePicker,{width:200,onRender:Ext.DatePicker.prototype.onRender.createSequence(function(){this.el.child("table").setWidth("100%")})}),Ext.override(Ext.layout.ToolbarLayout,{canOverflow:function(a){var b=!1;return a instanceof Ext.Toolbar.Separator?b=!0:Ext.isFunction(a.isXType)&&(a.isXType("splitbutton")?b=!0:a.isXType("button")?b=!0:a.isXType("buttongroup")&&(b=!0)),b&&!a.disableTBOverflow},fitToSize:function(a){if(this.container.enableOverflow!==!1){var b=a.dom.clientWidth,c=this.lastWidth||0,d=a.dom.firstChild.offsetWidth,e=b-this.triggerWidth;if(this.lastWidth=b,d>b||this.hiddens&&b>=c){var f,g,h=this.container.items.items,i=h.length,j=0;for(f=0;i>f;f++)g=h[f],g.isFill||this.canOverflow(h[f])||(e-=this.getItemWidth(g));for(f=0;i>f;f++)g=h[f],!g.isFill&&this.canOverflow(g)&&(j+=this.getItemWidth(g),j>e?g.hidden||g.xtbHidden||this.hideItem(g):g.xtbHidden&&this.unhideItem(g))}this.hiddens?(this.initMore(),this.lastOverflow||(this.container.fireEvent("overflowchange",this.container,!0),this.lastOverflow=!0)):this.more&&(this.clearMenu(),this.more.destroy(),delete this.more,this.lastOverflow&&(this.container.fireEvent("overflowchange",this.container,!1),this.lastOverflow=!1))}},createMenuConfig:function(){var a=Ext.layout.ToolbarLayout.prototype.createMenuConfig;return function(b){var c=a.apply(this,arguments);return Ext.copyTo(c,b,["actionHandler","actionScope"]),c}}(),beforeMoreShow:function(a){var b,c,d,e=this.container.items.items,f=e.length,g=function(a,b){return a.isXType("buttongroup")&&!(b instanceof Ext.Toolbar.Separator)},h=0;this.clearMenu(),a.removeAll();for(var i=0;f>i;i++)b=e[i],b instanceof Ext.Toolbar.Separator?d=!0:b.xtbHidden&&(c&&(g(b,c)||g(c,b))&&(d=!0),d&&h>0&&a.add("-"),this.addComponentToMenu(a,b),d=!1,h+=1,c=b);a.items.length<1&&a.add(this.noItemsMenuText)}}),function(){Ext.override(Ext.ToolTip,{onDocMouseDown:function(a){var b=this;b.autoHide===!0||b.closable||a.within(b.el.dom)||(b.disable(),b.doEnable.defer(100,b))},doEnable:function(){this.isDestroyed||this.enable()}})}(),function(){String.prototype.getACLength=function(){return encodeURIComponent(this).replace(/%\w\w/g,"a").length};var a=/^\+?(\d|[1-9]\d+)(\.(\d+))?$/,b=/^\-(\d|[1-9]\d+)(\.(\d+))?$/;Ext.applyIf(String,{NumComparison:function(){var c=function(a,b){var c,d,e=a[1].length,f=a[3]&&a[3].length||0;return b[3]&&b[3].length>f&&(f=b[3].length),b[1].length>e&&(e=b[1].length),d=a[3]?String.leftPad(a[1],e,"0")+a[3]+String.leftPad("",f-a[3].length,"0"):String.leftPad(a[1],e,"0"),c=b[3]?String.leftPad(b[1],e,"0")+b[3]+String.leftPad("",f-b[3].length,"0"):String.leftPad(b[1],e,"0"),d>c?1:d==c?0:-1};return function(d,e){if(!Ext.isString(d)||!Ext.isString(e))return-2;var f=d.match(a),g=e.match(a);if(f&&g)return c(f,g);if(f=d.match(b),g=e.match(b),f&&g){var h=c(f,g);return-1===h?1:1===h?-1:0}return f=d.match(b),g=e.match(a),f&&g?-1:(f=d.match(a),g=e.match(b),f&&g?1:void 0)}}()})}(),Ext.override(Ext.Editor,{revertInvalid:!1,setValue:function(a){var b=this.field;b[b.setJsonValue?"setJsonValue":"setValue"](a)},getValue:function(){var a=this.field;return a[a.setJsonValue?"getJsonValue":"getValue"]()}}),SF.ns("SF.util"),SF.util.IntervalTask=function(a){var b=this;this.fn=SF.isFunction(a)?a:a.fn,this.scope=a.scope||this,this.intervalTime=a.interval||1e4,this.executed=!1,this.taskFn=function(){clearInterval(b.taskId),b.taskId=null,b.fn.call(b.scope),b.executed=!0},this.bRunning=!1},SF.util.IntervalTask.prototype={delayTask:function(a){this.cancelTask(),this.executed=!1,this.startTime=new Date,this.countDown=a,this.taskId=setInterval(this.taskFn,a)},cancelTask:function(){this.taskId&&(clearInterval(this.taskId),this.taskId=null)},adjustRunningTask:function(){var a;this.bRunning&&this.taskId&&(a=this.countDown-(new Date-this.startTime),a>this.intervalTime&&this.delayTask(this.intervalTime))},start:function(a,b){this.setInterval(a),this.bRunning||(this.bRunning=!0,this.delayTask(b===!0?this.intervalTime:0))},stop:function(){this.bRunning&&(this.bRunning=!1,this.cancelTask())},setInterval:function(a,b){b=b!==!1,Ext.isNumber(a)&&(this.intervalTime=a,b&&this.adjustRunningTask())},suspend:function(a){this.bRunning&&(this.bRunning=!1,this.frozed=a===!0,this.frozed&&(this.frozeTime=new Date),this.cancelTask())},resume:function(){var a=this.countDown;this.bRunning||(this.bRunning=!0,a-=this.frozed&&this.startTime<this.frozeTime?this.frozeTime-this.startTime:new Date-this.startTime,0>a&&(a=0),this.delayTask(a))},running:function(){return!!this.bRunning},finish:function(){this.bRunning&&this.delayTask(this.intervalTime)}},SF.util.IntervalTask.prototype.setIntv=SF.util.IntervalTask.prototype.setInterval,Ext.util.JSON.encodeDate=function(a){return a.format('"Y-m-d"')},Ext.ns("SF.util"),function(){var a=Ext.extend(Object,{constructor:function(a){if(this._currentIndex=-1,!Ext.isArray(a))throw"SF.util.AsyncTaskList need config with tasks!";this._taskList=a},run:function(){for(var a,b=this;a=b._nextTask();)if(a.fn.call(a.scope,b._makeStrictCallback())!==!0)return;return!0},_makeStrictCallback:function(){var a=this,b=a._currentIndex;return function(){if(b!==a._currentIndex)throw"Expired callback!";a.run()}},_nextTask:function(){var a,b=this,c=b._taskList,d=b._currentIndex,e=d+1;return a=e<c.length?c[e]:null,b._currentIndex=e,Ext.isFunction(a)&&(a={fn:a,scope:window}),a},isFinished:function(){var a=this;return a._currentIndex}});a.createInterceptorTask=function(a,b,c,d){return c=c||[],(isNaN(d)||0>d)&&(d=c.length),function(e){var f=c.slice(0);return f.splice(d,0,e),a.apply(b,f)!==!1}},SF.util.AsyncTaskChain=a}(),function(){var a=Ext.util.Format,b=/^[0-9a-f:.]{2,45}$/i,c=/^[0-9a-f]{1,4}$/i,d=/^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])(\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])){3}$/,e=function(a){var b,c,e;if(!d.test(a))return null;for(b=a.split("."),c=[],e=0;e<b.length;e++)c.push(parseInt(b[e],10));return c},f=function(d){var f;if(d=a.trim(d),!b.test(d))return null;var g=d.split("::");if(g.length>2)return null;var h,i,j,k=g.length>1;h=g[0]?g[0].split(":"):[],i=k&&g[1]?g[1].split(":"):[],j=d.indexOf(".")>=0;var l=h.length+i.length+(j?1:0);if(l>8||8===l&&k)return null;var m=h;if(k){for(f=8-l;f>0;f--)m.push("0");m=m.concat(i)}if(m.length!==(j?7:8))return null;var n,o=[],p=j?6:8;for(f=0;p>f;f++){if(n=m[f],!c.test(m[f]))return null;o.push(parseInt(n,16))}var q,r;if(j){if(q=m[6],r=e(q),!r)return null;o.push(256*r[0]+r[1]),o.push(256*r[2]+r[3])}return o},g=function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(String.leftPad(a[b].toString(16),4,"0"));return c.join(":")},h=function(a){var b,c,d,e=0,f=0,g=0,h=0;for(c=0;c<a.length;c++)d=a[c],0===d?(f++,f>h&&(g=e,h=f)):(f=0,e=c+1);var i,j,k,l;if(h>1){for(i=a.slice(0,g),j=a.slice(g+h),b=[],c=0;c<i.length;c++)b.push(i[c].toString(16));for(k=b.join(":"),b=[],c=0;c<j.length;c++)b.push(j[c].toString(16));return l=b.join(":"),k+"::"+l}for(b=[],c=0;c<a.length;c++)b.push(a[c].toString(16));return b.join(":")},i=["","K","M","G","T","P","E","Z","Y","B"],j=["Byte","bit","B","b",_("\u5b57"),_("\u4f4d"),_("\u6bd4\u7279")],k=[8,1,8,1,8,1,1],l="{0}",m=function(b,c,d,e,f,g){var h,m,n=0,o=1;if(b=Math.abs(parseFloat(b,10))||0,b=Math.ceil(b),"string"!=typeof c&&(c="bps",e=1),f=f||1024,g=g||i,"number"!=typeof e||0>=e)for(e=1,h=0;h<j.length;h++)if(m=c.indexOf(j[h]),m>=0){n=m,e=k[h];break}m=c.indexOf(l),m>=0&&(c=c.slice(0,m)+c.slice(m+l.length),n=m),b/=e,o*=e;for(var p=0;b>=f;)b/=f,o*=f,p++;var q,r={decimal:d>=0?d:2,autoReduceDecimal:!0,preventZeroTail:0===p};q=a.humanizeNumber(b,r),b=parseFloat(q,10),b>=f&&(b/=f,o*=f,p++,r.preventZeroTail=0===p,q=a.humanizeNumber(b,r));var s=g[p];return[q,c.slice(0,n),s,c.slice(n)].join("")};Ext.apply(a,{parseIPv4:e,parseIPv6:function(a,b){var c=f(a);if(!c)return null;switch(b){case"full":return g(c);case"simple":return h(c);default:return c}},simpleFormatIPv6:h,fullFormatIPv6:g,parseContentWithNotes:function(a){return this.parseContent(a,!0)},parseContent:function(b,c){var d,e,f,g,h=[];if(b&&b.split)for(d=b.split(/[\r\n]+/),e=0;e<d.length;e++)f=d[e],g=c?f.split("#")[0]:f,g=a.trim(g),g&&h.push(g);return h},dataSize:m,bandWidth:m,ellipsisArray:function(a,b,c){return a.length>b&&(a=a.slice(0,b-1),a.push("...")),a.join(c)},humanizeNumber:function(a,b){if(isNaN(a))return"";var c,d,e,f,g;b&&(c=b.decimal,d=b.autoReduceDecimal,e=b.carryType,f=b.preventZeroTail,g=b.autoIncreaseDecimal);var h,i,j,k=a.toExponential(),l=k.match(/^(-)?([0-9.]+)e([+\-]?[0-9]+)$/i);h=l[1]?!1:!0,i=l[2].replace(".",""),SF.debugMode&&(/^[0-9](\.|$)/.test(l[2])||SF.error("Number.prototype.toExponential do not match the ECMA-262!")),j=parseInt(l[3],10)-i.length+1;var m,n,o,p,q,r,s=0;if(c>=0&&21>c){switch(e=e||"round",e=e.toLowerCase()){case"floor":break;case"ceil":break;default:e="round"}for(;;){if(m=c,(d||g)&&(n=i.length+j,o=Math.max(n,0),p=Math.max(-n,0),o>0&&d&&(m=Math.max(c-o+1,0)),0>=o&&g&&(m=Math.max(c+p,c))),q=-m-j,j=-m,0>q)i+=new Array(1-q).join("0");else if(q>0&&(r=Math.pow(10,q),i=Math[e](parseInt(i,10)/r).toString(),"0"!==i&&i.length!==o-p+m)){SF.debugMode&&s>=1&&SF.error("decimal convertion fail! unexpect error!"),s++;continue}break}}var t,u,v=h?"":"-";return j>=0?t=i+new Array(j+1).join("0"):j+i.length>0?(t=i.slice(0,j+i.length),u=i.slice(j+i.length)):(t="0",u=new Array(-j-i.length+1).join("0")+i),f&&u&&(u=u.replace(/\.?0+$/,"")),v+t+(u?"."+u:"")}})}(),Ext.apply(Ext.data.Api,{prepare:function(a){a.api||(a.api={});for(var b in this.actions)if(this.actions.hasOwnProperty(b)){var c=this.actions[b];a.api[c]=a.api[c]||a.url||a.directFn,"string"==typeof a.api[c]&&(a.api[c]={url:a.api[c],params:a.api.params||a.baseParams||{},method:"POST"})}}}),Ext.override(Ext.data.HttpProxy,{doRequest:function(a,b,c,d,e,f,g){var h={timeout:624e5,method:this.api[a]?this.api[a].method:this.conn.method,request:{callback:e,scope:f,arg:g},reader:d,callback:this.createCallback(a,b),scope:this};h.jsonData=c||{},Ext.apply(h.jsonData,this.api[a].params),null===this.conn.url?this.conn.url=this.buildUrl(a,b):this.restful===!0&&b instanceof Ext.data.Record&&!b.phantom&&(this.conn.url+="/"+b.id),this.useAjax?(Ext.applyIf(h,this.conn),this.activeRequest[a]=Ext.Ajax.request(h)):this.conn.request(h),this.conn.url=null}}),function(){var a=Ext.data.Store.prototype.execute;Ext.data.Store=SF.intercepterConstructor(Ext.data.Store,function(){this.addEvents("load","datachanged"),this.on("load",function(){this.loaded=!0},this,{single:!0}),this.on("datachanged",function(){this.datachanged=!0},this,{single:!0})}),Ext.override(Ext.data.Store,{defaultParamNames:{filter:"filter",start:"start",limit:"limit",sort:"sort",dir:"dir"},execute:function(b,c,d){var e=this.paramNames;return this.filterGrid&&"read"===b&&(d.params=d.params||{},d.params[e.filter]=this.filterGrid),a.apply(this,arguments)},load:function(a){a=a||{},this.storeOptions(a);var b=this.paramNames;this.sortInfo&&this.remoteSort&&(a.params=a.params||{},a.params[b.sort]=this.sortInfo.field,a.params[b.dir]=this.sortInfo.direction),Ext.isObject(a[b.filter])&&(a.params=a.params||{},a.params[b.filter]=a[b.filter],delete a[b.filter]);try{return this.execute("read",null,a)}catch(c){return this.handleException(c),!1}}}),Ext.data.DataProxy=SF.intercepterConstructor(Ext.data.DataProxy,function(a){a=a||{},this.baseParams=a.baseParams||a.params}),Ext.data.JsonStore=SF.changeConstructor(Ext.data.JsonStore,function(a){a=a?a:{},this.defaults&&(a.url&&(this.defaults.url=a.url),a.baseParams&&(this.defaults.baseParams=a.baseParams),Ext.apply(a,this.defaults));var b=Ext.apply({store:this},a);a.reader=new Ext.data.JsonReader(b),Ext.data.JsonStore.superclass.constructor.call(this,a)});var b=Ext.data.JsonReader.prototype.readRecords;Ext.override(Ext.data.JsonReader,{read:function(a){var b=a.getJsonData();if(!b)throw{message:"JsonReader.read: Json object not found"};return this.readRecords(b)},readResponse:function(a,b){var c=b.getJsonData();if(!c)throw new Ext.data.JsonReader.Error("response");var d=this.getRoot(c);if(a===Ext.data.Api.actions.create){var e=Ext.isDefined(d);if(e&&Ext.isEmpty(d))throw new Ext.data.JsonReader.Error("root-empty",this.meta.root);if(!e)throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}var f=new Ext.data.Response({action:a,success:this.getSuccess(c),data:d?this.extractData(d,!1):[],message:this.getMessage(c),raw:c});if(Ext.isEmpty(f.success))throw new Ext.data.JsonReader.Error("successProperty-response",this.meta.successProperty);return f},readRecords:function(a){var c=b.apply(this,arguments);return this.meta.store&&this.meta.store.fireEvent("dataready",a),c}})}(),Ext.override(Ext.data.Store,{addField:function(a){a=new Ext.data.Field(a),this.recordType.prototype.fields.replace(a),"undefined"!=typeof a.defaultValue&&this.each(function(b){"undefined"==typeof b.data[a.name]&&(b.data[a.name]=a.defaultValue)}),this._refreshReaderExtractor()},removeField:function(a){this.recordType.prototype.fields.removeKey(a),this.each(function(b){delete b.data[a],b.modified&&delete b.modified[a]}),this._refreshReaderExtractor()},_refreshReaderExtractor:function(){delete this.reader.ef,this.reader.buildExtractors()}}),function(){var a={1:"00",2:"0",3:""};Ext.apply(Ext.data.SortTypes,{asIPv4:function(b){var c,d,e,f;if(b&&b.split){for(c=b.split("."),e="",f=0;f<c.length;f++)d=c[f],e+=a[d.length]+d;return e}}})}(),Ext.ns("SF.form"),Ext.apply(SF.form,function(){function a(a){return a&&!!a.setJsonValue&&!!a.getJsonValue&&!!a.markInvalid&&!!a.clearInvalid}function b(b){return b?SF.isDefined(b.isFieldContainer)?!!b.isFieldContainer:b.fieldSection&&b.fieldSection.name&&b.fieldSection.addContainer?!1:!a(b):!1}function c(a){var b=!1;return a&&a.getRootForm&&a.formRoot&&a.getForm&&(b=!0),b}function d(a){return a&&a.getInvalidMsgs&&a.getFieldSection&&a.load&&a.submit}function e(a,c){function d(c){return c===a?(e=!0,!1):b(c)?!0:(e=!0,!1)}var e=!1;return a&&c?c===a?!0:c.ownerCt?(c.ownerCt.bubble(d,a),e?e:!1):!1:!1}function f(b,c,d){var f=!1;if(d=d===!0,!b||!c)return!1;if((d||!c.ignoreField)&&a(c)){if(!SF.isEmpty(c.getName()))return e(b,c);SF.warn(String.format("\u8868\u5355\u9879[id:{0} xtype:{1}]\u7684name\u4e3a\u7a7a,\u8df3\u8fc7",c.getId?c.getId():"",c.getXType?c.getXType():""))}return f}function g(a,c,d){return f(c,d)&&a.push(d),b(d)}function h(c,d){d=d||{};var g=d.container||c;if(!e(g,c))return[];var h=d.ignoreSelf===!0,i=d.applyFormStyle===!0,j=d.disableIgnore===!0,k=SF.isFunction(d.filter)?d.filter:!1,l=[],m=function(c){if(g===c&&h)return!0;if(f(g,c,j))l.push(c);else{if(SF.isObject(c.fieldSection)&&a(c.fieldSection)&&c.fieldSection.name&&SF.isString(c.fieldSection.name))return l.push(c.fieldSection),!1;if(c.fieldSection&&c.isXType&&c.cascade&&(SF.isString(c.fieldSection)||SF.isBoolean(c.fieldSection)&&c.name&&SF.isString(c.name))){var d;return SF.isFunction(c.createFieldSection)?d=c.createFieldSection():(d=new SF.form.FieldSection({name:c.name||c.fieldSection,fieldTitle:c.fieldTitle||c.fieldLabel||c.title||void 0}),d.addContainer(c,{sync:!0,ignoreSelf:!0})),c.fieldSection=d,l.push(d),!1}}return b(c)};c.cascade?c.cascade(m):!h&&f(g,c,j)&&l.push(c);var n,o,p,q=[];for(n=0,o=l.length;o>n;n++)p=l[n],i&&p.ownerCt&&Ext.applyIf(p,{labelAlign:p.ownerCt.labelAlign,labelWidth:p.ownerCt.labelWidth,itemCls:p.ownerCt.itemCls}),k&&k(p)!==!1&&q.push(p);return k?q:l}function i(a,b,c,d){SF.error(String.format("{3} \u8868\u5355\u9879[id:{0} xtype:{1}]\u7684name[{2}]\u91cd\u590d.",d.getId?d.getId():"",d.getXType?d.getXType():"",b,a))}var j={isJsonField:a,isJsonForm:d,isFieldContainer:b,isTransparentContainer:e,isAvailableField:f,isFormComponent:c,fieldIter:g,monitorRepeat:function(a,b){b=b||"",a.on("replace",i.createDelegate(this,[b],0))},fetchFields:h,getFieldName:function(a){return a.getName?a.getName():a.name||""}};return j}()),SF.ns("SF.form"),SF.form.FieldTipMgr=function(){function a(a){return SF.isString(a)&&b.test(a)}var b=/<br\s*\/?\s*>/im,c=(Ext.util.Format,{getTipAutoEl:function(b,c){var d;switch(c){case"icon":case"text":break;default:c=a(b)?"icon":"text"}return d="icon"===c?{tag:"div","ext:qtip":Ext.util.Format.htmlEncode(b),html:"&#160;&#160;",cls:"x-field-tip x-field-tipico"}:{tag:"div",html:b,cls:"x-field-tip"}}});return c}(),Ext.ns("SF.form"),function(){var a=function(){return!0};SF.form.JsonField=function(a){SF.apply(this,a)},SF.form.JsonField.prototype={isFormField:!0,getJsonValue:function(){return this.value},setJsonValue:function(a){(null===a||void 0===a)&&(a=this.getDefaultValue()),this.value=a},isDisabled:function(){return this.disabled===!0},setDisabled:function(a){this[a?"disable":"enable"]()},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},setHidden:function(a){this[a?"hide":"show"]()},hide:function(){this.hidden=!0,this instanceof Ext.util.Observable&&this.fireEvent("magic")},show:function(){this.hidden=!1,this instanceof Ext.util.Observable&&this.fireEvent("magic")},getName:function(){return this.name||""},getFieldTitle:function(){var a=this.fieldTitle||this.fieldLabel||this.boxLabel||this.title||this.name;return Ext.isString(a)&&(a=a.trim()),a},isDirty:function(){return this.getOriginalValue()!==this.getJsonValue()},getOriginalValue:function(){return null===this.originalValue||void 0===this.originalValue?this.getJsonValue():this.originalValue},setOriginalValue:function(a){this.originalValue=null===a||void 0===a?this.getJsonValue():a},reset:function(){this.setJsonValue(this.getOriginalValue()),this.clearInvalid()},getDefaultValue:function(){var a=this.defaultValue;return null===a||void 0===a?null:a},setDefaultValue:function(a){this.defaultValue=a},isReadOnly:function(){return this.readOnly===!0},setReadOnly:function(a){this.readOnly=!!a},isValid:a,validate:function(){return this.clearInvalid(),!0},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget||"intel"]},markInvalid:function(a){var b;this.currentInvalid=a,this.rendered&&this.el&&this.el.dom&&(b=this.getMessageHandler(),b&&b.mark(this,a))},getInvalid:function(){return this.currentInvalid},clearInvalid:function(){var a;this.currentInvalid=null,this.rendered&&this.el&&this.el.dom&&(a=this.getMessageHandler(),a&&a.clear(this))}},Ext.form.MessageTargets.intel={invalidClass:"x-form-invalid",invalidQtipClass:"x-form-invalid-tip",setQuickTip:function(a,b){a&&(a.qtip=b,a.qclass=this.invalidQtipClass)},clearQuickTip:function(a){a&&(a.qtip="")},mark:function(a,b){var c,d,e;a.getItemCt&&(c=a.getItemCt(),c.dom&&(c.addClass(this.invalidClass),this.setQuickTip(c.dom,b)),d=a.label,this.setQuickTip(d.dom,b),e=c.child("div.x-form-element"),this.setQuickTip(e.dom,b))},clear:function(a){var b,c,d;a.getItemCt&&(b=a.getItemCt(),b.dom&&(b.removeClass(this.invalidClass),this.clearQuickTip(b.dom)),c=a.label,this.clearQuickTip(c.dom),d=b.child("div.x-form-element"),this.clearQuickTip(d.dom))}}}(),SF.ns("SF.form"),SF.form.FieldSection=SF.extend(SF.form.JsonField,{applyFormStyle:!1,constructor:function(a){a=a||{},this.name=a.name||"",this.fieldTitle=a.fieldTitle||"",this.initFields()},initFields:function(){this.fields||(this.fields=new Ext.util.MixedCollection(!1,SF.form.getFieldName),SF.form.monitorRepeat(this.fields,this.name))},handeFieldDestroy:function(a){this.fields.remove(a)},getCount:function(){return this.fields.getCount()},addField:function(a){if(Ext.isArray(a))for(var b=0;b<a.length;b++)arguments.callee.call(this,a[b]);else if(SF.form.isJsonField(a))return a.getName()===SF.form.FieldSection._TRANSPARENT_NAME&&a.eachField?(a.eachField(function(a){this.addField(a)
},this),!0):(this.trackFieldDestroy&&!this.fields.contains(a)&&SF.isFunction(a.on)&&a.on("destroy",this.handeFieldDestroy,this),this.fields.add(a))},selectField:function(a,b,c){var d,e,f=a.split("."),g=this;if(b=Ext.isFunction(b)?b:!1,b&&!(g instanceof SF.form.FieldSection)&&g.findField&&!1===b.call(c||g,g,g.getName?g.getName():""))return null;for(d=0,e=f.length;g&&e>d;d++){if(!g.findField){g=null;break}if(g=g.findField(f[d]),g&&b&&!1===b.call(c||g,g,f[d]))break}return g},findField:function(a){return this.fields.item(a)},eachField:function(a,b,c){var d,e,f;if(SF.isArray(c)){for(f={},d=0,e=c.length;e>d;d++)f[c[d]]=!0;c=f}return this.fields.each(SF.isObject(c)?function(d,e,f){var g,h=d.getName();return c.hasOwnProperty(h)?(g=c[h],SF.isObject(g)?a.apply(b||this,[d,e,f,h,g]):a.apply(b||this,[d,e,f,h,void 0])):void 0}:function(d,e,f){var g=d.getName();a.apply(b||this,[d,e,f,g,c])})},removeField:function(a){return SF.isString(a)&&(a=this.fields.key(a)),SF.form.isJsonField(a)?a.getName()===SF.form.FieldSection._TRANSPARENT_NAME&&a.eachField?(a.eachField(function(a){this.removeField(a)},this),!0):(this.trackFieldDestroy&&this.fields.contains(a)&&SF.isFunction(a.un)&&a.un("destroy",this.handeFieldDestroy,this),this.fields.remove(a)):!1},removeAllFields:function(){this.fields.clear()},addContainer:function(a,b){b=b||{};var c,d=this.createAddHandler(a),e=this.createRemoveHandler(a),f=b.sync!==!1,g=b.ignoreSelf===!0;a===this&&(g=!0),c=SF.form.fetchFields(a,{ignoreSelf:g,applyFormStyle:SF.isDefined(b.applyFormStyle)?b.applyFormStyle:this.applyFormStyle,disableIgnore:b.disableIgnore}),this.addField(c),f&&c.indexOf(a)<0&&(a.on("add",d),a.on("remove",e))},createAddHandler:function(a){var b=this;return function(c,d){var e,f;if((!c.ownerCt||c.ownerCt.items.contains(c))&&(c===a||SF.form.isFieldContainer(c)&&SF.form.isTransparentContainer(a,c)))for(f=SF.form.fetchFields(d,{applyFormStyle:b.applyFormStyle,container:a}),e=0;e<f.length;e++)b.addField(f[e])}},createRemoveHandler:function(a){var b=this;return function(c,d){var e,f;if(c===a||SF.form.isFieldContainer(c)&&SF.form.isTransparentContainer(a,c))for(e=SF.form.fetchFields(d),f=0;f<e.length;f++)b.removeField(e[f])}},getJsonValue:function(a){var b={};return SF.isObject(a)||(a=!1),this.eachField(function(a,c,d,e,f){b[e]=a.getJsonValue(f)},void 0,a),b},setJsonValue:function(a,b){(null===a||"undefined"==typeof a||SF.isEmptyObject(a))&&(a=this.getDefaultValue());var c=null;this.eachField(function(b,d,e,f,g){b.setJsonValue(a&&SF.isDefined(a[f])?a[f]:c,g)},void 0,b)},translate:function(a){var b,c,d,e={};if(!SF.isObject(a))return a;for(b in a)a.hasOwnProperty(b)&&(c=this.findField(b),c&&(d=a[b],d=SF.isFunction(c.translate)?c.translate(d):d,e[c.getFieldTitle()]=d));return e},markInvalid:function(a){if(SF.isObject(a)){var b,c;for(b in a)a.hasOwnProperty(b)&&(c=this.findField(b),c&&c.markInvalid&&c.markInvalid(a[b]))}},getInvalid:function(a){var b={},c=!0;return this.eachField(function(a,d,e,f,g){var h;a.getInvalid&&(h=a.getInvalid(g),h&&(b[f]=h,c=!1))},void 0,a),c?null:b},clearInvalid:function(a){this.eachField(function(a,b,c,d,e){a.clearInvalid&&a.clearInvalid(e)},void 0,a)},getOriginalValue:function(a){var b={};return this.eachField(function(a,c,d,e,f){b[e]=a.getOriginalValue(f)},void 0,a),b},setOriginalValue:function(a,b){var c=null;this.eachField(function(b,d,e,f,g){b.setOriginalValue(a&&SF.isDefined(a[f])?a[f]:c,g)},void 0,b)},reset:function(a){this.eachField(function(a,b,c,d,e){a.reset(e)},void 0,a)},setReadOnly:function(a,b){this.eachField(function(b,c,d,e,f){b.setReadOnly(a,f)},void 0,b)},setDisabled:function(a,b){this.eachField(function(b,c,d,e,f){b.setDisabled(a,f)},void 0,b)},setHidden:function(a,b){this.eachField(function(b,c,d,e,f){b.setHidden(a,f)},void 0,b)},isDirty:function(a){var b=!1;return this.eachField(function(a,c,d,e,f){return a.isDirty&&a.isDirty(f)?(b=!0,!1):void 0},void 0,a),b},isValid:function(a){if(this.isDisabled())return!0;var b=!0;return this.eachField(function(a,c,d,e,f){return a.isValid&&a.isValid(f)?void 0:(b=!1,!1)},void 0,a),b},validate:function(a){if(this.isDisabled())return this.clearInvalid(),!0;var b=!0;return this.eachField(function(a,c,d,e,f){return a.validate&&a.validate(f)?void 0:(b=!1,!1)},void 0,a),b},destroy:function(){this.eachField(function(a){Ext.destroy(a)})}}),SF.form.FieldSection._TRANSPARENT_NAME="_TRANSPARENT_",function(){function a(a){return function(){return this.root?this.root[a].apply(this.root,arguments):void 0}}SF.ns("SF.form");var b=new Ext.XTemplate("{[this.renderSem(values.path)]}{value}",{renderSem:function(a){return a&&a.length>0?a.join(_("->"))+_("\uff1a"):""}});SF.form.JsonForm=SF.extend(Ext.util.Observable,{root:null,waitMsgTarget:null,constructor:function(a){SF.form.JsonForm.superclass.constructor.call(this),a&&(SF.form.isJsonField(a)&&a.eachField?this.root=a:a.isXType&&a.cascade&&(this.root=new SF.form.FieldSection,this.root.addContainer(a))),this.root=this.root||new SF.form.FieldSection,this.addEvents("beforeaction","actionfailed","actioncomplete")},getFieldSection:function(){return this.root},getInvalidMsgs:function(a){var b=this.translate(this.getInvalid());return this.formatInvalid(b,a)},formatInvalid:function(a,c){var d,e,f,g=[],h=this.expandObj(a);if(c===!1)return h;for(c&&c.applyTemplate||(c=b),d=0,e=h.length;e>d;d++)f=h[d],f.path=f.path.reverse(),g.push(c.applyTemplate(h[d]));return g},expandObj:function(a,b){var c,d,e,f,g,h,i=[];b>20&&SF.error("\u5c42\u6b21\u8fc7\u591a\uff0c\u53ef\u80fd\u5b58\u5728\u5faa\u73af\u5f15\u7528\uff0c\u4e2d\u6b62\u3002");for(d in a)if(a.hasOwnProperty(d))if(h="_IGNORE_"===d,c=a[d],SF.isObject(c)){if(g=arguments.callee.call(this,c,b+1),SF.isArray(g)){for(e=0,f=g.length;!h&&f>e;e++)g[e].path.push(d);i=i.concat(g)}}else SF.isString(c)&&i.push({path:h?[]:[d],value:c});return i},loadRecord:function(a){return this.root.setJsonValue(a.data),this},updateRecord:function(a){a.beginEdit();var b=a.fields;return b.each(function(b){var c=this.root.findField(b.name);c&&a.set(b.name,c.getJsonValue())},this),a.endEdit(),this},doAction:function(a,b){return Ext.isString(a)&&(a=new Ext.form.Action.ACTION_TYPES[a](this,b)),this.fireEvent("beforeaction",this,a)!==!1&&(this.beforeAction(a),a.deferHandle=function(){a.deferHandle=null,a.run()}.defer(100,a)),this},getAvailableMsgTarget:function(a,b){return a&&a.mask&&a.unmask?a:a&&a.getEl?a.getEl():Ext.fly(a)?Ext.get(a):b?null:arguments.callee(this.waitMsgTarget,!0)},beforeAction:function(a){var b,c=a.options;c.waitMsg&&(SF.isBoolean(c.waitMsg)&&(c.waitMsg=_("jsonsubmit"===a.type?"\u6b63\u5728\u8bf7\u6c42\u6570\u636e,\u8bf7\u7a0d\u5019...":"\u6b63\u5728\u52a0\u8f7d\u6570\u636e,\u8bf7\u7a0d\u5019...")),b=this.getAvailableMsgTarget(c.waitMsgTarget),this.lastMaskTarget=b,b?b.mask(c.waitMsg,"x-mask-loading"):Ext.MessageBox.wait(c.waitMsg,c.waitTitle||this.waitTitle||_("\u8bf7\u7a0d\u5019"))),this.actions||(this.actions=[]),this.actions.push(a)},afterAction:function(a,b){if(!this.isDestroyed){this.activeAction=null;var c=a.options;c.waitMsg&&(this.lastMaskTarget?(this.lastMaskTarget.unmask(),delete this.lastMaskTarget):(Ext.MessageBox.updateProgress(1),Ext.MessageBox.hide())),b?(Ext.callback(c.success,c.scope,[a.result,this,a.options,a]),this.fireEvent("actioncomplete",this,a)):(Ext.callback(c.failure,c.scope,[a.result,this,a.options,a]),this.fireEvent("actionfailed",this,a)),Ext.callback(c.callback,c.scope,[a.result,this,a.options,a,b]),this.actions&&this.actions.remove(a)}},cancelAction:function(a){var b,c;if(this.actions)if(SF.isDefined(a))this.actions.remove(a),a.cancel&&(a.cancel(),a.deferHandle&&(window.clearTimeout(a.deferHandle),a.deferHandle=null));else{for(b=0,c=this.actions.length;c>b;b++)a=this.actions[b],a.cancel(),a.deferHandle&&(window.clearTimeout(a.deferHandle),a.deferHandle=null);this.actions=[]}},load:function(a){return this.doAction("jsonload",a),this},submit:function(a){return this.doAction("jsonsubmit",a),this},destroy:function(){this.isDestroyed||(this.purgeListeners(),this.cancelAction(),this.removeAllFields(),this.isDestroyed=!0)}});var c,d=SF.form.JsonForm.prototype,e=SF.form.FieldSection.prototype;for(c in e)!d[c]&&SF.isFunction(e[c])&&(d[c]=a(c));d.add=d.addField,d.remove=d.removeField,d.isValid=d.validate;var f=new SF.form.JsonForm;SF.form.JsonForm.fly=function(a){return SF.form.isJsonField(a)&&a.eachField?(f.root=a,f):null}}(),Ext.ns("SF.form"),SF.form.Action=Ext.form.Action,SF.form.Action.GeneralAction=SF.extend(SF.form.Action,{getUrl:function(){var a=this.options.url||this.form.url;return a},processResponse:function(a){return this.response=a,this.result=a.responseText?this.handleResponse(a):null,this.afterRequest(),this.result},beforeRequest:function(a){SF.isFunction(this.options.beforeRequest)&&this.options.beforeRequest.apply(this.options.scope||this,[a,this.form,this.options,this])},afterRequest:function(){SF.isFunction(this.options.afterRequest)&&this.options.afterRequest.apply(this.options.scope||this,[this.result,this.form,this.options,this])},handleResponse:function(a){return a.getJsonData()},failure:function(a){this.response=a,this.failureType=Ext.form.Action.CONNECT_FAILURE,this.form.afterAction(this,!1)},createCallback:function(a){return a=a||{},{success:this.success,failure:this.failure,scope:this,timeout:a.timeout,upload:this.form.fileUpload?this.success:void 0}},cancel:function(){}}),SF.form.Action.JsonSubmit=SF.extend(SF.form.Action.GeneralAction,{type:"jsonsubmit",run:function(){var a=this.options,b=this.form.getJsonValue(),c={};a.params&&Ext.isObject(a.params)&&(c=Ext.apply({},a.params)),c.data=b,b=c,this.beforeRequest(b),a.clientValidation===!1||this.form.isValid()?this.requestId=Ext.Ajax.request(Ext.apply(this.createCallback(a),{jsonData:b,url:this.getUrl(!1),method:"POST",headers:a.headers})):a.clientValidation!==!1&&(this.failureType=Ext.form.Action.CLIENT_INVALID,this.form.afterAction(this,!1))},success:function(a){var b,c,d,e,f=this.processResponse(a);if(null===f)return void this.form.afterAction(this,!1);if(b=f.success,SF.isObject(f.inputError)){if(f.inputError.data){c=!1,d=0;for(e in f.inputError)f.inputError.hasOwnProperty(e)&&d++;1===d&&(f.inputError=f.inputError.data)}this.form.markInvalid(f.inputError),b=!1}b?this.form.afterAction(this,!0):(this.failureType=Ext.form.Action.SERVER_INVALID,this.form.afterAction(this,!1))},cancel:function(){SF.form.Action.JsonSubmit.superclass.cancel.apply(this,arguments),this.requestId&&(Ext.Ajax.abort(this.requestId),this.requestId=null)}}),SF.form.Action.JsonLoad=SF.extend(SF.form.Action.GeneralAction,{type:"jsonload",run:function(){var a=this.options,b=a.params||this.form.baseParams||{};this.beforeRequest(b),this.requestId=Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:"POST",url:this.getUrl(!1),jsonData:b}))},success:function(a){var b=this.processResponse(a);return null===b?void this.form.afterAction(this,!1):void(b.success?(this.form.clearInvalid(),b.data?(this.form.setJsonValue(b.data),this.form.setOriginalValue(),this.form.afterAction(this,!0)):(this.failureType=Ext.form.Action.LOAD_FAILURE,this.form.afterAction(this,!1))):(this.failureType=Ext.form.Action.SERVER_INVALID,this.form.afterAction(this,!1)))},cancel:function(){SF.form.Action.JsonLoad.superclass.cancel.apply(this,arguments),this.requestId&&(Ext.Ajax.abort(this.requestId),this.requestId=null)}}),Ext.form.Action.ACTION_TYPES.jsonsubmit=SF.form.Action.JsonSubmit,Ext.form.Action.ACTION_TYPES.jsonload=SF.form.Action.JsonLoad,SF.ns("SF.form"),SF.form.BaseForm={layout:"form",labelAlign:"right",initFormCfg:function(a){a&&a&&a.form&&(a.layout||("undefined"==typeof a.autoFit&&(a.autoFit=!0),"undefined"==typeof this.autoHeight&&"undefined"==typeof a.autoHeight&&(a.autoHeight=!0),a.layout="anchor",a.form.anchor=a.form.anchor||"100%"),SF.apply(a,{formRoot:0,items:[a.form]}),delete a.form)},initForm:function(){SF.isDefined(this.formRoot)&&(this.formRoot.isXType||(this.formRoot=this.getComponent(this.formRoot))),this.formRoot=this.formRoot||this,this.formRoot!==this&&SF.form.isFormComponent(this.formRoot)||(SF.isString(this.name)?this.fieldSection=this.fieldSection||!0:SF.isString(this.fieldSection)&&(this.name=this.fieldSection,this.fieldSection=!0),this.on("render",function(){this.getLayoutTarget().addClass("x-formct")},this,{single:!0})),this.formRoot!==this&&this.getLayoutTarget&&this.formRoot.isXType("fieldset",!0)&&"page"===this.formRoot.displayMode&&this.on("render",function(){this.getLayoutTarget().addClass("x-formct-fit")},this,{single:!0})},createFieldSection:function(){var a,b=null;return this.formRoot!==this&&SF.isFunction(this.formRoot.getFieldSection)?b=this.formRoot.getFieldSection():SF.isFunction(this.formRoot.eachField)&&SF.isFunction(this.formRoot.removeAllFields)?b=this.formRoot:(a=this.formRoot,b=new SF.form.FieldSection({name:a.name||a.fieldSection,fieldTitle:a.fieldTitle||a.fieldLabel||a.title||void 0}),b.addContainer(a,{ignoreSelf:!0})),b},getFieldSection:function(){return this.fieldSection&&SF.form.isJsonField(this.fieldSection)||(this.fieldSection=this.createFieldSection()),this.fieldSection},createForm:function(){return new SF.form.JsonForm(this.getFieldSection())},destroyForm:function(){this.form&&(this.form.destroy(),delete this.form)},getJsonForm:function(){return this.form&&SF.form.isJsonForm(this.form)||(this.form=this.createForm(),this.form.waitMsgTarget=this),this.form},edit:function(a){var b=this,c=function(){var c=b.getJsonForm(),d=a||{};return b.openConfig=d,d.value=SF.isDefined(d.value)?d.value:null,c.setJsonValue(d.value),c.setOriginalValue(),b.afterEdit(),!0};this.beforeEdit(a,c)!==!1&&c()},beforeEdit:function(a,b){var c=this,d=SF.util.AsyncTaskChain,e=this._getExtenalFormTask("beforeFormEdit",[a]);e.push(function(){return c.setFormStatus(!0),!0});var f=!0;e.push(function(){return f||Ext.isFunction(b)&&b(),!0});var g=new d(e),h=g.run();return f=!1,h===!0},afterEdit:function(){var a=this.openConfig;this._eachWrapForm(function(b){b.afterFormEdit(a)}),this.setFormStatus(),this.initFocus(),this.editing=!0},initFocus:function(){var a=this.getFocusField();a&&a.focus&&a.focus()},uninitFocus:Ext.emptyFn,getFocusField:function(){var a,b,c,d=this.openConfig;try{if(a=d.focusField||this.focusField||this.getRootForm().focusField)return b=this.getJsonForm(),c=b.selectField(a,function(){return this.isDisabled()||this.isReadOnly()?!1:this instanceof SF.form.FieldSet?this.getChecked():!0})}catch(e){SF.error(e)}return null},onFormSave:function(a){var b=this,c=function(){return b.afterSave(a),!0};return this.beforeSave(a,c)!==!1?(c(),!0):!1},onFormCancel:function(a){var b=this,c=function(){return b.afterCancel(),!0};return this.beforeCancel(a,c)!==!1?(c(),!0):!1},_formValidateInterceptor:function(){var a,b=this.getFieldSection();return b.validate()?!0:(a=[],a=a.concat(b.getInvalidMsgs?b.getInvalidMsgs():SF.form.JsonForm.fly(b).getInvalidMsgs()),SF.showErr(a,_("\u8868\u5355\u5b58\u5728\u9519\u8bef")),!1)},beforeSave:function(a,b){var c=this,d=SF.util.AsyncTaskChain,e=SF.wrap(this.openConfig);arguments.length<=1&&Ext.isFunction(a)&&(b=a,a={}),e.userAct=a;var f=[{fn:c._formValidateInterceptor,scope:c}];f=f.concat(this._getExtenalFormTask("beforeFormSave",[e])),SF.isFunction(e.confirm)&&f.push({fn:d.createInterceptorTask(e.confirm,e.scope||c,[c.getJsonForm(),e,c])});var g=!0;f.push(function(){return g||Ext.isFunction(b)&&b(),!0});var h=new d(f),i=h.run();return g=!1,i===!0},afterSave:function(a){var b=SF.wrap(this.openConfig);b.userAct=a,this._eachWrapForm(function(c){c.afterFormSave(b,a)}),this.uninitFocus(),this.editing=!1},beforeCancel:function(a,b){var c=this,d=SF.util.AsyncTaskChain,e=SF.wrap(this.openConfig);arguments.length<=1&&Ext.isFunction(a)&&(b=a,a={}),e.userAct=a;var f=this._getExtenalFormTask("beforeFormCancel",[e]);SF.isFunction(e.cancel)&&f.push({fn:d.createInterceptorTask(e.cancel,e.scope||c,[c.getJsonForm(),e,c])});var g=!0;f.push(function(){return g||Ext.isFunction(b)&&b(),!0});var h=new d(f),i=h.run();return g=!1,i===!0},afterCancel:function(a){var b=SF.wrap(this.openConfig);b.userAct=a,this._eachWrapForm(function(c){c.afterFormCancel(b,a)}),this.uninitFocus(),this.editing=!1},setFormStatus:function(a){a=a===!0;var b,c=this.openConfig||{},d=this.getFieldSection();c.disables&&d.setDisabled(!a,c.disables),c.readonlys&&d.setReadOnly(!a,c.readonlys),c.hiddens&&(d.setHidden(!a,c.hiddens),b=this.getRootForm(),b.fireEvent&&b.fireEvent("magic")),a||d.clearInvalid(),c.invalids&&(a||d.markInvalid(c.invalids))},regRelatedWindow:function(a){a.setRelatedComponent(this)},getRootForm:function(){for(var a=this;a.formRoot!==a&&SF.form.isFormComponent(a.formRoot);)a=a.formRoot;return a},getInnerForm:function(){var a=this;return a.formRoot!==a&&SF.form.isFormComponent(a.formRoot)?a.formRoot:null},beforeFormEdit:Ext.emptyFn,afterFormEdit:Ext.emptyFn,beforeFormSave:Ext.emptyFn,afterFormSave:Ext.emptyFn,beforeFormCancel:Ext.emptyFn,afterFormCancel:Ext.emptyFn,_getExtenalFormTask:function(a,b,c){var d=[];return this._eachWrapForm(function(e){d.push(SF.util.AsyncTaskChain.createInterceptorTask(e[a],e,b,c))}),d},_eachWrapForm:function(a,b){for(var c=this;c&&a.call(b||this,c)!==!1;)c=c.getInnerForm()}},SF.form.BaseForm.open=SF.form.BaseForm.edit,SF.form.BaseForm.getForm=SF.form.BaseForm.getJsonForm,SF.ns("SF.form"),SF.form.Form=SF.extend(Ext.Container,{constructor:function(a){this.initFormCfg(a),SF.form.Form.superclass.constructor.apply(this,arguments)},initComponent:function(){SF.form.Form.superclass.initComponent.call(this),this.initForm()},onDisable:function(){SF.form.Form.superclass.onDisable.call(this),this.form&&this.form.eachField(function(){this.disable&&this.disable()})},onEnable:function(){SF.form.Form.superclass.onEnable.call(this),this.form&&this.form.eachField(function(){this.enable&&this.enable()})},beforeDestroy:function(){SF.form.Form.superclass.beforeDestroy.call(this),this.destroyForm()}}),SF.applyIf(SF.form.Form.prototype,SF.form.BaseForm),SF.reg("form",SF.form.Form),SF.ns("SF.form"),SF.form.FormPanel=SF.extend(Ext.Panel,{constructor:function(a){this.initFormCfg(a),SF.form.FormPanel.superclass.constructor.apply(this,arguments)},initComponent:function(){SF.form.FormPanel.superclass.initComponent.call(this),this.initForm()},beforeDestroy:function(){SF.form.FormPanel.superclass.beforeDestroy.apply(this,arguments),this.destroyForm()}}),SF.applyIf(SF.form.FormPanel.prototype,SF.form.BaseForm),SF.reg("formpanel",SF.form.FormPanel),SF.ns("SF.form"),SF.form.BaseFormWindow=SF.extend(Ext.Window,{modal:!0,confirmOnCancel:!0,confirmOnClose:!0,afterclose:!0,layout:"form",closeAction:"doClose",enableButtonAction:!0,fieldMode:"fieldSection",constructor:function(a){this.initFormCfg(a),SF.form.BaseFormWindow.superclass.constructor.apply(this,arguments)},initComponent:function(){this.initButtons(),SF.form.BaseFormWindow.superclass.initComponent.call(this),this.initForm(),this.initFormTarget()},initFormTarget:SF.emptyFn,getFormTarget:function(){return this[this.fieldMode]},onDisable:function(){SF.form.BaseFormWindow.superclass.onDisable.call(this),this.getFormTarget().eachField(function(){this.disable&&this.disable()})},onEnable:function(){SF.form.BaseFormWindow.superclass.onEnable.call(this),this.getFormTarget().eachField(function(){this.enable&&this.enable()})},doClose:function(){this.fireAction("cancel",{src:"close"},null)},doCancel:function(){this.hide()},afterCancel:function(){SF.form.BaseForm.afterCancel.apply(this,arguments),this.doCancel()},confirmUnsave:function(){SF.confirm(_("\u8bbe\u7f6e\u5df2\u66f4\u6539\uff0c\u653e\u5f03\uff1f"),function(a){"yes"==a&&this.hide()},this)},confirmHide:function(){this.hide()},setFormStatus:function(a){SF.form.BaseForm.setFormStatus.apply(this,arguments);{var b=this.openConfig||{};this.getFormTarget()}b.title&&(a?(this.setTitle(this.backupTitle),delete this.backupTitle):(this.backupTitle=this.title,this.setTitle(b.title))),b.animateTarget&&(a?(this.setAnimateTarget(this.backupAnimateTarget),delete this.backupAnimateTarget):(this.backupAnimateTarget=this.animateTarget,this.setAnimateTarget(b.animateTarget)))},initFocus:function(){var a=this.getFocusField();this.origDefaultButton||(this.origDefaultButton=this.defaultButton),this.defaultButton=a},uninitFocus:function(){this.defaultButton=this.origDefaultButton,delete this.origDefaultButton},afterEdit:function(){SF.form.BaseForm.afterEdit.apply(this,arguments),this.show();var a=this.getAutoScroll(),b=this.getContentTarget();a.x&&b.scrollTo("left",0),a.y&&b.scrollTo("top",0)},afterSave:function(){SF.form.BaseForm.afterSave.apply(this,arguments),this.afterclose&&this.hide()},beforeAction:function(a,b,c){b&&b.button&&(b.button.setDisabled(!0),function(){b.button.el.dom&&b.button.setDisabled(!1)}.defer(1e3));var d=SF.wrap(b);switch(d.actionName=a,d.event=c,a){case"cancel":return this.onFormCancel(d);case"confirm":case"submit":return this.onFormSave(d)}},afterRender:function(){SF.form.BaseFormWindow.superclass.afterRender.apply(this,arguments),this.el.on("keydown",function(a){a.getTarget();a.getKey()==a.ESC&&this.beforeAction("cancel")},this)},beforeDestroy:function(){SF.form.BaseFormWindow.superclass.beforeDestroy.call(this),delete this.openConfig,delete this.defaultButton;var a=this.getFormTarget();a.removeAllFields(),Ext.destroy(a)}}),SF.applyIf(SF.form.BaseFormWindow.prototype,SF.form.BaseForm),Ext.reg("baseformwindow",SF.form.BaseFormWindow),SF.ns("SF.form"),SF.form.SubFormWindow=SF.extend(SF.form.BaseFormWindow,{initFormTarget:function(){this[this.fieldMode]=this.getFieldSection()},getForm:SF.form.BaseFormWindow.prototype.getFieldSection,initButtons:function(){this.buttons=this.buttons||[{text:_("\u786e\u5b9a"),itemId:"confirm",actionName:"confirm"},{text:_("\u53d6\u6d88"),itemId:"cancel",actionName:"cancel"}]}}),Ext.reg("subformwindow",SF.form.SubFormWindow),SF.ns("SF.form"),SF.form.FormWindow=SF.extend(SF.form.BaseFormWindow,{fieldMode:"form",initFormTarget:function(){this[this.fieldMode]=this.getForm()},initButtons:function(){this.buttons=this.buttons||[{text:_("\u63d0\u4ea4"),itemId:"submit",actionName:"submit"},{text:_("\u53d6\u6d88"),itemId:"cancel",actionName:"cancel"}]},beforeDestroy:function(){SF.form.FormWindow.superclass.beforeDestroy.apply(this,arguments),this.destroyForm()}}),Ext.reg("formwindow",SF.form.FormWindow),function(){SF.ns("SF.form"),SF.form.ReferenceField=SF.extend(SF.form.JsonField,{updateStatus:SF.emptyFn,onValueChange:function(a){this.updateStatus(a),this.validate&&this.validate()},_getForm:function(){var a=this.win;return a&&a.getInstance&&(a=a.getInstance(),this.doRelateWindow(a)),a},validate:function(){return!this.allowBlank&&Ext.isEmpty(this.value)?_("\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879"):!0},markInvalid:function(a){SF.form.ReferenceField.superclass.markInvalid.call(this,_("\u5173\u8054\u8868\u5355\u5185\u542b\u6709\u9519\u8bef\uff01")),this.currentInvalid=a},setHidden:function(a,b){Ext.isObject(b)?this.hiddens=a?b:null:SF.form.ReferenceField.superclass.setHidden.apply(this,arguments)},translate:function(){var a=this._getForm().getFieldSection();return a.translate.apply(a,arguments)},isDirty:function(){var a=SF.form.ReferenceField.superclass.getJsonValue.apply(this,arguments);return!SF.compare(a,this.getOriginalValue())},getJsonValue:function(){var a=SF.form.ReferenceField.superclass.getJsonValue.apply(this,arguments);return SF.clone(a)},setJsonValue:function(a){(null===a||"undefined"==typeof a)&&(a=this.getDefaultValue());var b=this.getJsonValue();SF.compare(b,a)||(delete this.currentInvalid,SF.form.ReferenceField.superclass.setJsonValue.call(this,a),this.onValueChange(a,b),this.fireEvent&&this.fireEvent("valuechange",a,b))},windowConfirm:function(a){var b=a.getJsonValue();this.singleField&&(b=b[this.singleField]),this.setJsonValue(b),a.isDirty()||this.setOriginalValue()},openWindow:function(){var a,b=this._getForm(),c=this.getJsonValue();this.singleField&&(a={},a[this.singleField]=c,c=a);var d={value:c,confirm:this.windowConfirm,invalids:this.currentInvalid,disables:this.disabled,readonlys:this.readOnly,scope:this};d.disables=d.disables||this.disables,d.readonlys=d.readonlys||this.readonlys,d.hiddens=this.hiddens,this.processOpenConfig(d),b.open&&b.open(d)},processOpenConfig:Ext.emptyFn,doRelateWindow:function(a){a=a||this.win,a&&a.setRelatedComponent&&!a.getRelatedComponent()&&a.setRelatedComponent(this)}}),SF.form.BtnRefField=SF.extend(Ext.BoxComponent,{cls:"x-field-btnref",buttonAlign:"left",fitButton:!1,hideLabel:!1,initComponent:function(){SF.form.BtnRefField.superclass.initComponent.apply(this,arguments),this.doRelateWindow()},onRender:function(){SF.form.BtnRefField.superclass.onRender.apply(this,arguments);var a=this.buttonCfg||{};this.text&&(a.text=this.text),this.title=a.text,SF.apply(a,{handler:this.openWindow,scope:this}),this.btn=new Ext.Button(a),this.btn.render(this.el),this.fitButton||this.btn.el.applyStyles("float:"+("right"===this.buttonAlign?"right":"left"))},onDisable:function(){SF.form.BtnRefField.superclass.onDisable.call(this),this.btn.disable()},onEnable:function(){SF.form.BtnRefField.superclass.onEnable.call(this),this.btn.enable()},onResize:function(a){SF.form.BtnRefField.superclass.onResize.apply(this,arguments),this.fitButton&&this.btn.setWidth(a)},onDestroy:function(){SF.destroy(this.btn),SF.form.BtnRefField.superclass.onDestroy.call(this)}}),SF.applyInterface(SF.form.BtnRefField,SF.form.ReferenceField),SF.reg("btnreffield",SF.form.BtnRefField),SF.form.LinkRefField=SF.extend(Ext.BoxComponent,{autoEl:"a",initComponent:function(){SF.form.LinkRefField.superclass.initComponent.apply(this,arguments),this.doRelateWindow()},renderer:function(){return this.text||"&nbsp;"},updateStatus:function(a){a||(a=this.getJsonValue()),this.rendered&&this.el.update(this.renderer(a))},afterRender:function(){SF.form.LinkRefField.superclass.afterRender.apply(this,arguments),this.el.addClass("x-field-linkref"),this.updateStatus(),this.mon(this.el,"click",this.openWindow,this)}}),SF.applyInterface(SF.form.LinkRefField,SF.form.ReferenceField),SF.reg("linkreffield",SF.form.LinkRefField),SF.form.DisplayBtnRefField=SF.extend(Ext.BoxComponent,{anchor:"100%",baseCls:"x-dspbtn",initComponent:function(){SF.form.DisplayBtnRefField.superclass.initComponent.apply(this,arguments),this.doRelateWindow()},renderer:function(){return this.text||"&nbsp;"},updateStatus:function(a){this.rendered&&this.displayEl.update(this.renderer(a))},onRender:function(){SF.form.DisplayBtnRefField.superclass.onRender.apply(this,arguments),this.el.addClass(this.baseCls),this.displayEl=this.el.createChild({cls:this.baseCls+"-dsp",html:this.renderer(this.value)}),this.btnWrap=this.el.createChild({cls:this.baseCls+"-btnwrap"});var a=this.buttonCfg||{};this.buttonText&&(a.text=this.buttonText),this.title=a.text,SF.apply(a,{handler:this.openWindow,scope:this}),this.btn=new Ext.Button(a),this.btn.render(this.btnWrap)},onDisable:function(){SF.form.BtnRefField.superclass.onDisable.call(this),this.btn.disable()},onEnable:function(){SF.form.BtnRefField.superclass.onEnable.call(this),this.btn.enable()},onDestroy:function(){SF.destroy(this.btn),SF.form.BtnRefField.superclass.onDestroy.call(this)}}),SF.applyInterface(SF.form.DisplayBtnRefField,SF.form.ReferenceField),SF.reg("displaybtnreffield",SF.form.DisplayBtnRefField),SF.form.TriggerRefField=SF.extend(Ext.form.TriggerField,{initComponent:function(){SF.form.TriggerRefField.superclass.initComponent.apply(this,arguments),this.doRelateWindow()},renderer:function(){return this.text||""},getJsonValue:void 0,setJsonValue:void 0,isDirty:void 0,updateStatus:function(a){a||(a=this.getJsonValue()),this.rendered&&(this.el.dom.value=this.renderer(a))},initValue:function(){this.updateStatus(this.value)},onTriggerClick:function(){this.openWindow()}}),SF.applyInterface(SF.form.TriggerRefField,SF.form.ReferenceField),SF.copyTo(SF.form.TriggerRefField.prototype,SF.form.ReferenceField.prototype,["getJsonValue","setJsonValue","isDirty"]),SF.reg("triggerreffield",SF.form.TriggerRefField)}(),SF.ns("SF.form"),function(){SF.override(Ext.form.Field,{readOnlyClass:"sf-form-readonly",initComponent:Ext.form.Field.prototype.initComponent.createInterceptor(function(){this.initActionMonitor()}),initActionMonitor:function(a){this.actionReady||!a&&!SF.isFunction(this.actionHandler)||(this.createActionMonitor(),this.actionReady=!0)},createActionMonitor:function(){this.on("change",function(a,b){this.validate()&&this.callActionHandler(null,{value:b})},this,{buffer:200})},validate:function(){return this.hidden||this.disabled||this.validateValue(this.processValue(this.getRawValue()))?(this.clearInvalid(),!0):!1},callActionHandler:function(a,b){SF.isFunction(this.actionHandler)&&this.actionHandler.call(this.actionScope,this,a,b)},setActionHandler:function(a,b){return this.actionHandler=a,this.actionScope=b,this.initActionMonitor(),this},getJsonValue:function(){var a=this.getValue.apply(this,Ext.toArray(arguments));return void 0===a?null:a},setJsonValue:function(a){return this.isDestroyed?void 0:((null===a||"undefined"==typeof a)&&(a=this.getDefaultValue()),this.setValue.call(this,a))},markInvalid:Ext.form.Field.prototype.markInvalid.createInterceptor(function(a){this.currentInvalid=a}),clearInvalid:Ext.form.Field.prototype.clearInvalid.createInterceptor(function(){delete this.currentInvalid}),getName:function(){return this.name},setValue:function(a){return this.value=a,this.rendered&&this.isDestroyed!==!0&&(this.el.dom.value=Ext.isEmpty(a)?"":a),this},setDomName:function(a){this.domName=a,this.rendered&&(this.el.dom.name=a)},onRender:function(a,b){if(!this.el){var c=this.getAutoCreate();c.name||(c.name=this.domName||this.name||this.id),this.inputType&&(c.type=this.inputType),this.autoEl=c}Ext.form.Field.superclass.onRender.call(this,a,b);var d=this.el.dom.type;d&&("password"==d&&(d="text"),this.el.addClass("x-form-"+d)),this.readOnly&&this.setReadOnly(!0),void 0!==this.tabIndex&&this.el.dom.setAttribute("tabIndex",this.tabIndex),this.el.addClass([this.fieldClass,this.cls])},isDisabled:function(){return this.disabled},setReadOnly:function(a){this.rendered&&(this.el.dom.readOnly=a,a?this.el.addClass(this.readOnlyClass):this.el.removeClass(this.readOnlyClass)),this.readOnly=a},getRawValue:function(){var a=this.rendered?this.el.getValue():Ext.value(this.value,"");return this.emptyState&&(a=""),a},getValue:function(){var a;return this.rendered?(this.emptyState?a="":(a=this.el.getValue(),a=void 0===a?"":a),a):this.value}}),SF.applyInterface(Ext.form.Field,SF.form.JsonField),SF.form.Field=Ext.form.Field}(),SF.form.Checkbox=Ext.form.Checkbox,SF.override(SF.form.Checkbox,{builtinFieldTip:!0,onClick:function(){this.el.dom.checked!=this.checked&&(this.setValue(this.el.dom.checked),this.fireEvent("usercheck",this,this.el.dom.checked))},onRender:function(a,b){SF.form.Checkbox.superclass.onRender.call(this,a,b),SF.isDefined(this.value)||(this.value=SF.isDefined(this.checked)?this.checked:!1),this.el.dom.checked=this.value,this.el.dom.defaultChecked=this.value,this.wrap=this.el.wrap({cls:"x-form-check-wrap"}),this.boxLabel&&this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel}),this.setFieldTip(this.fieldTip),Ext.isIE&&this.wrap.repaint(),this.resizeEl=this.positionEl=this.wrap},setFieldTip:function(a,b){var c,d=this._tipDom;this.fieldTip=a,this.fieldTipStyle=b||this.fieldTipStyle,this.rendered&&Ext.isString(a)&&(d&&Ext.fly(d).remove(),c=SF.form.FieldTipMgr.getTipAutoEl(this.fieldTip,this.fieldTipStyle),c.cls+=" x-field-tip-loose",d=this.wrap.createChild(c,void 0,!0),Ext.fly(d).addClass("x-field-tip-checkbox"),this._tipDom=d)},setReadOnly:function(a){SF.form.Checkbox.superclass.setReadOnly.apply(this,arguments),this.rendered&&(this.el.dom.disabled=this.disabled||a)},onEnable:function(){this.getActionEl().removeClass(this.disabledClass),this.el.dom.disabled=!1||this.readOnly},updateBoxLabel:function(a){this.boxLabel=a,this.rendered&&this.wrap.child("label").update(a)}}),SF.override(Ext.form.Radio,{getJsonValue:function(){return this.rendered?this.checked=this.el.dom.checked:this.checked
},setValue:function(a){return"boolean"==typeof a&&Ext.form.Radio.superclass.setValue.call(this,a),this}}),delete Ext.form.Radio.prototype.onClick,SF.form.Radio=Ext.form.Radio,SF.ns("SF.form"),SF.form.CheckboxGroup=Ext.form.CheckboxGroup,SF.override(SF.form.CheckboxGroup,{focusClass:void 0,blankText:_("\u60a8\u5fc5\u987b\u81f3\u5c11\u9009\u62e9\u4e00\u9879"),isFieldContainer:!0,readOnlyClass:"",bubble:function(){return Ext.Container.prototype.bubble.apply(this,arguments)},cascade:function(a,b,c){return a.apply(b||this,c||[this])!==!1?Ext.Container.prototype.cascade.apply(this.panel,arguments):this},initComponent:function(){SF.form.CheckboxGroup.superclass.initComponent.call(this),this.initPanel()},initPanel:function(){var a,b,c,d={autoEl:{id:this.id},cls:this.groupCls,layout:"column"},e={xtype:"container",defaultType:this.defaultType,layout:"form",defaults:{hideLabel:!0,anchor:"100%"}},f=[];if("string"==typeof this.columns&&(this.columns=this.items.length),!Ext.isArray(this.columns)){var g=[];for(a=0;a<this.columns;a++)g.push(100/this.columns*.01);this.columns=g}for(c=this.columns.length,a=0;c>a;a++){var h=Ext.apply({items:[]},e);h[this.columns[a]<=1?"columnWidth":"width"]=this.columns[a],this.defaults&&(h.defaults=Ext.apply(h.defaults||{},this.defaults)),f.push(h)}if(this.vertical){var i=Math.ceil(this.items.length/c),j=0;for(a=0,b=this.items.length;b>a;a++)a>0&&a%i===0&&j++,f[j].items.push(this.items[a])}else for(a=0,b=this.items.length;b>a;a++){var k=a%c;f[k].items.push(this.items[a])}Ext.apply(d,{layoutConfig:{columns:c},items:f}),this.panel=new Ext.Container(d),this.panel.ownerCt=this,this.items=new Ext.util.MixedCollection(!1,SF.form.getFieldName),this.items.on("replace",function(a){SF.error(String.format("Field name\u91cd\u590d : {0}",a))},this),this.items.addAll(SF.form.fetchFields(this.panel,{ignoreSelf:!0,disableIgnore:!0,filter:this.fieldFilter})),this.items.each(function(a){a.setDomName("group-"+this.getId()),a.on("check",this.fireChecked,this)},this)},fieldFilter:function(a){var b="/"+a.getXTypes()+"/";return-1!==b.indexOf("/checkbox/")||-1!==b.indexOf("/fieldset/")},onRender:function(a,b){if(!this.el&&(this.panel.render(a),this.el=this.panel.getEl(),this.forId&&this.itemCls)){var c=this.el.up(this.itemCls).child("label",!0);c&&c.setAttribute("htmlFor",this.forId)}SF.form.CheckboxGroup.superclass.onRender.call(this,a,b)},doLayout:function(a,b){this.rendered&&this.panel.doLayout(a,b)},getJsonValue:function(){var a=[];return this.items.each(function(b){(b.getChecked&&b.getChecked()||b.getJsonValue()===!0)&&a.push(b.getName())}),a},setJsonValue:function(){},isDirty:function(){return!1},reset:SF.emptyFn,getOriginalValue:SF.emptyFn,setOriginalValue:SF.emptyFn,fireChecked:function(){var a=this.getJsonValue();this.fireEvent("change",this,a)}}),delete SF.form.CheckboxGroup.prototype.afterRender,SF.ns("SF.form"),SF.form.RadioGroup=Ext.form.RadioGroup,SF.override(Ext.form.RadioGroup,{blankText:_("\u60a8\u5fc5\u987b\u9009\u62e9\u4e00\u9879"),getJsonValue:function(){var a=null;return this.items.each(function(b){return(b.getChecked?b.getChecked():b.getJsonValue())?(a=b.getName(),!1):void 0}),a},fieldFilter:function(a){var b="/"+a.getXTypes()+"/";return-1!==b.indexOf("/radio/")||-1!==b.indexOf("/fieldset/")},fireChecked:function(a,b){b&&(this.eachItem(function(b){b!==a&&(b.setChecked?b.setChecked(!1):b.setJsonValue(!1))}),this.fireEvent("change",this,a))}}),SF.ns("SF.form"),function(){var a=Ext.form.TextArea;SF.override(a,{isSingleLineField:!1,emptyText:_("\u53ef\u4ee5\u76f4\u63a5\u5728\u6b64\u5904\u8f93\u5165\u3001\u7f16\u8f91\u3001\u5220\u9664")}),SF.form.TextArea=a}(),function(){var a="placeholder"in document.createElement("input");SF.ns("SF.form"),SF.form.TextField=Ext.form.TextField,SF.override(SF.form.TextField,{minLengthText:_("\u8be5\u8f93\u5165\u9879\u7684\u6700\u5c0f\u957f\u5ea6\u662f {0} \u4e2a\u5b57\u8282"),maxLengthText:_("\u8be5\u8f93\u5165\u9879\u7684\u6700\u5927\u957f\u5ea6\u662f {0} \u4e2a\u5b57\u8282"),isSingleLineField:!0,trimValue:!1,createActionMonitor:function(){SF.form.TextField.superclass.createActionMonitor.apply(this,arguments),this.on("specialkey",function(a,b){b.getKey()==b.ENTER&&this.el.blur.defer(100,this.el)},this)},validateValue:function(a){var b,c;if(a.getACLength&&(b=a.getACLength()),1>b)return this.allowBlank?(this.clearInvalid(),!0):(this.markInvalid(this.blankText),!1);if(b<this.minLength)return this.markInvalid(String.format(this.minLengthText,this.minLength)),!1;if(b>this.maxLength)return this.markInvalid(String.format(this.maxLengthText,this.maxLength)),!1;if(Ext.isFunction(this.validator)&&(c=this.validator(a),c!==!0))return this.markInvalid(c),!1;if(this.vtype){var d=Ext.form.VTypes;if(!d[this.vtype](a,this))return this.markInvalid(this.vtypeText||d[this.vtype+"Text"]),!1}return this.regex&&!this.regex.test(a)?(this.markInvalid(this.regexText),!1):!0},applyEmptyText:function(){this.rendered&&this.emptyText&&(this.hasFocus?this.clearEmptyText():this.getRawValue().length<1?this.setEmptyText():this.clearEmptyText())},usePlaceHolder:a,_initPlaceHolder:function(){return this.usePlaceHolder=a&&this.usePlaceHolder,this.usePlaceHolder},setPlaceHolder:function(a,b){this._initPlaceHolder()?(a||b)&&(this.el.dom.placeholder=a||""):this.setRawValue(a)},setEmptyText:function(a){this.rendered&&this.emptyText&&((a||!this.emptyState)&&(this.setPlaceHolder(this.emptyText),this.el.addClass(this.emptyClass)),this.emptyState=!0)},clearEmptyText:function(a){this.rendered&&this.emptyText&&((a||this.emptyState)&&(this.setPlaceHolder(""),this.el.removeClass(this.emptyClass)),this.emptyState=!1)},preFocus:function(){var a=this.el;this.clearEmptyText(),this.selectOnFocus&&a.dom.select()},initValue:function(){void 0!==this.value?this.setValue(this.value):Ext.isEmpty(this.el.dom.value)||(this._initPlaceHolder()||this.el.dom.value!=this.emptyText)&&this.setValue(this.el.dom.value),this.originalValue=this.getValue()},setValue:function(){return this.clearEmptyText(),Ext.form.TextField.superclass.setValue.apply(this,arguments),this.applyEmptyText(),this.autoSize(),this},getValue:function(){var a=Ext.form.TextField.superclass.getValue.apply(this,arguments);return this.trimValue&&Ext.isString(a)&&(a=a.trim()),a}})}(),SF.ns("SF.form"),function(){var a={CLICK:"click",SET:"set",SET_SILENT:"set_silent"},b={Border:"border",Offset:"offset",Page:"page",Group:"group",Inline:"inline",UpLine:"upline"},c={None:"none",Disable:"disable",Collapse:"collapse"},d=Ext.extend(Ext.util.Observable,{disabled:!1,readOnly:!1,constructor:function(a){Ext.apply(this,a),d.superclass.constructor.apply(this,arguments),this.addEvents("valuechange","disabledchange","readonlychange")},setCheckbox:function(b){this.checkbox=b,this.setJsonValue(this.value,a.SET_SILENT)},setJsonValue:function(b,c){b=!!b,this.checkbox&&(this.checkbox.checked=b,this.checkbox.defaultChecked=b),b!==this.value&&(this.value=b,c=c||a.SET,this.fireEvent("valuechange",b,c))},getJsonValue:function(a){return this.notifyChange(a),this.checkbox?this.checkbox.checked:this.value},enable:function(){var a=this.disabled;a&&(this.disabled=!1,this.fireEvent("disabledchange",this.disabled))},disable:function(){var a=this.disabled;a||(this.disabled=!0,this.fireEvent("disabledchange",this.disabled))},notifyChange:function(a){this.checkbox&&this.value!==this.checkbox.checked&&this.setJsonValue(this.checkbox.checked,a)},setReadOnly:function(a){a=!!a,this.readOnly!==a&&(this.readOnly=a,this.fireEvent("readonlychange",a))}});SF.applyInterface(d,SF.form.JsonField,"field"),SF.form.FieldSet=SF.extend(Ext.Panel,{isFormField:!1,baseCls:"x-fieldset",layout:"form",animCollapse:!1,hideLabel:!0,builtinFieldTip:!0,applyFormStyle:!0,disabledClass:"x-item-disabled",checked:!1,toggleMode:c.Disable,toggleName:"enable",toggleTitle:_("\u542f\u7528"),validateWhenUnselected:!0,displayMode:b.Border,inlineSeparator:_("\uff1a"),initComponent:function(){switch(SF.form.FieldSet.superclass.initComponent.apply(this,arguments),this.addEvents("usercheck"),this.initFields(),this.enableToggle){case"checkbox":break;case"radio":break;default:this.enableToggle=!1}var b;this.enableToggle&&(this.toggleField=b=new d({name:this.toggleName,fieldTitle:this.toggleTitle}),this.addField(b),this.mon(b,"valuechange",this._handleCheckChange,this),this.mon(b,{scope:this,valuechange:this.refreshState,disabledchange:this.refreshState,readonlychange:this.refreshState}),b.setJsonValue(this.checked,a.SET_SILENT)),this.addContainer(this)},onRender:function(a,d){var e,f,g,h;switch(this.displayMode){case b.Offset:case b.Page:case b.Group:case b.Inline:case b.UpLine:e="div",f="div",g="x-fieldset-"+this.displayMode;break;default:this.displayMode=b.Border,this.boldLabel=!0,e="fieldset",f="legend"}switch(this.el||(this.el=document.createElement(e),this.el.id=this.id,this.header=!0,this.el.appendChild(document.createElement(f)).className="x-fieldset-header "+(this.headerCssClass||""),this.headerAsText=!1),Ext.form.FieldSet.superclass.onRender.call(this,a,d),this.displayMode===b.Inline&&(this.header.setWidth(this.titleWidth||this.ownerCt&&this.ownerCt.labelWidth||100),this.header.addClass(g+"-header-"+(this.titleAlign||this.ownerCt.labelAlign||"left"))),this.toggleMode){case c.Disable:case c.Collapse:case c.None:break;default:this.toggleMode=c.Disable}if(this.displayMode===b.Group&&(this.collapsedCls="x-fieldset-group-collapse"),g&&(this.el.addClass(g),this.header.addClass(g+"-header"),this.bwrap.addClass(g+"-bwrap"),this.body.addClass(g+"-body")),this.toggleField&&(h={tag:"input",name:this.domName||this.id,cls:"x-fieldset-checkbox",id:this.getId()+"-check",type:this.enableToggle},this.checkbox=this.header.insertFirst(h),this.toggleField.setCheckbox(this.checkbox.dom),this.mon(this.checkbox,"click",this._handleCheckClick,this)),h={tag:"label",cls:"x-fieldset-title "+(this.boldLabel?"x-bold-label":""),htmlFor:this.checkbox?this.getId()+"-check":void 0,html:this.title+(this.displayMode===b.Inline?this.inlineSeparator:"")},this.header.createChild(h,void 0,!0),SF.isString(this.fieldTip)){var i=SF.form.FieldTipMgr.getTipAutoEl(this.fieldTip,this.fieldTipStyle);i.cls+=" x-field-tip-loose x-field-tip-fieldset",this.header.createChild(i,void 0,!0)}this.refreshState()},getFrameWidth:function(){var a;return this.displayMode===b.Inline?(a=this.el.getFrameWidth("lr")+this.bwrap.getFrameWidth("lr"),a+=this.header?this.header.getWidth():0):SF.form.FieldSet.superclass.getFrameWidth.apply(this,arguments)},getFrameHeight:function(){return this.displayMode===b.Inline?this.el.getFrameWidth("tb")+this.bwrap.getFrameWidth("tb"):SF.form.FieldSet.superclass.getFrameHeight.apply(this,arguments)},afterLayout:function(){SF.form.FieldSet.superclass.afterLayout.apply(this,arguments),Ext.isIE&&this.shouldDisableItems()&&!this.toggleField.getJsonValue()&&(this.bwrap.syncBlock(),this.bwrap.repaint())},shouldDisableItems:function(){return this.enableToggle&&this.toggleMode===c.Disable},shouldToggleItems:function(){return this.enableToggle&&this.toggleMode===c.Collapse},shouldSkipValidations:function(){return this.hidden?!0:this.toggleField?!this.toggleField.getJsonValue()&&(this.shouldDisableItems()||this.shouldToggleItems()||this.toggleMode===c.None&&!this.validateWhenUnselected):!1},_handleCheckChange:function(b,c){if(this.toggleField)switch(this.checked=b,c){case a.CLICK:this.fireEvent("check",this,b),this.fireEvent("usercheck",this,b);break;case a.SET:this.fireEvent("check",this,b);break;case a.SET_SILENT:}},refreshState:function(){var a=this.toggleField,b=this.toggleMode;if(a){var d=a.getJsonValue(),e=this.disabled||a.isDisabled(),f=e||a.isReadOnly(),g=this.disabled||b===c.Disable&&!d,h=b===c.Collapse&&!d;this.checkbox&&(this.checkbox.dom.disabled=f,this.header[e?"addClass":"removeClass"]("x-item-disabled")),this[g?"itemDisable":"itemEnable"](),h!==this.collapsed&&(this.rendered?this[h?"collapse":"expand"]():this.collapsed=h,this.fireEvent("magic",this))}},itemDisable:function(){this.rendered&&(this.bwrap.addClass(this.disabledClass),this.clearInvalid(),this.bwrap.block(),Ext.isIE&&this.bwrap.repaint())},itemEnable:function(){this.rendered&&(this.bwrap.removeClass(this.disabledClass),this.bwrap.unblock())},onDisable:function(){this.disabled=!0,this.refreshState(),this.rendered&&this.getActionEl().addClass(this.disabledClass)},onEnable:function(){this.disabled=!1,this.refreshState(),this.rendered&&this.getActionEl().removeClass(this.disabledClass)},setDomName:function(a){this.domName=a,this.checkbox&&(this.checkbox.dom.name=a)},_handleCheckClick:function(){this.toggleField.notifyChange(a.CLICK)},setChecked:function(b,c){this.toggleField&&this.toggleField.setJsonValue(b,c?a.SET_SILENT:a.SET)},getChecked:function(){return this.toggleField&&this.toggleField.getJsonValue()},setDisabled:function(a,b){SF.isObject(b)?this.mixins.fieldsection.setDisabled.apply(this,arguments):SF.form.FieldSet.superclass.setDisabled.apply(this,arguments)},setHidden:function(a,b){SF.isObject(b)?this.mixins.fieldsection.setHidden.apply(this,arguments):SF.form.JsonField.prototype.setHidden.apply(this,arguments)},isValid:function(){return this.shouldSkipValidations()?!0:this.mixins.fieldsection.isValid.apply(this,arguments)},validate:function(){return this.shouldSkipValidations()?(this.clearInvalid(),!0):this.mixins.fieldsection.validate.apply(this,arguments)},onDestroy:function(){Ext.destroyMembers(this,"checkbox"),SF.form.FieldSet.superclass.onDestroy.apply(this,arguments)}}),SF.applyInterface(SF.form.FieldSet,SF.form.FieldSection,"fieldsection"),Ext.reg("fieldset",SF.form.FieldSet)}(),Ext.ns("SF.form"),SF.form.GridField=Ext.extend(Ext.grid.GridPanel,{getJsonValue:function(){var a=[];return this.store.data.each(function(b){a.push(b.data)})}}),SF.applyInterface(SF.form.GridField,SF.form.JsonField),Ext.reg("gridfield",SF.form.GridField),SF.ns("SF.form"),SF.form.VTypes=Ext.form.VTypes,function(){var a=new RegExp(String.format("^({0}\\.{0}\\.{0}\\.{0})$","(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])"));Ext.apply(Ext.form.VTypes,{ip:function(b){return b=String(b).trim(),a.test(b)},ipText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684IP\u5730\u5740\uff0c\u5982192.168.1.1"),ipMask:/[\d\.]/i}),Ext.apply(Ext.form.VTypes,{port:function(a){return a=String(a).trim(),/^\d{1,5}$/.test(a)&&65536>a},portText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u7aef\u53e3(0~65535)\uff0c\u59821023"),portMask:/[\d]/i}),Ext.apply(Ext.form.VTypes,{number:function(a){return a=String(a).trim(),/^\d{1,10}$/.test(a)},numberText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u6574\u6570"),numberMask:/[\d]/i}),Ext.apply(Ext.form.VTypes,{"double":function(a){return a=String(a).trim(),/^\d*(\.)?\d+$/.test(a)},doubleText:_("\u8bf7\u8f93\u51650\u6216\u6b63\u5b9e\u6570"),doubleMask:/[\d]/i}),Ext.apply(Ext.form.VTypes,{domain:function(a){return a=String(a).trim(),/^([\da-zA-Z\.\-_\u4e00-\u9fa5]+)\.([a-zA-Z]{2,6})$/.test(a)},domainText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u57df\u540d\uff0c\u5982www.baidu.com"),domainMask:/[\da-zA-Z\.\-_\u4e00-\u9fa5]/i}),Ext.apply(Ext.form.VTypes,function(){var a="(?:\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])",b=String.format("({0}\\.{0}\\.{0}\\.{0})",a),c=String.format("^{0}(?:\\s*-\\s*{0})?$",b),d=new RegExp(c);return{iporange:function(a){return a=String(a).trim(),d.test(a)},iporangeText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684IP\u5730\u5740\u6216\u8303\u56f4\uff0c\u5982192.168.1.1\u6216192.168.1.1-192.168.1.100"),iporangeMask:/[\d\.-]/i}}()),Ext.apply(Ext.form.VTypes,function(){function a(a){var b=a.toString().trim(),c=b.split(".");return 4!=c.length?null:256*parseInt(c[0])*256*256+256*parseInt(c[1])*256+256*parseInt(c[2])+parseInt(c[3])}function b(b){var c=null===b?"":b.toString().trim(),d=c.split("-");if(2===d.length){var e=a(d[0]),f=a(d[1]);return null!==e&&null!==f&&e>=f?!1:!0}return!1}function c(b){var c=null===b?"":b.toString().trim(),e=c.split("/");if(2==e.length){var f=e[0],g=e[1],i=new RegExp(d);if(!i.test(f))return!1;var j=a(g);if(null===j)return!1;var k=String.leftPad(j.toString(2),32,"0"),l=new RegExp(h);return l.test(k)?!0:!1}return!1}var d="^((\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5])$",e="^(((\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5]))-(((\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5]))$",f="^(((\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5]))\\/(((\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5]))$",g="^(((\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d{1,2}|0\\d{2}|1\\d\\d|2[0-4]\\d|25[0-5]))\\/(\\d|[12]\\d|3[012])$",h="^(1+0*|0+)$";return{iporangex:function(a){var h=new RegExp(d);if(h.test(a))return!0;var i=new RegExp(e);if(i.test(a))return b(a);var j=new RegExp(f);if(j.test(a))return c(a);var k=new RegExp(g);return k.test(a)?!0:!1},iporangexText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684IP\u5730\u5740\u6216\u8303\u56f4\uff0c\u8f93\u5165\u683c\u5f0f\uff1a<br />1\u3001\u5355\u4e2aIP\u5730\u5740\uff0c\u4f8b\u5982<br />&nbsp;&nbsp;&nbsp;&nbsp;<b>192.168.0.1</b><br />2\u3001IP\u8303\u56f4\uff0c\u8d77\u59cbIP-\u7ed3\u675fIP\uff08\u8d77\u59cbIP\u5c0f\u4e8e\u7ed3\u675fIP\uff09\uff0c\u4f8b\u5982<br />&nbsp;&nbsp;&nbsp;&nbsp;<b>192.168.0.1-192.168.0.150</b><br />3\u3001IP\u5730\u5740/\u5b50\u7f51\u63a9\u7801\uff0c\u4f8b\u5982<br />&nbsp;&nbsp;&nbsp;&nbsp;<b>192.168.0.1/255.255.255.0</b><br />\u6216<br />&nbsp;&nbsp;&nbsp;&nbsp;<b>192.168.0.1/24</b>"),iporangexMask:/[\d\.\-\/]/i}}()),Ext.apply(Ext.form.VTypes,{portorange:function(a){return a=String(a).trim(),/^(\d{1,5})(-\d{1,5})?$/.test(a)},portorangeText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u7aef\u53e3\u6216\u8303\u56f4\uff0c\u59821023\u62161023-4095"),portorangeMask:/[\d-]/i}),Ext.apply(Ext.form.VTypes,{subnet:function(a){a=String(a).trim();var b=/^(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])(\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])){3}$/;return b.test(a)},subnetText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u5b50\u7f51\u53f7\uff0c\u5982192.168.1.0"),subnetMask:/[\d\.]/i}),Ext.apply(Ext.form.VTypes,{path:function(a){a=String(a).trim();var b=/^[a-zA-Z\d\s:\\\/]+$/;return b.test(a)},pathText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u5408\u6cd5\u7684\u8def\u5f84"),pathMask:/[a-zA-Z\d\s:\\\/]/i}),Ext.apply(Ext.form.VTypes,{mask:function(a){a=String(a).trim();var b=String.format("^(?:{0}.0.0.0|255.{0}.0.0|255.255.{0}.0|255.255.255.{0})$","(255||254|252|248|240|224|192|128|0)"),c=new RegExp(b);return c.test(a)},maskText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u5b50\u7f51\u63a9\u7801\uff0c\u5982255.255.255.0"),maskMask:/[\d\.]/i}),Ext.apply(Ext.form.VTypes,{time:function(a){return a=String(a).trim(),/^(\d|[0-1]\d|2[0-3]):(\d|[0-5]\d):(\d|[0-5]\d)$/.test(a)},timeText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u65f6\u95f4\uff0c\u5982\uff1a01:02:03"),timeMask:/[\d:]/i}),Ext.apply(Ext.form.VTypes,{host:function(a){a=String(a).trim();var b=/^([\da-zA-Z\.\-_]+)\.([a-zA-Z]{2,6})$/,c=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;return b.test(a)||c.test(a)},hostText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684IP\u5730\u5740\u6216\u8005\u57df\u540d\uff0c\u5982192.168.1.1\u6216\u8005www.baidu.com"),hostMask:/[\da-zA-Z\.\-_]/i}),Ext.apply(Ext.form.VTypes,{host_port:function(a){a=String(a).trim();var b,c,d=/^([\da-zA-Z\.\-_]+)\.([a-zA-Z]{2,6})$/,e=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/;if(-1!=a.indexOf(":")){var f=a.split(":");if(2!=f.length)return!1;b=f[0],c=f[1]}else b=a,c=1;return(d.test(b)||e.test(b))&&/^\d{1,5}$/.test(c)&&65536>c},host_portText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684ip\u6216\u8005ip:port\u6216\u8005\u670d\u52a1\u5668\u57df\u540durl"),host_portMask:/[\da-zA-Z\.\-_:]/i}),Ext.apply(Ext.form.VTypes,{percent:function(a){return a=String(a).trim(),/^(\d{0,2}|100)(\.\d{1,16})?$/.test(a)},percentText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684\u767e\u5206\u6570\uff0c\u5982\u201d61.8\u201c\u3002"),percentMask:/[\d\.]/i}),Ext.apply(Ext.form.VTypes,{mac:function(a){return a=String(a).trim(),/^((\d|([a-f]|[A-F])){2}:){5}(\d|([a-f]|[A-F])){2}$/.test(a)||/^((\d|([a-f]|[A-F])){2}-){5}(\d|([a-f]|[A-F])){2}$/.test(a)},macText:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684MAC\u5730\u5740\uff0c\u5982\uff1a00:E0:4C:0E:9A:2F\u621600-E0-4C-0E-9A-2F"),macMask:/[a-fA-F\d:-]/i});var b=Ext.util.Format,c=b.parseIPv4,d=b.parseIPv6;Ext.apply(Ext.form.VTypes,{ipv6:function(a){return!!d(a)},ipv6Text:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684IPv6\u5730\u5740\uff0c\u5982\uff1a2001:0000:4136:e378:8000:63bf:3fff:fdd2\u62162001:db8::1:0:0:1"),ipv6Mask:/[0-9a-f:.]$/i,ipv46:function(c){return c=b.trim(c),a.test(c)?!0:d(c)?!0:!1},ipv46Text:_("\u8bf7\u8f93\u5165\u4e00\u4e2a\u6709\u6548\u7684IPv4\u6216IPv6\u5730\u5740\uff0c\u5982\uff1a192.168.1.1\u62162001:db8::1:0:0:1"),ipv46Mask:/[0-9a-f:.]$/i,ipv6withmask:function(a){var b,c,e;return a&&a.split&&(b=a.split("/"),c=b[0],e=parseInt(b[1],10),e>=0&&128>=e&&d(c))?!0:!1},ipv6withmaskText:_("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u5e26\u63a9\u7801\u7684IPv6\u5730\u5740\uff0c\u5982\uff1a2001:db8::1:0:0:1/96"),ipv6withmaskMask:/[0-9a-f:.\/]$/i,ipwithmask:function(a){var b,d,e,f,g,h;if(a&&a.split){if(b=a.split("/"),d=b[0],e=b[1],!e)return!1;if(e.indexOf(".")>-1){if(f=c(e),!f)return!1;for(g="",h=0;h<f.length;h++)g+=String.leftPad(f[h].toString(2),8,"0");if(!/^(1+0*|0+)$/.test(g))return!1}else if(e=parseInt(e,10),0>e||e>32)return!1;return c(d)?!0:!1}return!1},ipwithmaskText:_("\u8bf7\u8f93\u5165\u6709\u6548\u7684\u5e26\u63a9\u7801\u7684IPv4\u5730\u5740\uff0c\u5982\uff1a192.168.1.100/24\u3001192.168.1.1/255.255.255.0"),ipwithmaskMask:/[0-9.\/]$/i})}(),SF.ns("SF.form"),SF.form.ComboBox=Ext.form.ComboBox,SF.override(SF.form.ComboBox,{initComponent:function(){if(this.ctCls="x-combo "+(this.ctCls||""),Ext.form.ComboBox.superclass.initComponent.call(this),this.addEvents("expand","collapse","beforeselect","select","beforequery"),this.transform){var a=Ext.getDom(this.transform);if(this.hiddenName||(this.hiddenName=a.name),!this.store){this.mode="local";for(var b=[],c=a.options,d=0,e=c.length;e>d;d++){var f=c[d],g=(f.hasAttribute?f.hasAttribute("value"):f.getAttributeNode("value").specified)?f.value:f.text;f.selected&&Ext.isEmpty(this.value,!0)&&(this.value=g),b.push([g,f.text])}this.store=new Ext.data.ArrayStore({id:0,fields:["value","text"],data:b,autoDestroy:!0}),this.valueField="value",this.displayField="text"}a.name=Ext.id(),this.lazyRender||(this.target=!0,this.el=Ext.DomHelper.insertBefore(a,this.autoCreate||this.defaultAutoCreate),this.render(this.el.parentNode,a)),Ext.removeNode(a)}else this.store&&(this.store=Ext.StoreMgr.lookup(this.store),this.store.autoCreated&&(this.displayField=this.valueField="field1",this.store.expandData||(this.displayField="field2"),this.mode="local"));this.selectedIndex=-1,"local"==this.mode&&(Ext.isDefined(this.initialConfig.queryDelay)||(this.queryDelay=10),Ext.isDefined(this.initialConfig.minChars)||(this.minChars=0))},autoSelectFirst:!0,setValue:function(a){var b=a;if(this.valueField){var c;this.store.clearFilter(),this.autoSelectFirst&&(null===a||"undefined"==typeof a)&&this.store.getCount()>0?(c=this.store.getAt(0),a=c.get(this.valueField),b=c.get(this.displayField)):(c=this.findRecord(this.valueField,a),c?(b=c.data[this.displayField],a=c.data[this.valueField]):Ext.isDefined(this.valueNotFoundText)&&(b=this.valueNotFoundText))}return this.lastSelectionText=b,this.hiddenField&&(this.hiddenField.value=a),Ext.form.ComboBox.superclass.setValue.call(this,b),this.value=a,this},createActionMonitor:function(){this.on("select",function(a,b,c){this.callActionHandler(null,{value:this.getJsonValue(),record:b,index:c})},this)},beforeBlur:function(){this.assertValue()},assertValue:function(){var a,b=this.getRawValue();if(this.valueField&&Ext.isDefined(this.value)&&(a=this.findRecord(this.valueField,this.value)),a&&a.get(this.displayField)==b||(a=this.findRecord(this.displayField,b)),!a&&this.forceSelection)b.length>0&&b!=this.emptyText?(this.el.dom.value=Ext.value(this.lastSelectionText,""),this.applyEmptyText()):this.clearValue();else{if(a&&this.valueField){if(this.value==b)return;b=a.get(this.valueField||this.displayField)}this.setValue(b)}}}),Ext.util.Format.CellCombo=function(){return function(a){return'<div class="hand"> '+a+" </div>"}},Ext.ns("SF.form"),SF.form.ObjectCombo=Ext.extend(Ext.form.ComboBox,{mode:"local",typeAhead:!0,triggerAction:"all",readOnly:!0,lazyInit:!1,url:null,header:_("\u751f\u6548"),value:_("\u9009\u62e9\u751f\u6548"),valueField:"name",displayField:"name",enableAppend:!0,initComponent:function(){this.header+=this.text,this.value+=this.text+"...";var a={tpl:'<tpl for="."><div class="x-combo-list-item">{name}</div></tpl>',store:new Ext.data.JsonStore({autoLoad:!0,url:this.url?this.url:"data/ObjectCombo.json",root:this.root?this.root:"times",fields:["name","value"]})};this.enableAppend&&(a.tpl+='<div class="x-combo-list-item x-combo-add-item">[ + \u65b0\u589e'+this.text+" + ]</div>"),Ext.apply(this,Ext.apply(this.initialConfig,a)),SF.form.ObjectCombo.superclass.initComponent.apply(this,arguments)},onViewClick:function(a,b,c){SF.form.ObjectCombo.superclass.onViewClick.apply(this,arguments),Ext.fly(c).hasClass("x-combo-add-item")},renderer:function(a){return'<div class="hand">'+a+"</div>"}}),Ext.reg("objectcombo",SF.form.ObjectCombo),SF.form.FilterCombo=Ext.extend(Ext.form.ComboBox,{store:[],typeAhead:!0,typeAheadDelay:100,triggerAction:"all",emptyText:_("\u8f93\u5165\u8fc7\u6ee4\u6587\u672c "),maxLength:95,maxLengthText:_("\u8f93\u5165\u5185\u5bb9\u7684\u6700\u5927\u957f\u5ea6\u4e3a95\u4e2a\u5b57\u7b26"),selectOnFocus:!0,enableKeyEvents:!0,disableKeyFilter:!1,maxSelections:10,constructor:function(a){a=a?a:{},SF.form.FilterCombo.superclass.constructor.call(this,Ext.apply(a,a))},initComponent:function(){SF.form.FilterCombo.superclass.initComponent.apply(this,arguments)},onRender:function(){SF.form.FilterCombo.superclass.onRender.apply(this,arguments),this.mon(this,"keypress",this.onKeyPress,this,{buffer:250})},onKeyPress:function(a,b){var c=a.getKey();switch(SF.log(c),c){case 8:break;case 13:this.handleUpdate(a,b);break;case 27:this.setValue("")}this.fireEvent("change",this,this.getRawValue(),"")},initEvents:function(){SF.form.FilterCombo.superclass.initEvents.call(this),this.keyNav.disable()},handleUpdate:function(){var a=this.getStore(),b=/^\s*|\s*$/g,c=this.getRawValue().replace(b,"");if(!(c.length<=0)){for(var d=!1,e=0;e<a.getCount();e++)if(c===a.getAt(e).get("field1")){d=!0;break}d||a.loadData([c],!0)}},addItems:function(a){this.getStore().loadData(a,!0)}}),Ext.reg("filtercombo",SF.form.FilterCombo),SF.override(Ext.form.DateField,{format:"Y-m-d",formatText:"YYYY-MM-DD",altFormats:null,initComponent:function(){this.ctCls="x-date "+(this.ctCls||""),Ext.form.DateField.superclass.initComponent.call(this),this.addEvents("select"),Ext.isString(this.minValue)&&(this.minValue=this.parseDate(this.minValue)),Ext.isString(this.maxValue)&&(this.maxValue=this.parseDate(this.maxValue)),this.disabledDatesRE=null,this.initDisabledDays()},getJsonValue:function(){var a=this.getValue();return a&&a.format&&(a=a.format(this.format)),a},parseDate:function(a){if(!a||Ext.isDate(a))return a;var b=Date.parseDate(a,this.format,!0);if(!b&&this.altFormats){this.altFormatsArray||(this.altFormatsArray=this.altFormats.split("|"));for(var c=0,d=this.altFormatsArray.length;d>c&&!b;c++)b=Date.parseDate(a,this.altFormatsArray[c])}return b},validateValue:function(a){if(a=this.formatDate(a),!Ext.form.DateField.superclass.validateValue.call(this,a))return!1;if(a.length<1)return!0;var b=a;if(a=this.parseDate(a),!a)return this.markInvalid(String.format(this.invalidText,Ext.util.Format.htmlEncode(b),this.formatText||this.format)),!1;var c=a.getTime();if(this.minValue&&c<this.minValue.getTime())return this.markInvalid(String.format(this.minText,this.formatDate(this.minValue))),!1;if(this.maxValue&&c>this.maxValue.getTime())return this.markInvalid(String.format(this.maxText,this.formatDate(this.maxValue))),!1;if(this.disabledDays)for(var d=a.getDay(),e=0;e<this.disabledDays.length;e++)if(d===this.disabledDays[e])return this.markInvalid(this.disabledDaysText),!1;var f=this.formatDate(a);return this.disabledDatesRE&&this.disabledDatesRE.test(f)?(this.markInvalid(String.format(this.disabledDatesText,f)),!1):!0},onTriggerClick:function(){this.disabled||(null==this.menu&&(this.menu=new Ext.menu.DateMenu({hideOnClick:!1,focusOnSelect:!1})),this.onFocus(),Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue)),startDay:this.startDay}),this.menu.picker.setValue(this.getValue()||new Date),this.menu.show(this.el,"tl-bl?"),this.menuEvents("on"))}}),SF.ns("SF.form"),SF.form.NumberField=Ext.form.NumberField,SF.override(SF.form.NumberField,{maxValue:4294967295,minValue:-4294967296,defaultAutoCreate:{tag:"input",type:"text",size:"15",autocomplete:"off",maxLength:15}}),SF.ns("SF.form"),SF.form.DisplayField=Ext.form.DisplayField,Ext.override(SF.form.DisplayField,{isSingleLineField:!0,enableTitle:!0,onRender:function(){SF.form.DisplayField.superclass.onRender.apply(this,arguments),this.enableTitle&&(this.el.dom.title=this.value)},setValue:function(a){return this.value=a,this.setRawValue(a),this.rendered&&this.enableTitle&&(this.el.dom.title=a),this}}),function(){var a=Ext.form.TriggerField,b=a.prototype.triggerBlur;Ext.override(a,{setReadOnly:function(a){var b=a!=this.readOnly;Ext.form.TriggerField.superclass.setReadOnly.apply(this,arguments),b&&this.updateEditState()},updateEditState:function(){this.rendered&&(this.readOnly?(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this)):(this.editable?(this.el.dom.readOnly=!1,this.el.removeClass("x-trigger-noedit"),this.mun(this.el,"click",this.onTriggerClick,this)):(this.el.dom.readOnly=!0,this.el.addClass("x-trigger-noedit"),this.mon(this.el,"click",this.onTriggerClick,this)),this.trigger.setDisplayed(!this.hideTrigger)),this.onResize(this.width||this.wrap.getWidth()))},triggerBlur:function(){b.apply(this,arguments),this.el.blur()}})}(),Ext.ns("SF.grid"),SF.grid.BaseCellIcon=Ext.extend(Ext.util.Observable,{header:"",align:"center",dataIndex:"",name:null,tpl:null,width:60,icons:[],customRender:null,constructor:function(a){a=a?a:{},a.header&&(this.header=a.header,delete a.header),a.icons?(this.icons=a.icons,delete a.icons):this.icons=[],a.renderer&&(this.customRender=a.renderer,delete a.renderer),a.tpl?(this.tpl=a.tpl,delete a.tpl):this.tpl=new Ext.XTemplate('<div class="x-cellicon"> ','<tpl for="."> <img src="'+Ext.BLANK_IMAGE_URL+'" class="sf-ico x-cellicon-{iconCls} hand" actionName="{iconActionName}" title="{title}" />','<span class="x-cellicon-text" actionName="{actionName}"> {text} </span>',"</tpl></div>"),Ext.apply(this,a),SF.grid.BaseCellIcon.superclass.constructor.apply(this,arguments)},init:function(a){this.grid=a,this.remote=a.remote,this.name||(this.name=a&&a.name?a.name:""),a.on("render",this.onRender,this),a.on("destroy",this.onDestroy,this)},onRender:function(){},onDestroy:function(){},doRender:function(a){var b,c=[];Ext.isArray(a)||(a=[a]);for(var d=0,e=a.length;e>d;d++)b=Ext.apply({},a[d]),b.iconActionName||(b.iconActionName=b.iconCls),c.push(b);return this.tpl.apply(c)},renderer:function(a,b,c,d,e,f){return this.customRender?this.customRender.apply(this,arguments):this.doRender(this.icons,b,c,d,e,f)
}}),SF.grid.CellIconUpDown=Ext.extend(SF.grid.BaseCellIcon,{header:_("\u4e0a\u79fb/\u4e0b\u79fb"),dataIndex:"priority",width:100,constructor:function(a){Ext.apply(a,{icons:[{title:_("\u4e0a\u79fb")},{title:_("\u4e0b\u79fb")}]}),SF.grid.CellIconUpDown.superclass.constructor.apply(this,arguments)},doRender:function(a,b,c,d,e,f){var g=f.getCount();return a[0].iconCls="moveup",a[1].iconCls="movedown",0===d?a[0].iconCls="moveup-disable":d==g-1&&(a[1].iconCls="movedown-disable"),SF.grid.CellIconUpDown.superclass.doRender.apply(this,arguments)}}),Ext.preg("celliconupdown",SF.grid.CellIconUpDown),SF.grid.CellIconDelete=Ext.extend(SF.grid.BaseCellIcon,{header:_("\u5220\u9664"),dataIndex:"",constructor:function(a){Ext.apply(a,{icons:{iconCls:"delete",title:_("\u79fb\u9664\u4e00\u6761\u8bb0\u5f55")}}),SF.grid.CellIconDelete.superclass.constructor.apply(this,arguments)}}),Ext.preg("cellicondelete",SF.grid.CellIconDelete),SF.grid.CellIconStatus=Ext.extend(SF.grid.BaseCellIcon,{header:_("\u72b6\u6001"),dataIndex:"status",renderer:function(a){return this.doRender({iconCls:a?"enable":"disable",title:_(a?"\u5f53\u524d\u72b6\u6001\u4e3a[\u542f\u7528]\uff0c\u70b9\u51fb\u7981\u7528":"\u5f53\u524d\u72b6\u6001\u4e3a[\u7981\u7528]\uff0c\u70b9\u51fb\u542f\u7528")})}}),Ext.preg("celliconstatus",SF.grid.CellIconStatus),SF.grid.CellIconCheckbox=Ext.extend(SF.grid.BaseCellIcon,{header:_("\u542f\u7528"),dataIndex:"status",renderer:function(a){return this.doRender({iconCls:a?"check":"uncheck",iconActionName:a?"enable":"disable"})}}),Ext.preg("celliconcheckbox",SF.grid.CellIconCheckbox),SF.grid.CellIconGeneral=Ext.extend(SF.grid.BaseCellIcon,{header:"",dataIndex:""}),Ext.preg("cellicongeneral",SF.grid.CellIconGeneral),SF.grid.CellIconEdit=Ext.extend(SF.grid.BaseCellIcon,{header:_("\u7f16\u8f91"),dataIndex:"",renderer:function(){return this.doRender({iconCls:"edit"})}}),Ext.preg("celliconedit",SF.grid.CellIconEdit),Ext.ns("SF.grid"),SF.grid.CheckboxSM=Ext.extend(Ext.grid.CheckboxSelectionModel,{header:'<div class="x-grid3-hd-chker">&#160;</div>',onHdMouseDown:function(a,b){if("x-grid3-hd-chker"===b.className){a.stopEvent();var c=Ext.fly(b.parentNode),d=c.hasClass("x-grid3-hd-chker-on");d?(c.removeClass("x-grid3-hd-chker-on"),this.clearSelections()):(d=c.hasClass("x-grid3-hd-chker-reverse"),d?(c.removeClass("x-grid3-hd-chker-reverse"),c.addClass("x-grid3-hd-chker-on"),this.selectAll()):this.hasSelection()?(c.addClass("x-grid3-hd-chker-reverse"),this.selectReverse()):(c.addClass("x-grid3-hd-chker-on"),this.selectAll()))}},selectReverse:function(){var a,b;if(!this.isLocked())for(a=0,b=this.grid.store.getCount();b>a;a++)this.isSelected(a)?this.deselectRow(a,!1):this.selectRow(a,!0)}}),function(){Ext.grid.CheckboxSelectionModel=SF.sequenceConstructor(Ext.grid.CheckboxSelectionModel,function(){this._initSelectable()}),Ext.override(Ext.grid.CheckboxSelectionModel,{width:40,noSelectionKey:null,noSelectionFields:[],noSelectionRenderer:null,noSelectionFn:null,_initSelectable:function(){var a=this._noSelectionMap={};Ext.each(this.noSelectionFields,function(b){a[b]=!0})},_isRecordSelectable:function(a){var b=this.noSelectionKey,c=this.noSelectionFn,d=this._noSelectionMap;return b&&d.hasOwnProperty(a.get(b))?!1:c&&c(a)===!1?!1:!0},getSelections:function(a){var b,c,d,e,f=[],g=Ext.grid.CheckboxSelectionModel.superclass.getSelections.apply(this,arguments);if(g&&a){for(b=0;c=a[b];b++)for(d=0;e=g[d];d++)if(c===e){f.push(c);break}}else f=g;return f},renderer:function(a,b,c){var d='<div class="x-grid3-row-checker">&#160;</div>',e=this._isRecordSelectable(c);return e||(d=this.noSelectionRenderer?this.noSelectionRenderer.apply(this,arguments):"<div>&#160;-&#160;</div>"),c.selectAble=e,d},selectRow:function(a){var b=this.grid.store.getAt(a);this._isRecordSelectable(b)!==!1&&Ext.grid.CheckboxSelectionModel.superclass.selectRow.apply(this,arguments)},onMouseDown:function(a){if(0===a.button&&a.getTarget("td.x-grid3-td-checker",3)){a.stopEvent();var b=a.getTarget(".x-grid3-row");if(b){var c=b.rowIndex;this.isSelected(c)?this.deselectRow(c):this.selectRow(c,!0)}}}}),Ext.override(Ext.tree.MultiSelectionModel,{getSelectedNodes:function(a){var b,c,d,e,f=[],g=this.selNodes;if(a){for(b=0;c=a[b];b++)for(d=0;e=g[d];d++)if(c.id===e.id){f.push(c);break}}else f=g;return f}})}(),Ext.ns("SF.grid"),SF.grid.RowCellIconStatusEditor=Ext.extend(Ext.form.Checkbox,{setValue:function(a){SF.grid.RowCellIconStatusEditor.superclass.setValue.apply(this,arguments),this.value=a},getValue:function(){return this.value}}),Ext.ns("SF.grid"),SF.grid.RowEditor=Ext.extend(Ext.Panel,{floating:{zindex:8999},shadow:!1,layout:"hbox",cls:"x-small-editor",buttonAlign:"center",baseCls:"x-row-editor",elements:"header,footer,body",frameWidth:5,buttonPad:3,clicksToEdit:"auto",monitorValid:!0,focusDelay:250,errorSummary:!0,saveText:_("\u786e\u5b9a"),cancelText:_("\u53d6\u6d88"),commitChangesText:_('\u60a8\u5f97\u5148"\u786e\u5b9a"\u6216"\u53d6\u6d88"\u5bf9\u6570\u636e\u7684\u4fee\u6539\u3002'),errorText:_("\u63d0\u793a\uff1a"),defaults:{normalWidth:!0},addNewRow:null,setAddNewRow:function(a){this.addNewRow=a},getEditStatus:function(){return this.editing},initComponent:function(){SF.grid.RowEditor.superclass.initComponent.call(this),this.addEvents("beforeedit","canceledit","validateedit","afteredit")},init:function(a){this.grid=a,this.ownerCt=a,a.on("rowdblclick",this.onRowDblClick,this);var b=a.getStore(),c=function(){this.stopEditing(!1)};b.on({scope:this,remove:c,datachanged:c}),a.on({scope:this,keydown:this.onGridKey,columnresize:this.verifyLayout,columnmove:this.refreshFields,reconfigure:this.refreshFields,beforedestroy:this.beforedestroy,destroy:this.destroy,bodyscroll:{buffer:250,fn:this.positionButtons}}),a.getColumnModel().on("hiddenchange",this.verifyLayout,this,{delay:1}),a.getView().on("refresh",this.stopEditing.createDelegate(this,[]))},beforedestroy:function(){this.grid.getStore().un("remove",this.onStoreRemove,this),this.stopEditing(!1),Ext.destroy(this.btns)},refreshFields:function(){this.initFields(),this.verifyLayout()},isDirty:function(){var a;return this.items.each(function(b){if(b.isDirty)return b.isDirty();var c=b.getJsonValue?b.getJsonValue():b.getValue();return"undefined"!=typeof this.values[b.id]&&String(this.values[b.id])!==String(c)?(a=!0,!1):void 0},this),a},startEditing:function(a,b){if(this.editing&&this.isDirty())return void this.showTooltip(this.commitChangesText);if(Ext.isObject(a)&&(a=this.grid.getStore().indexOf(a)),this.fireEvent("beforeedit",this,a)!==!1){this.editing=!0;var c=this.grid,d=c.getView(),e=d.getRow(a),f=c.store.getAt(a);this.grid&&this.grid.getTopToolbar()&&this.grid.getTopToolbar().disable(),this.record=f,this.rowIndex=a,this.values={},this.rendered||this.render(d.getEditorParent());var g=Ext.fly(e).getWidth();this.setSize(g),this.initialized||this.initFields();for(var h,i,j=c.getColumnModel(),k=this.items.items,l=0,m=j.getColumnCount();m>l;l++)if(j.config[l].editor){if(this.addNewRow){var n=j.config[l].editor;i=SF.isDefined(n.defaultValue)?n.defaultValue:null}else i=this.preEditValue(f,j.getDataIndex(l));h=k[l],Ext.apply(h,{row:a,col:l,record:f}),SF.form.isJsonField(h)?h.setJsonValue(i):h.setValue(i),h.setOriginalValue&&h.setOriginalValue(),this.values[h.id]=Ext.isEmpty(i)?"":i}this.verifyLayout(!0),this.isVisible()?this.el.setXY(Ext.fly(e).getXY(),{duration:.15}):this.setPagePosition(Ext.fly(e).getXY()),this.isVisible()||this.show().doLayout(),b!==!1&&this.doFocus.defer(this.focusDelay,this)}},stopEditing:function(a){var b,c;if(!this.isVisible())return void(this.editing=!1);if(a===!1||!this.isValid()){if(a===!0){for(var d=[],e=this.grid.getColumnModel(),f=0,g=e.getColumnCount();g>f;f++)b=e.config[f],c=b.editor,c&&"function"==typeof c.getInvalid&&!c.validate()&&(c.translate?d=d.concat(SF.form.JsonForm.fly(c).getInvalidMsgs()):d.push(b.header+_("\uff1a")+c.getInvalid()));return void(d.length>0&&SF.showErr(d))}return this.hide(),this.addNewRow&&(this.grid.store.remove(this.addNewRow),this.setAddNewRow(null),this.grid.view.refresh()),this.fireEvent("canceledit",this,a===!1),this.editing=!1,void(this.grid&&this.grid.getTopToolbar()&&(this.grid.getTopToolbar().enable(),this.grid.setTbarEnable(this.grid.getSelectionModel(),0,[])))}for(var h,i={},j=this.record,k=!1,e=this.grid.colModel,l=this.items.items,f=0,g=e.getColumnCount();g>f;f++)if(e.config[f].editor&&(h=l[f],!e.isHidden(f))){var m=e.getDataIndex(f);if(!Ext.isEmpty(m)){var n,o=j.data[m];n=SF.form.isJsonField(h)?h.getJsonValue():h.getValue(),n=this.postEditValue(n,o,j,m),(e.config[f].disableCompare||!SF.compare(o,n))&&(i[m]=n,k=!0)}}if(k){if(this.fireEvent("validateedit",this,i,j,this.rowIndex)===!1)return;j.beginEdit(),Ext.iterate(i,function(a,b){j.set(a,b)}),j.endEdit(),this.fireEvent("afteredit",this,i,j,this.rowIndex)}this.setAddNewRow(null),this.editing=!1,this.hide(),this.grid&&this.grid.getTopToolbar()&&(this.grid.getTopToolbar().enable(),this.grid.setTbarEnable(this.grid.getSelectionModel(),0,[]))},verifyLayout:function(a){if(this.el&&(this.isVisible()||a===!0)){var b=this.grid.getView().getRow(this.rowIndex);this.setSize(Ext.fly(b).getWidth(),Ext.fly(b).getHeight()+9);for(var c=this.grid.colModel,d=this.items.items,e=0,f=c.getColumnCount();f>e;e++)if(c.isHidden(e))d[e].hide();else{var g=0;g+=e===f-1?3:1,d[e].show(),d[e].setWidth(c.getColumnWidth(e)-g)}this.doLayout(),this.positionButtons()}},slideHide:function(){this.hide()},initFields:function(){var a=this.grid.getColumnModel(),b=Ext.layout.ContainerLayout.prototype.parseMargins;this.removeAll(!1);for(var c=0,d=a.getColumnCount();d>c;c++){var e=a.getColumnAt(c),f=e.getEditor();f||(f=e.displayEditor||new Ext.form.DisplayField),f.margins=b(0==c?"0 1 2 1":c==d-1?"0 0 2 1":"0 1 2"),f.setWidth(a.getColumnWidth(c)),f.column=e,f.ownerCt!==this&&(f.on("focus",this.ensureVisible,this),f.on("specialkey",this.onKey,this)),this.insert(c,f)}this.initialized=!0},onKey:function(a,b){b.getKey()===b.ENTER&&(this.stopEditing(!0),b.stopPropagation())},onGridKey:function(a){if(a.getKey()===a.ENTER&&!this.isVisible()){var b=this.grid.getSelectionModel().getSelected();if(b){var c=this.grid.store.indexOf(b);this.startEditing(c),a.stopPropagation()}}},ensureVisible:function(a){this.isVisible()&&this.grid.getView().ensureVisible(this.rowIndex,this.grid.colModel.getIndexById(a.column.id),!0)},onRowClick:function(a,b,c){if("auto"==this.clicksToEdit){var d=this.lastClickIndex;if(this.lastClickIndex=b,d!=b&&!this.isVisible())return}this.startEditing(b,!1),this.doFocus.defer(this.focusDelay,this,[c.getPoint()])},onRowDblClick:function(a,b,c){this.startEditing(b,!1),this.doFocus.defer(this.focusDelay,this,[c.getPoint()])},onRender:function(){SF.grid.RowEditor.superclass.onRender.apply(this,arguments),this.el.swallowEvent(["keydown","keyup","keypress"]),this.btns=new Ext.Panel({baseCls:"x-plain",cls:"x-btns",elements:"body",layout:"table",width:2*this.minButtonWidth+2*this.frameWidth+4*this.buttonPad,items:[{ref:"saveBtn",itemId:"saveBtn",xtype:"button",text:this.saveText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!0])},{xtype:"button",text:this.cancelText,width:this.minButtonWidth,handler:this.stopEditing.createDelegate(this,[!1])}]}),this.btns.render(this.bwrap)},afterRender:function(){SF.grid.RowEditor.superclass.afterRender.apply(this,arguments),this.positionButtons(),this.monitorValid&&this.startMonitoring()},onShow:function(){this.monitorValid&&this.startMonitoring(),SF.grid.RowEditor.superclass.onShow.apply(this,arguments)},onHide:function(){SF.grid.RowEditor.superclass.onHide.apply(this,arguments),this.stopMonitoring();var a=this.grid.getStore();a.getAt(this.rowIndex)&&this.grid.getView().focusRow(this.rowIndex)},positionButtons:function(){if(this.btns){var a=this.grid,b=this.el.dom.clientHeight,c=a.getView(),d=c.scroller.dom.scrollLeft,e=this.btns.getWidth(),f=Math.min(a.getWidth(),a.getColumnModel().getTotalWidth());this.btns.el.shift({left:f/2-e/2+d,top:b-2,stopFx:!0,duration:.2})}},preEditValue:function(a,b){var c=a.data[b];return SF.isDefined(c)||(c=null),this.autoEncode&&"string"==typeof c?Ext.util.Format.htmlDecode(c):c},postEditValue:function(a){return this.autoEncode&&"string"==typeof a?Ext.util.Format.htmlEncode(a):a},doFocus:function(a){if(this.isVisible()){var b,c=0,d=this.grid.getColumnModel();a&&(c=this.getTargetColumnIndex(a));for(var e=c||0,f=d.getColumnCount();f>e;e++)if(b=d.getColumnAt(e),!b.hidden&&b.getEditor()){b.getEditor().focus();break}}},getTargetColumnIndex:function(a){var b,c=this.grid,d=c.view,e=a.left,f=c.colModel.config,g=0,h=!1;for(f.length;b=f[g];g++)if(!b.hidden&&Ext.fly(d.getHeaderCell(g)).getRegion().right>=e){h=g;break}return h},startMonitoring:function(){!this.bound&&this.monitorValid&&(this.bound=!0)},stopMonitoring:function(){this.bound=!1,this.tooltip&&this.tooltip.hide()},isValid:function(){var a=!0;return this.items.each(function(b){b.validate()||(a=!1)}),a},bindHandler:function(){if(!this.bound)return!1;var a=this.isValid();!a&&this.errorSummary&&this.showTooltip(this.getErrorText().join("")),this.btns.saveBtn.setDisabled(!a),this.fireEvent("validation",this,a)},showTooltip:function(){},getErrorText:function(){var a=["<ul>"];return this.items.each(function(b){b.validate()||a.push("<li>",b.invalidText,"</li>")}),a.push("</ul>"),a}}),Ext.preg("roweditor",SF.grid.RowEditor),Ext.ns("SF.grid"),function(){var a=Ext.grid.GridPanel.prototype,b=a.initComponent,c=a.onRender,d=a.getFrameHeight,e=a.destroy,f=a.applyState,g=a.getState;Ext.override(Ext.grid.GridPanel,{remote:!0,stripeRows:!0,border:!1,height:600,maxCount:0,allowBlank:!0,name:"Grid",viewConfig:{forceFit:!0},loadMask:!0,smartScroll:!0,stateful:!1,stateEvents:["columnmove","columnresize","sortchange","setfilter"],enableFilter:!1,filterField:"name",filterAnyMatch:!0,filterCaseSensitive:!1,filterCombo:null,enableFilterView:!1,tplFilterView:null,enableMultMove:!0,noMoveFields:["id"],keyField:"name",defaultAS:["delete","modify","edit","moveup","movedown","enable","disable","move"],topItemsContainer:null,enableButtonAction:!0,outerSort:!1,outerSortActionName:"sort",enableRowEditor:!1,rowEditorTop:!0,emptyErrorMsg:_("\u6ca1\u6709\u53ef\u4ee5\u663e\u793a\u7684\u6570\u636e"),initComponent:function(){!this.stateful||"undefined"!=typeof this.stateId&&null!==this.stateId||(this.stateId=this.getId(),SF.log('GG: stateId "'+this.stateId+'"')),this.plugins||(this.plugins=[]),this.initRowEditor&&this.initRowEditor(),this.initColumns&&this.initColumns(),this.initToolbar&&this.initToolbar(),this.initActions&&this.initActions(),this.enableRowEditor&&(this.enableColumnMove=!1),b.apply(this,arguments),this.enableAutoError&&this.store&&this.mon(this.store,"exception",this.handleStoreException,this),this.addEvents("setfilter")},destroy:function(){this.enableFilterView&&Ext.destroy(this.tplFilterView,this.filterView),this.enableFilter,e.apply(this,arguments)},initActions:function(){this.mon(this,"cellclick",this.onCellClicked,this)},initRowEditor:function(){this.enableRowEditor&&(this.editor=new SF.grid.RowEditor,this.rowEditorValidate&&"function"==typeof this.rowEditorValidate&&this.editor.on("validateedit",this.rowEditorValidate,this),this.plugins.push(this.editor))},modifyValue:function(a,b,c){Ext.each(a,function(a){a.data[b]=c}),this.view.refresh()},initColumns:function(){var a=[];this.columns?a=this.columns:this.cm?a=this.cm.columns:this.colModel&&(a=this.colModel.columns);for(var b=0;b<a.length;b++){var c=a[b];if(c.ptype){var d=Ext.ComponentMgr.createPlugin(c);a[b]=d,this.plugins.push(d)}}},initToolbar:function(){if(this.tbar){for(var a=this.tbar.items,b=[],c=0;c<a.length;c++){var d=a.items[c];"objectcombo"===d.xtype&&(b.push(Ext.ComponentMgr.create({text:_("\u4fee\u6539")+d.text,xtype:"tbtext"})),this.mon(d,"select",this.onTbarObjectCombo,this));var e=this.defaultAS;(d.selectMust===!0||Ext.isFunction(d.selectMust)||d.selectMust!==!1&&e.indexOf(d.actionName)>=0)&&(this.enableSelectMust=!0),b.push(d)}this.enableFilter&&!this.filterCombo&&(b.push(Ext.ComponentMgr.create({xtype:"tbfill"})),b.push(Ext.ComponentMgr.create({xtype:"tbtext",text:_("\u8fc7\u6ee4\uff1a")})),this.filterCombo=Ext.ComponentMgr.create({xtype:"filtercombo"}),this.mon(this.filterCombo,"change",this.onFilterChange,this),this.mon(this.filterCombo,"blur",this.onFilterBlur,this),this.mon(this.filterCombo,"keyup",this.handleFilterOperation,this),b.push(this.filterCombo)),this.tbar.items.addAll(b)}},_updateTbarButtonDisabled:function(){var a,b,c,d,e,f,g,h,i;if(this.enableRowEditor&&this.editor.isVisible())return!0;if(a=this.getTopToolbar()){for(b=this._isRecordSelected(),c=this.defaultAS,d={},f=0;f<c.length;f++)d[c[f]]=!0;for(e=a.items.items,f=0;f<e.length;f++)g=e[f],h=g.selectMust,i=g.actionName,g.setDisabled&&(Ext.isFunction(h)?g.setDisabled(!h(this,g)):Ext.isNumber(h)&&h>0?g.setDisabled(this.getSelectionModel().getCount()<h):(h===!0||h!==!1&&i&&d[i])&&g.setDisabled(!b))}},_isRecordSelected:function(){var a=this.getSelectionModel();return a.getCount()>0},initTbarOperator:function(){this.enableSelectMust===!0&&(this._updateTbarButtonDisabled(),this.getSelectionModel().on("selectionchange",this._updateTbarButtonDisabled,this,{buffer:10}))},onTbarObjectCombo:function(a,b){for(var c=b.get(a.displayField),d=this.getSelections(),e=0;d&&c&&e<d.length;e++)d[e].set(a.dataIndex,c)},handleFilterOperation:function(a){var b=a.tmpRawValue||a.startValue,c=a.getRawValue();b!==c&&(a.tmpRawValue=c,this.onFilterChange(a,c,b))},onFilterBlur:function(a){delete a.tmpRawValue},onFilterChange:function(a,b){this.filterTask||(this.filterTask=new Ext.util.DelayedTask(function(a){var b,c=this.filterField,d=this.getStore(),e=this.filterAnyMatch,f=this.filterCaseSensitive;d&&(Ext.isArray(c)?Ext.isEmpty(a,!1)?d.clearFilter():(b=d.data.createValueMatcher(a,e,f),d.filterBy(function(a){var d,e=a.data;for(d=0;d<c.length;d++)if(b.test(e[c[d]]))return!0;return!1})):d.filter(c,a,e,f),SF.log("do local filter"))},this)),this.filterTask.delay(50,null,null,[b])},onCellClicked:function(a,b,c,d){var e=d.getTarget(String.format("[{0}]",this.actionPropertyName),this.el);if(e){var f=Ext.get(e),g=f.getAttribute("actionName");g&&this.handleCellClickAction(g,a,b,c,d,{})}},updateFilterView:function(a,b){a&&(this.tplFilterView=a),b=b||this.filterInfo,this.filterInfo=b,this.rendered&&this.tplFilterView.overwrite(this.filterView,b)},appendRender:function(){var a;(this.enableFilterView||this.topItemsContainer)&&(this.topItemsContainer&&(a=this.body.createChild({tag:"div",cls:"x-panel-filter-view"},this.body),this.topItemsContainer.render(a)),this.enableFilterView&&(a=this.body.createChild({tag:"div",cls:"x-panel-filter-view"},this.body),this.filterView=a,this.tplFilterView||(this.tplFilterView=new Ext.XTemplate('<div class="x-panel-filter-key">\u9644\u52a0\u6761\u4ef6:</div>','<tpl for="."><DL>','<DT class="x-panel-filter-key">{key}:</DT> ','<DD class="x-panel-filter-value">{value}</DD>',"</DL></tpl>")),this.updateFilterView()))},onRender:function(){c.apply(this,arguments),this.mon(this,"syncsm",this.doSyncSelections,this),this.appendRender(),this.initTbarOperator()},getFrameHeight:function(){var a=d.call(this);return this.filterView&&(a+=this.filterView.getHeight()),a},getSelections:function(){var a=this.getStore().getRange();return this.getSelectionModel().getSelections(a)},handleCellClickAction:function(a,b,c,d,e,f){return f.rs=[b.getStore().getAt(c)],f.row=c,f.col=d,f.src="cell",b.fireAction(a,f,e),!0},getButtonActionOptions:function(){var a=Ext.grid.GridPanel.superclass.getButtonActionOptions.apply(this,arguments);return SF.apply(a,{rs:this.getSelections(),src:"tbar"})},beforeAction:function(a,b,c){if(b.grid=this,("moveup"===a||"movedown"===a)&&this.enableMultMove===!1&&b.rs.length>1)return SF.alert(_("\u4e0d\u80fd\u5bf9\u591a\u6761\u8bb0\u5f55\u8fdb\u884c\u79fb\u52a8\u64cd\u4f5c.")),!1;if(b&&b.src&&"tbar"===b.src){var d=this.defaultAS;if(d.indexOf(a)>=0&&(!b.rs||b.rs.length<1))return SF.showErr(_("\u672a\u9009\u62e9\u4efb\u4f55\u64cd\u4f5c\u5bf9\u8c61")),!1}return this.remote?!0:this.onGridActions(a,this,b,c)},onGridActions:function(a,b,c){var d,e=c.rs;switch(a){case"add":b.onAdd();break;case"delete":b.onDelete(b,e);break;case"enable":case"disable":d="enable"===a,"tbar"!==c.src&&(d="enable"!==a),b.setStatus(b,e,d,c);break;case"moveup":b.onMoveUp(b,e,c);break;case"movedown":b.onMoveDown(b,e,c);break;case"editrecord":this.editor.startEditing(c.row)}},onAdd:function(){if(this.enableRowEditor)if(this.editor.editing)this.editor.showTooltip(this.commitChangesText=_("\u60a8\u5f97\u5148\u4fdd\u5b58\u6216\u53d6\u6d88\u5bf9\u6570\u636e\u7684\u4fee\u6539\u3002"));else{var a=this.store,b=0,c=new a.recordType;if(b=a.getCount(),this.maxCount>0&&b>=this.maxCount)return SF.showErr(_("\u6700\u591a\u53ea\u80fd\u6dfb\u52a0{0}\u6761\u6570\u636e\uff01",this.maxCount)),!1;a.insert(b,c),this.editor.setAddNewRow(c),this.view.refresh(),this.editor.startEditing(b),this.editor.rendered&&this.editor.el.scrollIntoView(this.view.scroller)}},onDelete:function(a,b){for(var c=0;b&&c<b.length;c++)a.getStore().remove(b[c]);a.view.refresh()},onMoveUp:function(a,b,c){this.moveUpDown(a,b,-1,c)},onMoveDown:function(a,b,c){this.moveUpDown(a,b,1,c)},setStatus:function(a,b,c,d){var e=this.getFieldName(d.col);e||(e="status");for(var f=0;b&&f<b.length;f++)b[f].set(e,c)},swapRecords:function(a,b,c){var d=b.get(c);b.set(c,a.get(c)),a.set(c,d)},doSyncSelections:function(){for(var a=this.getSelectionModel(),b=a.getSelections(),c=[],d=0;d<b.length;d++)c.push(b[d].get(this.keyField));var e=function(a,b,c){var d=[];c.clearSelections();for(var e=0;e<a.length;e++)for(var f=b.getRange(),g=0;g<f.length;g++)if(a[e]===f[g].get(this.keyField)){d.push(f[g]);break}c.selectRecords(d)};e.defer(100,this,[c,this.getStore(),a])},swapRecord:function(a,b){var c,d,e=a.data;for(c in e)if(e.hasOwnProperty(c)){if(this.noMoveFields.indexOf(c)>=0)continue;d=a.get(c),a.data[c]=b.get(c),b.data[c]=d}},doMoveUpDown:function(a,b,c){var d=b.indexOf(c),e=d+a;return 0>d||0>e||e>=b.getCount()?!1:(b.removeAt(d),b.insert(e,c),!0)},moveUpDown:function(a,b,c){if(!b)return!1;var d,e=this.getStore(),f=0>c?0:b.length-1;if(this.store.suspendEvents(!1),b.length!==e.getCount())for(;f>=0&&f<b.length;f-=2*c)d=b[f],this.doMoveUpDown(c,e,d,b),this.doMoveUpDown(c,e,b[f-c],b);else{var g,h,i;0>c?(g=0,h=e.getCount()-1):(g=e.getCount()-1,h=0),i=e.getAt(g),e.removeAt(g),e.insert(h,i)}this.store.resumeEvents(),this.view.refresh()},getFieldName:function(a){return a?this.getColumnModel().getDataIndex(a):null},insert:function(a,b){if(a){var c,d,e,f,g,h,i,j,k,l,m=[];if(c=this.getStore(),d=c.reader,f=d instanceof Ext.data.JsonReader?"json":"node",l=d.meta.idProperty,e=d.recordType,g=e.prototype.fields,b=b||0,c){for(a=[].concat(a),h=0,i=a.length;i>h;h++)j=a[h],j instanceof Ext.data.Record?m.push(j):(k=l?new e(j,j[l]):new e(j),k[f]=j,m.push(k));m=m.reverse(),c.insert(b,m)}}},setFilter:function(a,b){return SF.log("GG: set filter "+Ext.util.JSON.encode(a)+(b?"append":"replace")),b?(this.appendFilter(a),!0):(this.getStore().filterGrid=a,void this.fireEvent("setfilter"))},appendFilter:function(a){var b=this.getFilter();Ext.isFunction(b)?b=a:(b=Ext.isObject(b)?b:{},b=SF.apply(b,a)),this.setFilter(b)},getFilter:function(){return this.getStore().filterGrid},applyState:function(a){a.filterData&&(this.getStore().filterGrid=a.filterData);var b=SF.apply({},a);delete b.filterData,f.call(this,b)},getState:function(){var a=g.apply(this,arguments);return a=a||{},a.filterData=this.getFilter(),a},getUrl:function(){return this.store.url},createRecord:function(a){return new this.store.recordType(a)},reload:function(a){return this.store.reload(a)},setJsonValue:function(a){var b=this.getStore();b&&(b.suspendEvents(),b.snapshot&&(b.data=b.snapshot,delete b.snapshot),b.clearData(),a&&this.insert(a,0),b.applySort(),b.resumeEvents(),b.fireEvent("datachanged",b))},getJsonValue:function(a){var b=[],c=[];b=a?this.getSelections():this.getStore().getRange();for(var d=0;b&&d<b.length;d++)c[c.length]=b[d].data;return c},validate:function(){if(this.clearInvalid(),this.editor&&this.editor.editing||this.editing&&this.activeEditor)return this.markInvalid(_("\u5f53\u524d\u6b63\u5904\u4e8e\u7f16\u8f91\u72b6\u6001\uff01")),!1;var a=this.getJsonValue();if(this.allowBlank===!1&&a.length<=0)return this.markInvalid(_("\u60a8\u5fc5\u987b\u81f3\u5c11\u6dfb\u52a0\u4e00\u6761\u6570\u636e\uff01")),!1;var b=this.maxCount;if(b>0&&a.length>b)return this.markInvalid(_("\u6570\u636e\u4e0d\u80fd\u8d85\u8fc7{0}\u6761\uff01\uff08\u5f53\u524d\u6709{1}\u6761\uff09",b,a.length)),!1;var c;return this.validator&&(c=this.validator(a),Ext.isString(c))?(this.markInvalid(c),!1):!0},isDirty:function(){var a=this.getJsonValue(),b=this.originalValue||{};return!SF.compare(a,b)},getView:function(){var a;return this.view||(a=this.viewClass||Ext.grid.GridView,this.view=new a(this.viewConfig)),this.view},handleStoreException:function(a,b,c,d,e){var f=this.emptyErrorMsg,g=e.getJsonData?e.getJsonData():e.raw;g?g.msg&&(f=g.msg):f=_("\u670d\u52a1\u5668\u6216\u7f51\u7edc\u7e41\u5fd9"),this.showInfo(f)},deferShowInfo:function(){this.bufferErrorMsg&&this.store.getCount()<=0&&(this.showInfo(this.bufferErrorMsg),delete this.bufferErrorMsg)},showInfo:function(a){var b;this.viewReady?(b=this.view.emptyText,this.view.emptyText=a,this.store.removeAll(),this.view.emptyText=b):(this.bufferErrorMsg=a,this.on("viewready",this.deferShowInfo,this,{single:!0}))},clearInfo:function(){this.view.applyEmptyText()},setSortState:function(a){var b=this;b.outerSort?this.sortInfo=a:b.getStore().sort(a.field,a.direction)},getSortState:function(){var a=this,b=a.store;return a.outerSort?this.sortInfo:b.getSortState()}})}(),Ext.grid.GridPanel.prototype.showErr=Ext.grid.GridPanel.prototype.showInfo,Ext.grid.GridPanel.prototype.setTbarEnable=Ext.grid.GridPanel.prototype._updateTbarButtonDisabled,SF.grid.GeneralGrid=Ext.grid.GridPanel,Ext.reg("generalgrid",SF.grid.GeneralGrid),SF.grid.GeneralEditorGrid=Ext.extend(Ext.grid.EditorGridPanel,{clicksToEdit:1,name:"Grid",getJsonValue:function(a){var b=[],c=[];b=a?this.getSelections():this.getStore().getRange();for(var d=0;b&&d<b.length;d++){var e=b[d].data;c[c.length]=e}return c}}),Ext.reg("generaleditorgrid",SF.grid.GeneralEditorGrid),function(){var a=Ext.grid.GridView.prototype,b=a.initData,c=a.initTemplates;Ext.override(Ext.grid.GridView,{emptyText:_("\u6ca1\u6709\u53ef\u4ee5\u663e\u793a\u7684\u6570\u636e"),initTemplates:function(){var a=this.templates=this.templates||{};a.hcell||(a.hcell=new Ext.XTemplate('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}"><div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}",'<tpl if="sortable.ASC || sortable.DESC">','<img class="x-grid3-sort-icon ','<tpl if="!sortable.DESC">x-grid3-sort-icon-asc </tpl>','<tpl if="!sortable.ASC">x-grid3-sort-icon-desc </tpl>','" src="',Ext.BLANK_IMAGE_URL,'" />',"</tpl>","</div></td>")),c.apply(this,arguments)},renderHeaders:function(){for(var a=this.cm,b=this.templates,c=b.hcell,d=[],e={},f=a.getColumnCount(),g=f-1,h=0;f>h;h++)e.id=a.getColumnId(h),e.value=a.getColumnHeader(h)||"",e.style=this.getColumnStyle(h,!0),e.tooltip=this.getColumnTooltip(h),e.css=0===h?"x-grid3-cell-first ":h==g?"x-grid3-cell-last ":"",e.css=e.css+(a.getColumnAt(h).sortable?" x-grid3-cell-sortable":" "),e.sortable=a.getSortable(h),"right"==a.config[h].align?e.istyle="padding-right:16px":delete e.istyle,d[d.length]=c.apply(e);return b.header.apply({cells:d.join(""),tstyle:"width:"+this.getTotalWidth()+";"})},beforeStoreLoad:function(){var a,b,c=this.grid.getStore();if(c){a=c.getCount(),b=a/10,b=b>1?Math.round(b):1,this.smartScrollRecord=[];for(var d=0;a>d;d+=b){var e=c.getAt(d);this.smartScrollRecord.push(e.id)}return this.scrollState=this.getScrollState(),this.scrollState.height=this.mainBody.getHeight(),!0}},initData:function(a){this.grid.smartScroll&&this.ds&&this.ds.un("beforeload",this.beforeStoreLoad,this),b.apply(this,arguments),this.grid.smartScroll&&a&&a.on({scope:this,beforeload:this.beforeStoreLoad})},needSmartScroll:function(a,b){var c=a.getCount(),d=0;if(!c||!b.length)return!1;for(var e=0;e<b.length&&!d;e++)-1!=a.indexOfId(b[e])&&d++;return d?!0:!1},onLoad:function(){var a=this.grid,b=this.grid.getStore();if(this.smartScrollRecord=this.smartScrollRecord||[],a.smartScroll&&this.needSmartScroll(b,this.smartScrollRecord)){var c=this.scrollState.top,d=this.scrollState.height,e=this.mainBody.getHeight(),f=Math.round(c*e/d);return this.scrollState.top=f,this.restoreScroll(this.scrollState),!0}clearTimeout(this.scrollTimer),this.scrollTimer=this.scrollToTop.defer(Ext.isGecko?1:0,this)},afterRender:function(){this.ds&&this.cm&&(this.mainBody.dom.innerHTML=this.renderRows()||"&#160;",this.processRows(0,!0),(this.ds.loaded||this.ds.datachanged)&&this.applyEmptyText(),this.updateAllColumnWidths(),this.grid.fireEvent("viewready",this.grid),this.viewReady=!0)},applyEmptyText:function(){this.emptyText&&!this.hasRows()?(this.mainBody.update('<table class="x-grid-empty" width="100%"><tr><td style="vertical-align:middle;text-align:center;">'+this.emptyText+"</td></tr></table>"),this.emptyTextEl=this.mainBody.child(">table.x-grid-empty"),this.emptyTextEl.setHeight(this.scroller.getComputedHeight())):this.emptyTextEl=null},onLayout:function(a,b){this.emptyTextEl&&this.emptyTextEl.setHeight(b)},destroy:Ext.grid.GridView.prototype.destroy.createSequence(function(){clearTimeout(this.scrollTimer),this.scrollTimer=null}),handleHdDown:function(a,b){var c,d;if(Ext.fly(b).hasClass("x-grid3-hd-btn")){a.stopEvent();var e=this.findHeaderCell(b);Ext.fly(e).addClass("x-grid3-hd-menu-open");var f=this.getCellIndex(e);this.hdCtxIndex=f;var g=this.hmenu.items,h=this.cm;d=h.getSortable(f),g.get("asc")[d.ASC?"show":"hide"](),g.get("desc")[d.DESC?"show":"hide"](),this.grid.enableColumnHide!==!1&&(c=g.itemAt(2),c instanceof Ext.menu.Separator&&c[d.ASC||d.DESC?"show":"hide"]()),this.hmenu.on("hide",function(){Ext.fly(e).removeClass("x-grid3-hd-menu-open")},this,{single:!0}),this.hmenu.show(b,"tl-bl?")}},handleHdMenuClick:function(a){var b,c,d=this.hdCtxIndex,e=this.cm,f=this.grid,g=this.ds,h=a.getItemId();switch(h){case"asc":case"desc":b=e.getDataIndex(d),c=h.toUpperCase(),f.outerSort?f.fireAction(f.outerSortActionName,{field:b,direction:c},null):g.sort(b,c);break;default:if(d=e.getIndexById(h.substr(4)),-1!=d){if(a.checked&&e.getColumnsBy(this.isHideableColumn,this).length<=1)return this.onDenyColumnHide(),!1;e.setHidden(d,a.checked)}}return!0},onHeaderClick:function(a,b){var c=this.cm.getSortable(b);if(!this.headersDisabled&&(c.ASC||c.DESC)){a.stopEditing(!0);var d,e=a.store,f=a.getSortState(),g=f?f.direction.toUpperCase():"",h=f?f.field:null,i=this.cm.getDataIndex(b);if(i!==h)d=c.ASC?"ASC":"DESC";else if(d=g.toggle("ASC","DESC"),!c[d])return;a.outerSort?a.fireAction(a.outerSortActionName,{field:i,direction:d},null):e.sort(i,d)}},updateHeaderSortState:function(){var a=this.grid.getSortState();if(a){this.sortState&&this.sortState.field==a.field&&this.sortState.direction==a.direction||this.grid.fireEvent("sortchange",this.grid,a),this.sortState=a;var b=this.cm.findColumnIndex(a.field);if(-1!=b){var c=a.direction;this.updateSortIcon(b,c)}}},handleHdOver:function(a,b){var c=this.findHeaderCell(b);if(c&&!this.headersDisabled&&(!Ext.isIE||c.firstChild.offsetHeight>0)){this.activeHdRef=b,this.activeHdIndex=this.getCellIndex(c);var d=this.fly(c);this.activeHdRegion=d.getRegion(),this.cm.isMenuDisabled(this.activeHdIndex)||(this.activeHdBtn=d.child(".x-grid3-hd-btn"),this.activeHdBtn&&(this.activeHdBtn.dom.style.height=c.firstChild.offsetHeight-1+"px"))}}})}(),Ext.grid.ColumnModel.defaultRenderer=function(a){return"string"==typeof a&&a.length<1?"&#160;":["<span title='",Ext.util.Format.htmlEncode(a),"'>",a,"</span>"].join("")},Ext.override(Ext.grid.ColumnModel,{getSortable:function(a){var b=this.config[a].sortable,c={};if("string"==typeof b)switch(b=b.toUpperCase()){case"ASC":return c.ASC=!0,c;
    case"DESC":return c.DESC=!0,c}return c.ASC=c.DESC=!!b,c},isSortable:function(a,b){var c=this.getSortable(a);return b?(b=(""+b).toUpperCase(),c[b]):c.ASC||c.DESC},addColumn:function(a,b){"string"==typeof a&&(a={header:a,dataIndex:a});var c=this.config;return this.config=[],"number"==typeof b?c.splice(b,0,a):b=c.push(a),this.setConfig(c),b},removeColumn:function(a){var b=this.config;this.config=[b[a]],b.splice(a,1),this.setConfig(b)},getColumnTooltip:function(a){var b=this.config[a];return Ext.util.Format.htmlEncode(b.tooltip||b.header)}}),Ext.ns("SF.tree"),SF.tree.LightTree=Ext.extend(Ext.BoxComponent,{traceClass:"x-tree-node-over",disabledClass:"tree-node-disable",selectedClass:"x-tree-selected",caseSensitive:!0,rootVisible:!0,autoScroll:!0,initTpl:function(){this.tree_tpl=new Ext.XTemplate('<ul class="x-tree-root-ct x-tree-lines">','<li class="x-tree-node">','<div class="x-tree-root x-tree-node-el x-unselectable x-tree-node-expanded" expanded="0" disabledNode="{disabled}"',this.rootVisible?">":' style="display:none">',"{[values.leaf?this.leaf_img:this.not_leaf_img]}",'<img class="x-tree-checknode-icon {checked:this.check}" src="'+Ext.BLANK_IMAGE_URL+'" />','<span unselectable="on">{text}</span>',"</div>","</li>","</ul>"),this.tree_tpl.leaf_img='<img class="x-tree-ec-icon  x-tree-elbow-end-minus" src="'+Ext.BLANK_IMAGE_URL+'" />',this.tree_tpl.not_leaf_img='<img class="x-tree-ec-icon tree-has-child x-tree-elbow-end-plus" src="'+Ext.BLANK_IMAGE_URL+'" />',this.tree_tpl.check=function(a){var b=["x-tree-icon-select-none","x-tree-icon-select-all","x-tree-icon-select-part"];return b[a||0]},this.node_tpl=new Ext.XTemplate('<ul class="x-tree-node-ct ">','<tpl for="children">','<li class="x-tree-node">','<div class="x-tree-node-el {level} x-unselectable x-tree-node-expanded" index="{[xindex]}" expanded="0" disabledNode="{disabled}">','<span class="x-tree-node-indent">',"{parent.indent}","</span>",'<img class="x-tree-ec-icon {parent.children.length:this.isLeaf}" src="'+Ext.BLANK_IMAGE_URL+'" />','<img class="x-tree-checknode-icon {checked:this.check}" src="'+Ext.BLANK_IMAGE_URL+'" />','<span unselectable="on">{text}</span>',"</div>","</li>","</tpl>","</ul>"),this.node_tpl.isLeaf=function(a,b){return b.leaf?b.index==a-1?"x-tree-elbow-end":"x-tree-elbow":b.index==a-1?"tree-has-child x-tree-elbow-end-plus":"tree-has-child x-tree-elbow-plus"},this.node_tpl.check=function(a){var b=["x-tree-icon-select-none","x-tree-icon-select-all","x-tree-icon-select-part"];return b[a||0]}},initComponent:function(){SF.tree.LightTree.superclass.initComponent.call(this),this.data||(this.data={text:_("\u52a0\u8f7d\u4e2d,\u8bf7\u7a0d\u5019..."),leaf:!1,disabled:0,checked:0,children:[]}),this.stateStyle=["x-tree-icon-select-none","x-tree-icon-select-all","x-tree-icon-select-part"],this.viewChanged=0,this.addEvents("clickcheck","clicknode"),this.initTpl(),this.modelData=this.viewData=this.data,this.hasValueHashPath=!1},onRender:function(a,b){SF.tree.LightTree.superclass.onRender.call(this,a,b),this.tree_tpl.overwrite(this.el,this.viewData),this.viewData.indent=this.rootVisible?'<img class="x-tree-icon" src="'+Ext.BLANK_IMAGE_URL+'" />':"";var c=this.el.child("div.x-tree-root");!this.data.leaf&&this.data.children&&this.expand(c),this.mon(this.el,"click",this.delegateClick,this,{delegate:".x-tree-node-el"}),this.mon(this.el,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut,delegate:".x-tree-node-el"})},delegateClick:function(a,b){var c=Ext.get(b),d=c.getAttribute("disabledNode");if("1"!=d)if(a.getTarget("img.x-tree-checknode-icon",1)){if("2"==d)return;this.checkClick(a,b)}else if(a.getTarget(".x-tree-ec-icon",1))this.iconClick(a,b);else{if("2"==d)return;for(var e=this.getViewPath(c),f=this.viewData,g=0;g<e.length;g++)f=f.children[e[g]];e=this.getModelPathByViewPath(e),this.selectNode(c),this.fireEvent("clicknode",e,f.leaf)}},selectNode:function(a){this.lastSelect&&this.lastSelect.removeClass(this.selectedClass),a.addClass(this.selectedClass),this.lastSelect=a},delegateOver:function(a,b){var c=Ext.get(b),d=c.getAttribute("disabledNode");if("1"==d||"2"==d){if(c.addClass(this.disabledClass),"1"==d){var e=c.down("img.x-tree-ec-icon");e.addClass(this.disabledClass)}}else c.addClass(this.traceClass)},delegateOut:function(a,b){var c=Ext.get(b),d=c.getAttribute("disabledNode");if("1"==d||"2"==d){if(c.removeClass(this.disabledClass),"1"==d){var e=c.down("img.x-tree-ec-icon");e.removeClass(this.disabledClass)}}else c.removeClass(this.traceClass)},getViewPath:function(a){for(var b=[],c=a;c&&!c.hasClass("x-tree-root");c=Ext.get(c))b.unshift(c.getAttribute("index")-1),c=c.up("ul").up("li").down("div.x-tree-node-el");return b},getModelPathByViewPath:function(a){if(!this.viewChanged)return a;for(var b=[],c=this.viewData,d=a.length,e=c.stop,f=0;d>f;f++)e?b.push(a[f]):(c=c.children[a[f]],b.push(c.modelLink.index),e=c.stop);return b},iconClick:function(a,b){var c=Ext.get(b),d=c.down("img.x-tree-ec-icon");d.hasClass("tree-has-child")&&(d.hasClass("x-tree-elbow-plus")||d.hasClass("x-tree-elbow-end-plus")?this.expand(c):this.collapse(c))},checkClick:function(a,b){var c=Ext.get(b),d=c.down("img.x-tree-checknode-icon"),e=d.hasClass("x-tree-icon-select-all")?0:1,f=this.getViewPath(c);f=this.getModelPathByViewPath(f),this.updateData(f,e),this.updateUI(c,f),this.fireEvent("clickcheck",f,e)},collapse:function(a){var b=a.down("img.x-tree-ec-icon");b.hasClass("x-tree-elbow-minus")?b.replaceClass("x-tree-elbow-minus","x-tree-elbow-plus"):b.replaceClass("x-tree-elbow-end-minus","x-tree-elbow-end-plus");var c=a.up("li").down("ul.x-tree-node-ct");c.setDisplayed(!1)},expand:function(a){var b=a.up("li"),c=a.down("img.x-tree-ec-icon");c.hasClass("x-tree-elbow-plus")?(c.removeClass("x-tree-elbow-plus"),c.addClass("x-tree-elbow-minus")):(c.removeClass("x-tree-elbow-end-plus"),c.addClass("x-tree-elbow-end-minus"));var d=a.getAttribute("expanded");if("1"==d){var e=b.down("ul.x-tree-node-ct");return void e.setDisplayed(!0)}for(var f=this.getViewPath(a),g=this.viewData,h=0;h<f.length;h++){if(!g.children)return;g=g.children[f[h]]}var i="x-tree-node-level"+(f.length+1);if(g.children){f.length>0&&(g.indent=g.index<g.parent.children.length-1?g.parent.indent+'<img class="x-tree-elbow-line" src="'+Ext.BLANK_IMAGE_URL+'" />':g.parent.indent+'<img class="x-tree-icon" src="'+Ext.BLANK_IMAGE_URL+'" />');for(var j=g.children.length,k=g.children,h=0;j>h;h++)k[h].index=h,k[h].parent=g,k[h].level=i;this.node_tpl.append(b,g),a.dom.setAttribute("expanded","1")}},setDataTree:function(a,b){if(a.checked!=b&&(a.checked=b,a.viewLink&&(a.viewLink.checked=a.checked),!a.leaf&&a.children&&a.children.length))for(var c=a.children,d=c.length-1;d>=0;d--)this.setDataTree(c[d],b)},getNodeByPath:function(a){var b,c=this.modelData;for(b=0;b<a.length;b++)c=c.children[a[b]];return c},updateData:function(a,b){for(var c=this.modelData,d=[c],e=0;e<a.length;e++)c=c.children[a[e]],d.push(c);this.setDataTree(c,b);for(var e=d.length-2;e>=0;e--){for(var f=d[e],g=f.children.length-1;g>=0&&f.children[g].checked==b;g--);f.checked=0>g?b:2,f.viewLink&&(f.viewLink.checked=f.checked)}},setUITree:function(a,b,c){var d=a.down("img.x-tree-checknode-icon"),e=0;if(d.hasClass("x-tree-icon-select-all")?e=1:d.hasClass("x-tree-icon-select-part")&&(e=2),e!=b&&(this.setCheckbox(d,b),2!=b&&"0"!=a.getAttribute("expanded"))){var f=new Ext.CompositeElementLite;f.fill(Ext.query("div.x-tree-node-level"+(c+1),a.up("li").dom));for(var g=f.getCount()-1;g>=0;g--)this.setUITree(f.item(g),b,c+1)}},updateUI:function(a,b){for(var c=[],d=a;!d.hasClass("x-tree-root");){if(d=Ext.get(d.up("ul").up("li").down("div.x-tree-node-el")),!d)return;c.unshift(d)}var e=this.modelData,f=b.length;if(f==c.length){for(var g,h=0;f>h;h++)g=c[h].down("img.x-tree-checknode-icon"),this.setCheckbox(g,e.checked),e=e.children[b[h]];this.setUITree(a,e.checked,f)}},getState:function(a){return a.hasClass("x-tree-icon-select-none")?0:a.hasClass("x-tree-icon-select-all")?1:2},expandDepthIn:function(a,b,c){this.expand(b);var d=new Ext.CompositeElementLite;d.fill(Ext.query("div.x-tree-node-level"+(c+1),b.up("li").dom));for(var e=d.getCount()-1;e>=0;e--)a.children[e].leaf||a.children[e].stop||this.expandDepthIn(a.children[e],d.item(e),c+1)},dataFilterCaseSensitive:function(a,b){for(var c=!1,d=b.children.length,e=0;d>e;e++){var f=b.children[e],g={text:f.text,leaf:f.leaf,disabled:f.disabled,checked:f.checked,children:[],modelLink:f},h=!(f.checked!=this.filter_state&&-1!=this.filter_state||this.filter_keyword&&-1==f.text.indexOf(this.filter_keyword));h?(a.leaf=!1,g.stop=1,g.index=a.children.length,g.children=f.children,f.viewLink=g,a.children.push(g),c=!0):f.leaf||this.dataFilterCaseSensitive(g,f)&&(a.leaf=!1,g.stop=0,g.index=a.children.length,f.viewLink=g,a.children.push(g),c=!0)}return c},dataFilterCaseInsensitive:function(a,b){for(var c=!1,d=b.children.length,e=0;d>e;e++){var f=b.children[e],g={text:f.text,leaf:f.leaf,disabled:f.disabled,checked:f.checked,children:[],modelLink:f},h=!(f.checked!=this.filter_state&&-1!=this.filter_state||this.filter_keyword&&-1==f.text.toLowerCase().indexOf(this.filter_keyword));h?(a.leaf=!1,g.stop=1,g.index=a.children.length,g.children=f.children,f.viewLink=g,a.children.push(g),c=!0):f.leaf||this.dataFilterCaseInsensitive(g,f)&&(a.leaf=!1,g.stop=0,g.index=a.children.length,f.viewLink=g,a.children.push(g),c=!0)}return c},setCheckbox:function(a,b){for(var c=0;3>c;c++)a.removeClass(this.stateStyle[c]);a.addClass(this.stateStyle[b||0])},delViewData:function(a){if(a.modelLink.viewLink=null,!a.stop&&!a.leaf&&a.children.length)for(var b=a.children,c=b.length-1;c>=0;c--)this.delViewData(b[c])},getViewPathByModelPath:function(a){var b=[];if(this.breakPoint=-1,this.viewChanged){var c=[],d=this.modelData,e=d.viewLink;e.checked=d.checked;for(var f=0;f<a.length&&(d=d.children[a[f]],e=d.viewLink,e);f++)c.push(e),b.push(e.index),e.checked=d.checked;f<a.length?(f>0&&1==c[f-1].stop&&(this.breakPoint=f-1),b=b.concat(a.slice(f))):this.breakPoint=f}else b=b.concat(a),this.breakPoint=a.length;return b},buildHash:function(a,b){for(var c=b.length,d=a.children,e=d.length,f=0;e>f;f++)if(b[c]=f,this.valuePathHash[d[f].value]=b.concat([]),d[f].children&&d[f].children.length){var g=[];g=g.concat(b),this.buildHash(d[f],g)}},filter:function(a,b){if(this.viewChanged&&(this.delViewData(this.viewData),this.viewData=null),this.viewData=this.modelData,!this.viewData.leaf){if(-1==a&&!b){this.tree_tpl.overwrite(this.el,this.modelData);var c=this.el.child("div.x-tree-root");return this.expand(c),void(this.viewChanged=0)}var d={text:this.modelData.text,leaf:!0,disabled:this.modelData.disabled,checked:this.modelData.checked,children:[],indent:this.modelData.indent,modelLink:this.modelData};this.filter_state=a,this.filter_keyword=b,this.caseSensitive?this.dataFilterCaseSensitive(d,this.modelData):(b&&(this.filter_keyword=b.toLowerCase()),this.dataFilterCaseInsensitive(d,this.modelData)),this.viewData=d,this.modelData.viewLink=this.viewData,this.viewChanged=1,this.tree_tpl.overwrite(this.el,this.viewData);var c=this.el.child("div.x-tree-root");this.expand(c),this.expandDepthIn(this.viewData,c,0)}},uncheckAll:function(){var a=this.el.child("div.x-tree-root"),b=this.getViewPath(a);b=this.getModelPathByViewPath(b),this.updateData(b,0),this.updateUI(a,b)},setNode:function(a,b,c){this.updateData(a,b,c);var d=this.getViewPathByModelPath(a);if(!this.viewChanged||-1!=this.breakPoint){var e,f=this.el.child("div.x-tree-root"),g=f.down("img.x-tree-checknode-icon"),h=new Ext.CompositeElementLite,i=this.viewData,j=d.length;for(j>0&&this.setCheckbox(g,i.checked),e=0;j>e&&(h.fill(Ext.query("div.x-tree-node-level"+(e+1),f.up("li").dom)),h.getCount());e++)f=h.item(d[e]),i=i.children[d[e]],g=f.down("img.x-tree-checknode-icon"),j-1>e&&this.setCheckbox(g,i.checked);if(e==j){var k=g.parent(".x-tree-node-el");k&&this.setUITree(k,b,a.length)}}},setNodeByValue:function(a,b){if(!this.hasValueHashPath){var c=this.modelData;this.valuePathHash={},this.valuePathHash[c.value]=[],this.buildHash(c,[]),this.hasValueHashPath=!0}var d=this.valuePathHash[a];this.setNode(d,b)},setLeaf:function(a,b){this.setNode(a,b)},resetData:function(a){if(this.data=a,this.modelData=this.viewData=this.data,this.viewChanged=0,this.hasValueHashPath=!1,this.viewData.indent=this.rootVisible?'<img class="x-tree-icon" src="'+Ext.BLANK_IMAGE_URL+'" />':"",this.rendered){this.tree_tpl.overwrite(this.el,this.viewData);var b=this.el.child("div.x-tree-root");!this.data.leaf&&this.data.children&&this.expand(b)}},setSelectedData:function(a){if(!this.hasValueHashPath){var b=this.modelData;this.valuePathHash={},this.valuePathHash[b.value]=[],this.buildHash(b,[]),this.hasValueHashPath=!0}var c=[];this.updateData(c,0),a=a||[];for(var d=0,e=a.length;e>d;d++)c=this.valuePathHash[a[d]],c&&this.updateData(c,1);this.resetData(this.data)},getData:function(){return this.data},select:function(a){var b=this.el.child("div.x-tree-root");if(!a.length)return this.selectNode(b),0;var c=this.getViewPathByModelPath(a);this.viewChanged&&-1==this.breakPoint&&(this.resetData(this.data),b=this.el.child("div.x-tree-root"));for(var d,e=new Ext.CompositeElementLite,f=0,g=c.length;g>f;)e.fill(Ext.query("div.x-tree-node-level"+(f+1),b.up("li").dom)),d=e.item(c[f]),d?(f++,b=d):this.expand(b);this.selectNode(b)}}),Ext.reg("lighttree",SF.tree.LightTree),Ext.override(Ext.tree.TreeLoader,{processResponse:function(a,b,c,d){try{var e=a.responseData||a.getJsonData();b.beginUpdate();for(var f=0,g=e.length;g>f;f++){var h=this.createNode(e[f]);h&&b.appendChild(h)}b.endUpdate(),this.runCallback(c,d||b,[b])}catch(i){this.handleFailure(a)}}}),function(){SF.ns("SF.layout"),SF.layout.MenuLayout=SF.extend(Ext.layout.MenuLayout,{doAutoSize:function(){var a=this.container,b=a.width;if(a.floating)if(b)a.setWidth(b);else if(Ext.isIE){a.setWidth(Ext.isStrict&&!Ext.isIE6?"auto":a.minWidth);{var c=a.getEl();c.dom.offsetWidth}a.setWidth(a.getLayoutTarget().getWidth()+c.getFrameWidth("lr"))}}}),Ext.Container.LAYOUTS.menu=SF.layout.MenuLayout}(),SF.ns("SF.layout"),SF.layout.FormLayout=SF.extend(Ext.layout.FormLayout,{displayMode:"compact",labelSeparator:_("\uff1a"),trackLabels:!0,isBold:function(a){return SF.isDefined(a.boldLabel)?a.boldLabel:this.container.boldLabels},fieldTpl:function(){var a=new Ext.Template('<div class="x-form-item {itemCls}" tabIndex="-1">','<label for="{id}" style="{labelStyle}" class="x-form-item-label {labelCls}">{label}{labelSeparator}</label>','<div class="x-form-element {elementCls}" id="x-form-el-{id}" style="{elementStyle}">','</div><div class="{clearCls}"></div>',"</div>");return a.disableFormats=!0,a.compile()}(),getTemplateArgs:function(a){var b=!a.fieldLabel||a.hideLabel,c=this.isHide(a),d=this.container;return{id:a.id,label:a.fieldLabel,labelStyle:c?"display:none; "+a.labelStyle:this.getLabelStyle(a.labelStyle),labelCls:"x-form-item-label-"+d.labelAlign+(this.isBold(a)?" x-bold-label":""),elementStyle:c?"padding-left:0;":this.elementStyle,elementCls:"x-form-element-"+d.labelAlign,labelSeparator:b?"":Ext.isDefined(a.labelSeparator)?a.labelSeparator:this.labelSeparator,itemCls:(a.itemCls||this.container.itemCls||"")+"x-form-item-"+d.labelAlign,clearCls:a.clearCls||"x-form-clear-left"}},setContainer:function(a){switch(Ext.layout.FormLayout.superclass.setContainer.call(this,a),a.labelAlign){case"top":case"left":case"right":break;default:a.labelAlign="left"}if(a.addClass("x-form-label-align-"+a.labelAlign),a.hideLabels)Ext.apply(this,{labelStyle:"display:none",elementStyle:"padding-left:0;",labelAdjust:0});else{if(this.labelSeparator=a.labelSeparator||this.labelSeparator,a.labelWidth=a.labelWidth||100,Ext.isNumber(a.labelWidth)){Ext.isIE6&&(a.labelWidth=Math.ceil(a.labelWidth),a.labelWidth+=a.labelWidth%2);var b=Ext.isNumber(a.labelPad)?a.labelPad:5;Ext.apply(this,{labelAdjust:a.labelWidth+b,labelStyle:"width:"+a.labelWidth+"px;",elementStyle:"padding-left:"+(a.labelWidth+b)+"px"})}"top"===a.labelAlign&&Ext.apply(this,{labelStyle:"width:auto;",labelAdjust:0,elementStyle:"padding-left:0;"})}},renderItem:function(a,b,c){if(a&&(a.isFormField||a.fieldLabel)&&"hidden"!==a.inputType){var d=this.getTemplateArgs(a),e=this.isBold(a);if(Ext.isNumber(b)&&(b=c.dom.childNodes[b]||null),a.itemCt=b?this.fieldTpl.insertBefore(b,d,!0):this.fieldTpl.append(c,d,!0),e&&(a.boldLabel=!0),a.rendered?this.isValidParent(a,c)||Ext.fly("x-form-el-"+a.id).appendChild(a.getPositionEl()):a.render("x-form-el-"+a.id),a.getItemCt||Ext.apply(a,{getItemCt:function(){return a.itemCt},customItemCt:!0}),a.label=a.getItemCt().child("label.x-form-item-label"),SF.isString(a.fieldTip)&&!a.builtinFieldTip){var f,g,h=a.getItemCt(),i=SF.form.FieldTipMgr.getTipAutoEl(a.fieldTip,a.fieldTipStyle),j=h.child("div.x-form-element");switch(i.cls=i.cls||"",i.cls+=" x-field-tip-"+this.container.labelAlign,g=a.fieldTipAlign,a.fieldTipAlign){case"top":break;case"right":a.isSingleLineField||(g="top");break;default:g="loose"===this.displayMode&&a.isSingleLineField?"right":"top"}"right"===g?(i.cls+=" x-field-tip-loose",f=j.createChild(i,void 0,!0)):f="top"===this.container.labelAlign?h.createChild(i,j,!0):j.createChild(i,j.dom.firstChild,!0)}if(e&&this.isHide(a)&&a.boxLabel&&a.isXType("checkbox")){var k=a.wrap.child("label.x-form-cb-label");k.addClass("x-bold-label")}this.trackLabels&&(a.hidden&&this.onFieldHide(a),a.disabled&&this.onFieldDisable(a),a.on({scope:this,beforeshow:this.onFieldShow,beforehide:this.onFieldHide,enable:this.onFieldEnable,disable:this.onFieldDisable})),this.configureItem(a)}else Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)},onRemove:function(a){Ext.layout.FormLayout.superclass.onRemove.call(this,a),this.trackLabels&&(a.un("beforeshow",this.onFieldShow,this),a.un("beforehide",this.onFieldHide,this),a.un("enable",this.onFieldEnable,this),a.un("disable",this.onFieldDisable,this));var b=a.getPositionEl(),c=a.getItemCt&&a.getItemCt();a.rendered&&c&&(b&&b.dom&&b.insertAfter(c),Ext.destroy(c),Ext.destroyMembers(a,"label","itemCt","container"),a.customItemCt&&Ext.destroyMembers(a,"getItemCt","customItemCt"))},onFieldDisable:function(a){a.getItemCt().addClass("x-item-disabled")},onFieldEnable:function(a){a.getItemCt().removeClass("x-item-disabled")},adjustWidthAnchor:function(a,b){if(a=b.label?a-2:a,b.label&&!this.isHide(b)&&"top"!=this.container.labelAlign){var c=Ext.isIE6||Ext.isIE&&!Ext.isStrict;return a-this.labelAdjust+(c?-3:0)}return a},adjustHeightAnchor:function(a,b){return a=b.label?a-2:a,b.label&&!this.isHide(b)&&"top"==this.container.labelAlign?a-b.label.getHeight():a}}),Ext.Container.LAYOUTS.form=SF.layout.FormLayout,Ext.layout.BorderLayout.Region.prototype.getCollapsedEl=function(){if(!this.collapsedEl){if(!this.toolTemplate){var a=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');a.disableFormats=!0,a.compile(),Ext.layout.BorderLayout.Region.prototype.toolTemplate=a}if(this.showCollapseTitle&&!this.collapsedTitleEl){var b=new Ext.Template('<div class="x-tool-title x-tool-title-{id}">'+this.title+"</div>");b.disableFormats=!0,b.compile(),Ext.layout.BorderLayout.Region.prototype.collapsedTitleEl=b}if(this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"}),this.collapsedEl.enableDisplayMode("block"),"mini"==this.collapseMode)this.collapsedEl.addClass("x-layout-cmini-"+this.position),this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"}),this.miniCollapsedEl.addClassOnOver("x-layout-mini-over"),this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this.onExpandClick,this,{});else{if(this.collapsible!==!1&&!this.hideCollapseTool){var c=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},!0);c.addClassOnOver("x-tool-expand-"+this.position+"-over"),c.on("click",this.onExpandClick,this,{})}this.collapsible!==!1&&this.showCollapseTitle&&this.collapsedTitleEl.append(this.collapsedEl.dom,{id:"expand-title-"+this.position},!0),(this.floatable!==!1||this.titleCollapse)&&(this.collapsedEl.addClassOnOver("x-layout-collapsed-over"),this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this))}}return this.collapsedEl},SF.ns("SF.menu"),SF.menu.BaseItem=Ext.menu.BaseItem,function(){var a=Ext.menu.BaseItem.prototype.initComponent;SF.override(SF.menu.BaseItem,{initComponent:function(){a.apply(this,arguments),this.actionHandler&&this.setActionHandler(this.actionHandler,this.actionScope)},setActionHandler:function(a,b){var c=SF.emptyFn;SF.isFunction(a)&&(c=function(c,d){a.defer(1,b,[c,d,{button:c}])}),this.actionHandler&&this.un("click",this.actionHandler,this),this.on("click",this.actionHandler=c,this)}})}(),SF.ns("SF.plugin"),SF.plugin.AutoHeight=SF.extend(Object,{constructor:function(a){SF.apply(this,a)},init:function(a){this.ct=a,this.ct.height||this.syncHeight()},getViewSize:function(){var a=this,b=document,c=a.dom,d=c==b||c==b.body,e=0,f=0;if(e=a.getPadding("tb"),f=a.getPadding("lr"),d){var g=Ext.lib.Dom;return{width:g.getViewWidth(),height:g.getViewHeight()}}return{width:c.clientWidth-f,height:c.clientHeight-e}},syncHeight:function(){this.ct.autoHeight=!0,this.ct.autoScroll=!1,this.maxHeight=parseInt(this.ct.maxHeight)||-1,this.ct.on("afterlayout",function(){this.adjustHeight()},this,{buffer:300}),this.ct.on("render",this.initEvent,this,{single:!0})},initEvent:function(){this.ct.ownerCt?this.ct.mon(this.ct.ownerCt,"resize",this.adjustHeight,this,{buffer:100}):(Ext.EventManager.onWindowResize(this.adjustHeight,this),this.ct.on("destroy",function(){Ext.EventManager.removeResizeListener(this.adjustHeight,this)},this))},setHeight:function(a){a=parseInt(a)||0,a>0?(this.ct.autoHeight=!1,this.setYScroll(!0),this.ct.rendered&&(this.ct.getLayoutTarget().getViewSize=this.getViewSize,this.ct.setHeight(a))):(this.ct.autoHeight=!0,this.setYScroll(!1),this.ct.rendered&&(this.ct.setHeight(void 0),this.ct.getLayoutTarget().dom.scrollTop=0))},getAdjustHeight:function(a,b,c){var d;return d=c>0?Math.min(c,b):b,a>d?d:void 0},adjustHeight:function(){this.ct.autoHeight===!0&&(this.height=this.ct.getHeight());var a=this.height,b=this.getContainerTarget().getViewSize(!0).height;this.setHeight(this.getAdjustHeight(a,b,this.maxHeight))},getContainerTarget:function(){return this.ct.ownerCt?this.ct.ownerCt.getLayoutTarget():Ext.get(this.ct.getPositionEl().dom.parentNode)},getScrollTarget:function(){return this.ct.getLayoutTarget()||this.ct.getContentTarget()},setYScroll:function(a){var b=this.getScrollTarget();b?a?(b.setStyle("overflow-x","hidden"),b.setStyle("overflow-y","scroll")):b.setStyle("overflow",""):this.ct.autoScroll=a?"x":""}}),Ext.preg("autoheight",SF.plugin.AutoHeight),SF.ns("SF.tpl"),SF.tpl.TplComponent=Ext.extend(Ext.BoxComponent,{mytpl:null,mydata:null,beforeUpdate:Ext.emptyFn,updateInfo:function(){this.beforeUpdate(this.mydata),this.mytpl.overwrite(this.el,this.mydata)},setJsonValue:function(a){this.mydata=a||{},this.rendered&&this.updateInfo()},initComponent:function(){SF.tpl.TplComponent.superclass.initComponent.call(this),(Ext.isString(this.mytpl)||Ext.isArray(this.mytpl))&&(this.mytpl=new Ext.XTemplate(this.mytpl))},onRender:function(){SF.tpl.TplComponent.superclass.onRender.apply(this,arguments),this.updateInfo()}}),Ext.Tip.getTipContainer=function(a){var b=null;return a&&a.ownerCt&&Ext.Container.prototype.bubble.call(a,function(a){return a.getLayoutTarget&&a.rendered&&(a.autoScroll&&(a.autoScroll.x||a.autoScroll.y)||a.isTipContainer===!0)?(b=a,!1):void 0}),b},Ext.UpdateManager.defaults.indicatorText=String.format('<div class="loading-indicator">{0}</div>',_("\u6b63\u5728\u52a0\u8f7d\u6570\u636e,\u8bf7\u7a0d\u5019...")),Ext.DataView&&(Ext.DataView.prototype.emptyText=""),Ext.grid.GridPanel&&(Ext.grid.GridPanel.prototype.ddText=_("\u9009\u62e9\u4e86 {0} \u884c")),Ext.TabPanelItem&&(Ext.TabPanelItem.prototype.closeText=_("\u5173\u95ed\u6b64\u6807\u7b7e")),Ext.form.Field&&(Ext.form.Field.prototype.invalidText=_("\u8f93\u5165\u503c\u975e\u6cd5")),Ext.LoadMask&&(Ext.LoadMask.prototype.msg=_("\u6b63\u5728\u52a0\u8f7d\u6570\u636e,\u8bf7\u7a0d\u5019...")),Date.monthNames=[_("\u4e00\u6708"),_("\u4e8c\u6708"),_("\u4e09\u6708"),_("\u56db\u6708"),_("\u4e94\u6708"),_("\u516d\u6708"),_("\u4e03\u6708"),_("\u516b\u6708"),_("\u4e5d\u6708"),_("\u5341\u6708"),_("\u5341\u4e00\u6708"),_("\u5341\u4e8c\u6708")],Date.dayNames=[_("\u65e5"),_("\u4e00"),_("\u4e8c"),_("\u4e09"),_("\u56db"),_("\u4e94"),_("\u516d")],Date.formatCodes.a=String.format("(this.getHours() < 12 ? '{0}' : '{1}')",_("\u4e0a\u5348"),_("\u4e0b\u5348")),Date.formatCodes.A=String.format("(this.getHours() < 12 ? '{0}' : '{1}')",_("\u4e0a\u5348"),_("\u4e0b\u5348")),Ext.MessageBox&&(Ext.MessageBox.buttonText={ok:_("\u786e\u5b9a"),cancel:_("\u53d6\u6d88"),yes:_("\u662f"),no:_("\u5426")}),Ext.util.Format&&(Ext.util.Format.date=function(a,b){return a?(a instanceof Date||(a=new Date(Date.parse(a))),a.dateFormat(b||_("Y-m-d"))):""}),Ext.DatePicker&&Ext.apply(Ext.DatePicker.prototype,{todayText:_("\u4eca\u5929"),minText:_("\u65e5\u671f\u5fc5\u987b\u5927\u4e8e\u6700\u5c0f\u5141\u8bb8\u65e5\u671f"),maxText:_("\u65e5\u671f\u5fc5\u987b\u5c0f\u4e8e\u6700\u5927\u5141\u8bb8\u65e5\u671f"),disabledDaysText:"",disabledDatesText:"",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:_("\u4e0b\u4e2a\u6708 (Ctrl+Right)"),prevText:_("\u4e0a\u4e2a\u6708 (Ctrl+Left)"),monthYearText:_("\u70b9\u51fb\u6539\u53d8\u6708\u4efd\u548c\u5e74\u4efd"),todayTip:_("{0} (\u7a7a\u683c\u952e\u9009\u62e9)"),format:_("Y-m-d"),okText:_("\u786e\u5b9a"),cancelText:_("\u53d6\u6d88")}),Ext.PagingToolbar&&Ext.apply(Ext.PagingToolbar.prototype,{beforePageText:_("\u7b2c"),afterPageText:_("\u9875,\u5171 {0} \u9875"),firstText:_("\u7b2c\u4e00\u9875"),prevText:_("\u4e0a\u4e00\u9875"),nextText:_("\u4e0b\u4e00\u9875"),lastText:_("\u6700\u540e\u9875"),refreshText:_("\u5237\u65b0"),displayMsg:_("\u663e\u793a {0} - {1}\u6761\uff0c\u5171 {2} \u6761"),emptyMsg:_("\u6ca1\u6709\u6570\u636e")}),Ext.form.TextField&&Ext.apply(Ext.form.TextField.prototype,{minLengthText:_("\u8be5\u8f93\u5165\u9879\u7684\u6700\u5c0f\u957f\u5ea6\u662f {0} \u4e2a\u5b57\u8282"),maxLengthText:_("\u8be5\u8f93\u5165\u9879\u7684\u6700\u5927\u957f\u5ea6\u662f {0} \u4e2a\u5b57\u8282"),blankText:_("\u8be5\u8f93\u5165\u9879\u4e3a\u5fc5\u8f93\u9879"),regexText:"",emptyText:null}),Ext.form.NumberField&&Ext.apply(Ext.form.NumberField.prototype,{minText:_("\u8be5\u8f93\u5165\u9879\u7684\u6700\u5c0f\u503c\u662f {0}"),maxText:_("\u8be5\u8f93\u5165\u9879\u7684\u6700\u5927\u503c\u662f {0}"),nanText:_("{0} \u4e0d\u662f\u6709\u6548\u6570\u503c")}),Ext.form.DateField&&Ext.apply(Ext.form.DateField.prototype,{disabledDaysText:_("\u7981\u7528"),disabledDatesText:_("\u7981\u7528"),minText:_("\u8be5\u8f93\u5165\u9879\u7684\u65e5\u671f\u5fc5\u987b\u5728 {0} \u4e4b\u540e"),maxText:_("\u8be5\u8f93\u5165\u9879\u7684\u65e5\u671f\u5fc5\u987b\u5728 {0} \u4e4b\u524d"),invalidText:_("{0} \u662f\u65e0\u6548\u7684\u65e5\u671f - \u5fc5\u987b\u7b26\u5408\u683c\u5f0f\uff1a {1}"),format:_("Y-m-d")}),Ext.form.ComboBox&&Ext.apply(Ext.form.ComboBox.prototype,{loadingText:_("\u6b63\u5728\u52a0\u8f7d\u6570\u636e,\u8bf7\u7a0d\u5019..."),valueNotFoundText:void 0}),Ext.form.VTypes&&Ext.apply(Ext.form.VTypes,{emailText:_('\u8be5\u8f93\u5165\u9879\u5fc5\u987b\u662f\u7535\u5b50\u90ae\u4ef6\u5730\u5740\uff0c\u683c\u5f0f\u5982\uff1a "user@example.com"'),urlText:_('\u8be5\u8f93\u5165\u9879\u5fc5\u987b\u662fURL\u5730\u5740\uff0c\u683c\u5f0f\u5982\uff1a "http://www.example.com"'),alphaText:_("\u8be5\u8f93\u5165\u9879\u53ea\u80fd\u5305\u542b\u534a\u89d2\u5b57\u6bcd\u548c_"),alphanumText:_("\u8be5\u8f93\u5165\u9879\u53ea\u80fd\u5305\u542b\u534a\u89d2\u5b57\u6bcd,\u6570\u5b57\u548c_")}),Ext.form.HtmlEditor&&Ext.apply(Ext.form.HtmlEditor.prototype,{createLinkText:_("\u6dfb\u52a0\u8d85\u7ea7\u94fe\u63a5")+_("\uff1a"),buttonTips:{bold:{title:_("\u7c97\u4f53 (Ctrl+B)"),text:_("\u5c06\u9009\u4e2d\u7684\u6587\u5b57\u8bbe\u7f6e\u4e3a\u7c97\u4f53"),cls:"x-html-editor-tip"},italic:{title:_("\u659c\u4f53 (Ctrl+I)"),text:_("\u5c06\u9009\u4e2d\u7684\u6587\u5b57\u8bbe\u7f6e\u4e3a\u659c\u4f53"),cls:"x-html-editor-tip"},underline:{title:_("\u4e0b\u5212\u7ebf (Ctrl+U)"),text:_("\u7ed9\u6240\u9009\u6587\u5b57\u52a0\u4e0b\u5212\u7ebf"),cls:"x-html-editor-tip"},increasefontsize:{title:_("\u589e\u5927\u5b57\u4f53"),text:_("\u589e\u5927\u5b57\u53f7"),cls:"x-html-editor-tip"},decreasefontsize:{title:_("\u7f29\u5c0f\u5b57\u4f53"),text:_("\u51cf\u5c0f\u5b57\u53f7"),cls:"x-html-editor-tip"},backcolor:{title:_("\u4ee5\u4e0d\u540c\u989c\u8272\u7a81\u51fa\u663e\u793a\u6587\u672c"),text:_("\u4f7f\u6587\u5b57\u770b\u4e0a\u53bb\u50cf\u662f\u7528\u8367\u5149\u7b14\u505a\u4e86\u6807\u8bb0\u4e00\u6837"),cls:"x-html-editor-tip"},forecolor:{title:_("\u5b57\u4f53\u989c\u8272"),text:_("\u66f4\u6539\u5b57\u4f53\u989c\u8272"),cls:"x-html-editor-tip"},justifyleft:{title:_("\u5de6\u5bf9\u9f50"),text:_("\u5c06\u6587\u5b57\u5de6\u5bf9\u9f50"),cls:"x-html-editor-tip"},justifycenter:{title:_("\u5c45\u4e2d"),text:_("\u5c06\u6587\u5b57\u5c45\u4e2d\u5bf9\u9f50"),cls:"x-html-editor-tip"},justifyright:{title:_("\u53f3\u5bf9\u9f50"),text:_("\u5c06\u6587\u5b57\u53f3\u5bf9\u9f50"),cls:"x-html-editor-tip"},insertunorderedlist:{title:_("\u9879\u76ee\u7b26\u53f7"),text:_("\u5f00\u59cb\u521b\u5efa\u9879\u76ee\u7b26\u53f7\u5217\u8868"),cls:"x-html-editor-tip"},insertorderedlist:{title:_("\u7f16\u53f7"),text:_("\u5f00\u59cb\u521b\u5efa\u7f16\u53f7\u5217\u8868"),cls:"x-html-editor-tip"},createlink:{title:_("\u8f6c\u6210\u8d85\u7ea7\u94fe\u63a5"),text:_("\u5c06\u6240\u9009\u6587\u672c\u8f6c\u6362\u6210\u8d85\u7ea7\u94fe\u63a5"),cls:"x-html-editor-tip"},sourceedit:{title:_("\u4ee3\u7801\u89c6\u56fe"),text:_("\u4ee5\u4ee3\u7801\u7684\u5f62\u5f0f\u5c55\u73b0\u6587\u672c"),cls:"x-html-editor-tip"}}}),Ext.grid.GridView&&Ext.apply(Ext.grid.GridView.prototype,{sortAscText:_("\u6b63\u5e8f"),sortDescText:_("\u5012\u5e8f"),lockText:_("\u9501\u5b9a\u5217"),unlockText:_("\u89e3\u9664\u9501\u5b9a"),columnsText:_("\u5217")}),Ext.grid.PropertyColumnModel&&Ext.apply(Ext.grid.PropertyColumnModel.prototype,{nameText:_("\u540d\u79f0"),valueText:_("\u503c"),dateFormat:_("Y-m-d")}),Ext.layout.BorderLayout&&Ext.layout.BorderLayout.SplitRegion&&Ext.apply(Ext.layout.BorderLayout.SplitRegion.prototype,{splitTip:_("\u62d6\u52a8\u6765\u6539\u53d8\u5c3a\u5bf8."),collapsibleSplitTip:_("\u62d6\u52a8\u6765\u6539\u53d8\u5c3a\u5bf8. \u53cc\u51fb\u9690\u85cf.")});