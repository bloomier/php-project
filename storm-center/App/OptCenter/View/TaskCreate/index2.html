<include file="./App/OptCenter/View/header.html" />

<style>
    h3{
        color: gray;
    }
</style>

<input type="hidden"  value="{$policy_detail}" id="policy_detail">
<input type="hidden"  value="{$policy_group}" id="policy_group">

<div class="page-content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12 margin-top-20">
                <ol class="breadcrumb">
                    <li><i class="fa fa-home"></i> <a href="__ROOT__/index.php/Service/index/">首页</a> </li>
                    <li>网站监测</li>
                    <li><a href="javascript:;">创建任务</a> </li>
                </ol>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="portlet box blue">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="icon-reorder"></i> 创建任务
                        </div>
                    </div>
                    <div class="portlet-body form">
                        <form method="post" class="form-horizontal task-create-next-form">
                            <div class="form-group">
                                <div style="margin: 20px;">
                                    <h3>扫描目标</h3><hr>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2"><span style="color: red">*</span>扫描目标</label>
                                    <div class="col-sm-10 row" style="padding-top: 5px;">
                                        <label class="col-sm-2 " style="font-size: 12px;">
                                        <span style="line-height: 16px;">
                                            <input type="radio" name="task_input_source" checked value="0" data-title="">
                                        </span>
                                            手工输入
                                        </label>
                                        <label class="col-sm-3 " style="font-size: 12px;">
                                        <span style="line-height: 16px;">
                                            <input type="radio" name="task_input_source" value="1" data-title="">
                                        </span>
                                            域名库搜索
                                        </label>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 col-md-offset-2">
                                        <textarea rows="10" style="width:100%;resize: none;overflow-y: auto" id="input_domain_list">

                                        </textarea>
                                    </div>
                                </div>
                                <div class="row" style="display: none">
                                    <div class="col-md-6 col-md-offset-2">
                                        <textarea rows="10" style="width:100%;resize: none;overflow-y: auto" id="query_domain_list">

                                        </textarea>
                                    </div>
                                </div>
                                <div style="margin: 20px;">
                                    <h3>任务信息</h3><hr>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2"><span style="color: red">*</span>任务名称</label>
                                    <div class="col-sm-6">
                                        <input class="form-control" value="" id="task_name">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2">任务描述</label>
                                    <div class="col-sm-6">
                                        <textarea style="resize: none; height: 250px" class="form-control " rows="4" id="task_desc">
                                        </textarea>
                                    </div>
                                </div>
                                <div style="margin: 20px;">
                                    <h3>扫描策略</h3><hr>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2"><span style="color: red">*</span>关联策略</label>
                                    <div class="col-sm-6">
                                        <a class="btn select_policy_model_btn">选择策略</a>
                                        <a class="btn clear_select_policy_btn">清空策略</a>
                                        <a class="btn delete_select_danger_policy_btn">删除有危害策略</a>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 col-md-offset-2">
                                        <div rows="10" class="form-control" style="width:100%;resize:none; height:200px;overflow:hidden;overflow-y:auto" id="task_policy">

                                        </div>
                                    </div>
                                </div>
                                <div style="margin: 20px;">
                                    <h3>其他配置</h3><hr>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2"><span style="color: red">*</span>扫描节点</label>
                                    <div class="col-sm-6">
                                        <select style="width:100%" class="policy-level" id="task_node">
                                            <volist name="nodes" id="vo" key="k" >
                                                <option value="{$vo.id}">{$vo.name}</option>
                                            </volist>
                                        </select>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2"><span style="color: red">*</span>扫描层级</label>
                                    <div class="col-sm-6">
                                        <div class="btn-group" role="group" id="task_scan_level">
                                            <button type="button" class="btn btn-default blue" value="1">1层</button>
                                            <button type="button" class="btn btn-default blue" value="2">2层</button>
                                            <button type="button" class="btn btn-default blue active" value="3">3层</button>
                                            <button type="button" class="btn btn-default blue" value="4">4层</button>
                                            <button type="button" class="btn btn-default blue" value="5">5层</button>
                                            <button type="button" class="btn btn-default blue" value="10">10层</button>
                                            <button type="button" class="btn btn-default blue" value="20">20层</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="control-label col-sm-2"><span style="color: red">*</span>单位切片数</label>
                                    <div class="col-sm-6">
                                        <div class="btn-group" role="group" id="task_policy_size">
                                            <button type="button" class="btn btn-default blue active" value="5000">5千</button>
                                            <button type="button" class="btn btn-default blue" value="10000">1万</button>
                                            <button type="button" class="btn btn-default blue" value="20000">2万</button>
                                            <button type="button" class="btn btn-default blue" value="50000">5万</button>
                                            <button type="button" class="btn btn-default blue" value="100000">10万</button>
                                            <button type="button" class="btn btn-default blue" value="200000">20万</button>
                                            <button type="button" class="btn btn-default blue" value="500000">50万</button>
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group audit_button"  style="padding-top: 5px;">
                                    <label class="control-label col-sm-2">扫描模式</label>
                                    <div class="col-sm-10 row">
                                        <label class="col-sm-2 " style="font-size: 12px;">
                                        <span style="line-height: 16px;">
                                            <input type="radio" name="scan_style" checked value="0" data-title="">
                                        </span>
                                            全面扫描(边爬边扫)
                                        </label>
                                        <label class="col-sm-3 " style="font-size: 12px;">
                                        <span style="line-height: 16px;">
                                            <input type="radio" name="scan_style" value="1" data-title="">
                                        </span>
                                            快速模式(只扫不爬)
                                        </label>
                                    </div>
                                </div>
                                <!--<div class="col-sm-offset-2 col-sm-2">-->
                                    <!--<button type="button" class="btn blue task-create-last-stmp">上一步</button>-->
                                <!--</div>-->
                                <div class="col-sm-offset-2 col-sm-2">
                                    <button type="button" class="btn blue task-create-btn">加入扫描队列</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="seleft_task_policy">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">选择策略</h4>
            </div>
            <div class="modal-body">
                <div>
                    <ul class="nav nav-tabs" role="tablist" id="policy_tab">
                        <li role="presentation" class="active"><a href="#task_policy_group_select_tab" aria-controls="home" role="tab" data-toggle="tab">策略组</a></li>
                        <li role="presentation"><a href="#task_policy_select_tab" aria-controls="profile" role="tab" data-toggle="tab">策略</a></li>
                    </ul>
                    <div class="tab-content">
                        <div role="tabpanel" class="tab-pane active" id="task_policy_group_select_tab">
                            <div style="padding: 10px;">
                                <div class="row margin-bottom-15">
                                    <div class="col-md-12">
                                        <form action="#" class="form-search pull-right">
                                            <div class="input-group" style="display: inline-table;vertical-align: top;">
                                                <input class="m-wrap medium" type="text" placeholder="策略组名称" id="policy_group_query_param">
                                                <button class="btn green" type="button" id="policy_group_query_btn">查询</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-striped table-bordered table-hover table-condensed datatable" id="policy_group_select_table">
                                            <thead class="bg-lightgrey">
                                            <tr role="row">
                                                <th><input type="checkbox" > </th>
                                                <td>策略组名称</td>
                                                <td>策略组描述</td>
                                                <td>策略个数</td>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div role="tabpanel" class="tab-pane" id="task_policy_select_tab">
                            <div style="padding: 10px;">
                                <div class="row margin-bottom-15">
                                    <div class="col-md-12">
                                        <form action="#" class="form-search pull-right">
                                            <select class="policy-level" id="policy_level">
                                                <option value="0">所有类型</option>
                                                <option value="20">信息</option>
                                                <option value="30">低危</option>
                                                <option value="40">中危</option>
                                                <option value="50">高危</option>
                                                <option value="60">安全事件</option>
                                            </select>
                                            <div class="input-group" style="display: inline-table;vertical-align: top;">
                                                <input class="m-wrap medium" type="text" placeholder="策略名称" id="policy_query_param">
                                                <button class="btn green" type="button" id="policy_query_btn">查询</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <table class="table table-striped table-bordered table-hover table-condensed datatable" id="policy_select_table">
                                            <thead class="bg-lightgrey">
                                            <tr role="row">
                                                <th><input type="checkbox" > </th>
                                                <td>策略ID</td>
                                                <td>策略名称</td>
                                                <td>危害</td>
                                                <td>漏洞等级</td>
                                                <td>策略描述</td>
                                                <td>修复建议</td>
                                                <td>操作</td>
                                            </tr>
                                            </thead>
                                            <tbody>
                                            </tbody>
                                        </table>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary" id="add_select_policy">添加</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<script src="__PUBLIC__/script/OptCenter/taskcreate/taskcreate2.js" type="text/javascript"></script>

<include file="./App/OptCenter/View/footer.html"/>